!function(){"use strict";var t={53073:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});const s=i(57650);e.default=class{constructor(){this.PACKAGE_VERSION="2.1.6",this.dev=!1,this.debugStyle="",this.debugTitle="",this.debugStyleAddLabel="background-color: PapayaWhip; padding: 3px;",this.queryOriginalObj=(0,s.getQueryObj)(),this.debug=!!(this.queryOriginalObj.debug&&this.queryOriginalObj.debug.length&&this.queryOriginalObj.debug[0])&&"0"!==this.queryOriginalObj.debug[0],this.prefixExternal="adlook",this.prefixPlayerIniter=`${this.prefixExternal}-player-initer`,this.prefixPlayerFrameIniter=`${this.prefixExternal}-player-frame-initer`,this.prefixVK=`${this.prefixExternal}-vk`,this.coreBaseUrl=this.queryOriginalObj.forceCoreBaseUrl&&this.queryOriginalObj.forceCoreBaseUrl.length?this.queryOriginalObj.forceCoreBaseUrl[0]:"https://a.adlook.tech","http"!==this.coreBaseUrl.substring(0,4)&&(this.coreBaseUrl=`https://${this.coreBaseUrl}`)}debugMessage(t){this.debug&&t()}}},94706:function(t,e,i){var s,n,o,r,a=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},l=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const h=i(53073),d=i(52606),c=i(32715),u=i(83632),p=i(87621),f=i(43544),m=i(92750),v=i(7316),g=i(29854),y=i(78199);console.log("InventoryCore 2.1.6 added to page");class b extends h.default{constructor(t){super(),s.add(this),o.set(this,(t=>t<10?.25:(10===t&&console.warn(`options.container '${l(this,s,"a",n)}' not found in page (attempt ${t})`),t<20?.5:(20===t&&console.warn(`options.container '${l(this,s,"a",n)}' not found in page (attempt ${t})`),1)))),this.state={options:t},console.log("InventoryCore 2.1.6 constructor",this.state.options),this.init()}checkContainer(t=1){return new Promise((e=>a(this,void 0,void 0,(function*(){document.getElementById(l(this,s,"a",n))?e(!0):t<30?(yield(0,v.default)(l(this,o,"f").call(this,t)),e(this.checkContainer(t+1))):e(!1)}))))}init(){return a(this,void 0,void 0,(function*(){if(yield(0,v.default)(0),this.state.options.uid||(this.state.options.uid=(0,g.default)(10)),l(this,s,"m",r).call(this)){if(!(yield this.checkContainer()))return void console.error(`options.container '${l(this,s,"a",n)}' not found in page`)}const t=yield(0,y.default)();switch(this.state.options.type){case"embed":this.state.worker=new u.default(this.state.options);break;case"sticky":this.state.worker=new m.default(this.state.options,t);break;case"flying":this.state.worker=new p.default(this.state.options,t);break;case"overroll":this.state.worker=new f.default(this.state.options);break;case"banner":this.state.options.fullscreen?this.state.worker=new d.default(this.state.options):this.state.worker=new c.default(this.state.options)}}))}play(){"js-to-play"===this.state.options.playMode&&this.state.worker.playFromParentPage()}}o=new WeakMap,s=new WeakSet,n=function(){return this.state.options.container?this.state.options.container:"embed"===this.state.options.type?"ut-embed":"flying"===this.state.options.type?"ut-flying":"banner"===this.state.options.type?"ut-banner":"overroll"===this.state.options.type?"ut-overroll":""},r=function(){return"sticky"!==this.state.options.type&&("banner"!==this.state.options.type||!this.state.options.fullscreen)},e.default=b},18146:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.styleFullScreenBanner=e.styleOverlay=e.styleSticky=e.styleIframeWrapperEmbed=e.styleIframeEmbed=e.styleOverroll=void 0;e.styleIframeEmbed=(t,e,i)=>`\n  .inventory-core-iframe_${i} {\n    display: block;\n    position: relative;\n    width: 100%;\n    max-width: ${t}px;\n    aspect-ratio: ${t} / ${e};\n    color-scheme: light !important;\n  }\n\n  .inventory-core-iframe_${i}:not(.sticky).adaptive {\n    max-width: unset;\n  }\n\n  .inventory-core-iframe_${i}.infinity-skeleton {\n    background: #eee;\n    background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);\n    background-size: 200% 100%;\n    animation: 1.5s shine linear infinite;\n  }\n`;e.styleIframeWrapperEmbed=(t,e,i)=>`\n  .inventory-core-iframe__wrapper_${i} {\n    width: 100%;\n    height: 0px;\n    max-width: ${t}px;\n    aspect-ratio: ${t} / ${e};\n    overflow: hidden;\n  }\n\n  .inventory-core-iframe__wrapper__interface-type-1 {\n    overflow: unset;\n  }\n\n  .inventory-core-iframe__wrapper_${i}.adaptive {\n    max-width: unset;\n  }\n\n  .inventory-core-iframe__wrapper_${i}.collapsed {\n    transition: all .5s\n  }\n`;e.styleSticky=(t,e)=>`\n  .inventory-core-iframe_${t}.sticky {\n    --inventory-core-padding: 0px;\n    position: fixed;\n    transition: opacity .5s;\n    opacity: 1;\n    z-index: 100 !important;\n    width: 80%;\n    ${e&&e.width&&e.height?`\n          max-width: ${e.width}px;\n          aspect-ratio: ${e.width} / ${e.height};\n        `:""}\n  }\n\n  .inventory-core-iframe_${t}.sticky.on-top {\n    z-index: 2147483647 !important;\n  }\n\n  .inventory-core-iframe_${t}.sticky:not(.played) {\n    pointer-events: none;\n    opacity: 0;\n  }\n\n  .inventory-core-iframe__align-left.sticky {\n    left: var(--inventory-core-padding);\n  }\n\n  .inventory-core-iframe__align-right.sticky {\n    right: var(--inventory-core-padding);\n  }\n\n  .inventory-core-iframe__vertical-align-top.sticky {\n    top: var(--inventory-core-padding);\n  }\n\n  .inventory-core-iframe__vertical-align-bottom.sticky {\n    bottom: var(--inventory-core-padding);\n  }\n\n  .inventory-core-iframe__align-center.sticky {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  .inventory-core-iframe__vertical-align-center.sticky {\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  .inventory-core-iframe__align-center.inventory-core-iframe__vertical-align-center.sticky {\n    transform: translate(-50%, -50%);\n  }\n\n  @media screen and (max-width: 850px) {\n    .inventory-core-iframe__align-mobile-left.sticky {\n      left: var(--inventory-core-padding);\n    }\n\n    .inventory-core-iframe__align-mobile-right.sticky {\n      right: var(--inventory-core-padding);\n    }\n\n    .inventory-core-iframe__align-mobile-center.sticky {\n      left: 50%;\n      transform: translateX(-50%);\n    }\n\n    .inventory-core-iframe__vertical-align-mobile-top.sticky {\n      top: var(--inventory-core-padding);\n    }\n\n    .inventory-core-iframe__vertical-align-mobile-bottom.sticky {\n      bottom: var(--inventory-core-padding);\n    }\n\n    .inventory-core-iframe__vertical-align-mobile-center.sticky {\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    .inventory-core-iframe__align-mobile-center.inventory-core-iframe__vertical-align-mobile-center.sticky {\n      transform: translate(-50%, -50%);\n    }\n\n    .inventory-core-iframe_${t}.sticky.adaptive {\n      width: 100%;\n      max-width: unset;\n      height: var(--inventory-core-adaptive-mobile-sticky-height, 25%);\n      bottom: 0px;\n      left: 0px;\n      top: unset;\n      right: unset;\n      transform: unset;\n    }\n  }\n\n  .inventory-core-iframe_${t}.sticky.adaptive.adaptive-mobile {\n      width: 100%;\n      max-width: unset;\n      height: var(--inventory-core-adaptive-mobile-sticky-height, 25%);\n      bottom: 0px;\n      left: 0px;\n      top: unset;\n      right: unset;\n      transform: unset;\n    }\n`;e.styleOverlay=t=>`\n  .inventory-core-overlay {\n    position: fixed;\n    left: -10000px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    background-color: black;\n    z-index: 10000;\n    opacity: 0;\n    transition: opacity .5s;\n  }\n\n  @media screen and (min-width: 801px) {\n    .inventory-core-iframe_${t}.sticky.played + .inventory-core-overlay__desktop {\n      left: 0px;\n      opacity: 0.3;\n    }\n\n    body:has(.inventory-core-iframe_${t}.sticky.played):has(.inventory-core-overlay__desktop) {\n      overflow-y: scroll;\n      position: fixed!important;\n      width: 100%;\n    }\n  }\n\n  @media screen and (max-width: 850px) {\n    .inventory-core-iframe_${t}.sticky.played + .inventory-core-overlay__mobile {\n      left: 0px;\n      opacity: 0.3;\n    }\n\n    body:has(.inventory-core-iframe_${t}.sticky.played):has(.inventory-core-overlay__mobile) {\n      overflow-y: scroll;\n      position: fixed!important;\n      width: 100%;\n    }\n  }\n`;e.styleOverroll=(t,e)=>`\n  #${t} {\n    position: relative !important;\n  }\n\n  .inventory-core-iframe_${e}, .inventory-core-button {\n    display: block;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    z-index: 10000;\n  }\n\n  .inventory-core-button {\n    border: 0px;\n    background-color: unset;\n  }\n\n  .visually-hidden {\n    position: absolute;\n    width: 1px !important;\n    height: 1px !important ;\n    margin: -1px;\n    border: 0;\n    padding: 0;\n    clip: rect(0 0 0 0);\n    overflow: hidden;\n  }\n`;e.styleFullScreenBanner=t=>`\n  .inventory-fullscreen-banner-overlay_${t} {\n    opacity: 0;\n    pointer-events: none;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    z-index: 10000;\n    background-color: hsl(0, 0%, 0%, 0.5);\n    backdrop-filter: blur(3px);\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n  }\n\n  .inventory-fullscreen-banner-overlay_${t}.show {\n    opacity: 1;\n    pointer-events: auto;\n  }\n\n  .inventory-fullscreen-banner-counter_${t} {\n    position: absolute;\n    top: 10px;\n    height: 40px;\n    width: 100%;\n    display: grid;\n    place-content: center;\n    color: white;\n  }\n\n  #inventory-fullscreen-banner-container-${t} {\n    position: absolute;\n    top: 60px;\n    bottom: 10px;\n    width: calc(100% - 20px);\n    left: 50%;\n    border-radius: 2px;\n    transform: translateX(-50%);\n    background-color: white;\n    display: grid;\n    place-content: center;\n  }\n\n  .inventory-fullscreen-banner-container-iframe-${t}--fullscreen {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n    border-radius: 2px;\n  }\n`},54177:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},y=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},b=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const w=i(53073),A=i(18146),k=i(98618),_=i(7316),T=i(79438),E=i(83859),P=i(53159),S=i(33733),x=i(3486);class C extends w.default{constructor(t,e){super(),s.add(this),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),a.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),this.skipped=!1,this.blackScreen=!1,this.nowFlyingSticky=!1,this.isMobile=!1,this.forceStopInfinity=!1,this.interfaceType=0,this.withoutIframe=!1,this.isMobile=!!e,this.specialUrl=null,this.uid=t.options.uid,this.body=document.getElementsByTagName("body")[0];const i=document.getElementById(`inventory-core-style${this.uid}`);i&&document.head.removeChild(i);const c=document.getElementById(`inventory-core-iframe${this.uid}`);c&&this.body.removeChild(c);const u=document.getElementById(`inventory-core-overlay${this.uid}`);if(u&&!this.adaptive&&this.body.removeChild(u),y(this,n,t.options,"f"),y(this,d,t.postBackCallbackToTop,"f"),y(this,o,!1,"f"),this._showed=!1,this.finished=!1,y(this,a,!0,"f"),this.count=0,this.visibilityLevel=0,y(this,h,0,"f"),this.withoutIframe="banner"!==b(this,n,"f").type&&b(this,n,"f").withoutIframe,y(this,l,(0,S.default)((()=>{b(this,s,"m",p).call(this)})),"f"),this.iframe=this.withoutIframe?{type:"div",element:document.createElement("div")}:{type:"iframe",element:document.createElement("iframe")},this.iframe.element.setAttribute("id",`inventory-core-iframe${this.uid}`),this.iframe.element.setAttribute("r",Math.random().toString()),this.iframe.element.classList.add(`inventory-core-iframe_${this.uid}`),"iframe"===this.iframe.type&&(this.iframe.element.setAttribute("frameborder","0"),this.iframe.element.setAttribute("scrolling","no"),this.iframe.element.setAttribute("marginwidth","0px"),this.iframe.element.setAttribute("marginheight","0px"),this.iframe.element.setAttribute("allowfullscreen","1"),this.iframe.element.setAttribute("autoplay","allow")),this.iframeWrapper=null,this.styleElement=document.createElement("style"),this.styleElement.setAttribute("id",`inventory-core-style${this.uid}`),this.styleInner="",this.fromFullScreen&&(this.iframe.element.className=`inventory-fullscreen-banner-container-iframe-${this.uid}`),this.width&&this.height&&(this.styleInner=(0,A.styleIframeEmbed)(this.width,this.height,this.uid),(this.collapse||"flying"===b(this,n,"f").type)&&(this.iframeWrapper=document.createElement("div"),this.iframeWrapper.classList.add(`inventory-core-iframe__wrapper_${this.uid}`),this.iframeWrapper.appendChild(this.iframe.element),this.styleInner+=(0,A.styleIframeWrapperEmbed)(this.width,this.height,this.uid))),this.align&&this.verticalAlign){const t="flying"===b(this,n,"f").type&&b(this,n,"f").sticky&&b(this,n,"f").sticky.height&&b(this,n,"f").sticky.width?{width:b(this,n,"f").sticky.width,height:b(this,n,"f").sticky.height}:void 0;this.styleInner+=(0,A.styleSticky)(this.uid,t),this.iframe.element.classList.add(`inventory-core-iframe__align-${this.align}`),this.iframe.element.classList.add(`inventory-core-iframe__vertical-align-${this.verticalAlign}`),this.align!==this.alignMobile&&this.iframe.element.classList.add(`inventory-core-iframe__align-mobile-${this.alignMobile}`),this.verticalAlign!==this.verticalAlignMobile&&this.iframe.element.classList.add(`inventory-core-iframe__vertical-align-mobile-${this.verticalAlignMobile}`)}this.interfaceType=b(this,n,"f").interfaceType&&(0,E.default)(x.INVENTORY_CORE_INTERFACE_TYPE,b(this,n,"f").interfaceType)?b(this,n,"f").interfaceType:0,"banner"!==b(this,n,"f").type&&(this.iframeWrapper&&this.iframeWrapper.classList.add(`inventory-core-iframe__wrapper__interface-type-${this.interfaceType}`),"div"===this.iframe.type&&this.iframe.element.classList.add(`inventory-core-iframe__interface-type-${this.interfaceType}`))}get forceCoreBaseUrl(){return b(this,n,"f").forceCoreBaseUrl?`&forceCoreBaseUrl=${b(this,n,"f").forceCoreBaseUrl}`:this.queryOriginalObj.forceCoreBaseUrl&&this.queryOriginalObj.forceCoreBaseUrl.length?`&forceCoreBaseUrl=${this.queryOriginalObj.forceCoreBaseUrl[0]}`:""}set showed(t){this._showed=t}get showed(){return this._showed}appendStyle(){this.styleElement.innerHTML=this.styleInner,"flying"!==b(this,n,"f").type||this.collapse||(this.showed=!0,this.iframeWrapper.style.height=`${this.iframeHeight}px`),this.adaptive&&(this.iframe.element.classList.add("adaptive"),this.isMobile&&this.iframe.element.classList.add("adaptive-mobile"),this.adaptiveMobileStickyHeight&&this.iframe.element.style.setProperty("--inventory-core-adaptive-mobile-sticky-height",this.adaptiveMobileStickyHeight),this.iframeWrapper&&this.iframeWrapper.classList.add("adaptive")),document.head.appendChild(this.styleElement)}set iframeHeight(t){y(this,h,t,"f"),!this.showed||this.finished||!this.iframeWrapper||this.nowFlyingSticky&&this.collapse||(this.iframeWrapper.style.height=`${t}px`)}get iframeHeight(){return b(this,h,"f")}get collapse(){return"sticky"!==b(this,n,"f").type&&"overroll"!==b(this,n,"f").type&&("none"!==b(this,n,"f").collapse&&b(this,n,"f").collapse)}get collapsePossible(){return"embed"===b(this,n,"f").type||"flying"===b(this,n,"f").type}get adaptive(){return"banner"!==b(this,n,"f").type&&"overroll"!==b(this,n,"f").type&&!!b(this,n,"f").adaptive}get adaptiveMobileStickyHeight(){var t;if("banner"===b(this,n,"f").type||"overroll"===b(this,n,"f").type||"embed"===b(this,n,"f").type)return!1;if(!b(this,n,"f").adaptive)return!1;const e=CSS.supports("height","25svh")?"svh":"%";return`${(null===(t=b(this,n,"f").mobile)||void 0===t?void 0:t.mobileStickyHeight)||25}${e}`}get infinity(){return"banner"===b(this,n,"f").type?"number"==typeof b(this,n,"f").infinityBannerTimer&&Math.max(b(this,n,"f").infinityBannerTimer,5):!("overroll"===b(this,n,"f").type||!b(this,n,"f").infinity)&&("number"==typeof b(this,n,"f").infinityTimer?b(this,n,"f").infinityTimer:0)}get infinityStopOnClose(){return!("overroll"===b(this,n,"f").type||"banner"===b(this,n,"f").type||!b(this,n,"f").infinity)&&!!b(this,n,"f").infinityStopOnClose}get infinitySkeleton(){return("embed"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&!!b(this,n,"f").infinitySkeleton}get fromFullScreen(){return"banner"===b(this,n,"f").type&&b(this,n,"f").fromFullScreen}get width(){return"overroll"!==b(this,n,"f").type&&("banner"===b(this,n,"f").type&&b(this,n,"f").mobile&&window.innerWidth<=800?b(this,n,"f").mobile.width:b(this,n,"f").width)}get height(){return"overroll"!==b(this,n,"f").type&&("banner"===b(this,n,"f").type&&b(this,n,"f").mobile&&window.innerWidth<=800?b(this,n,"f").mobile.height:b(this,n,"f").height)}get stickyNow(){return"sticky"===b(this,n,"f").type}get align(){return("sticky"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&(b(this,n,"f").align||"right")}get alignMobile(){var t;return("sticky"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&((null===(t=b(this,n,"f").mobile)||void 0===t?void 0:t.align)||this.align)}get verticalAlign(){return("sticky"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&(b(this,n,"f").verticalAlign||"bottom")}get verticalAlignMobile(){var t;return("sticky"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&((null===(t=b(this,n,"f").mobile)||void 0===t?void 0:t.verticalAlign)||this.verticalAlign)}get url(){if(this.specialUrl)return this.specialUrl;let t=`&uid=${b(this,n,"f").uid}&id=${b(this,n,"f").host}&page=${(0,T.default)()}&infinitySkeleton=${this.infinitySkeleton?1:0}`;return this.debug&&(t+="&debug=1"),this.interfaceType&&(t+=`&interfaceType=${this.interfaceType}`),"embed"!==b(this,n,"f").type&&"flying"!==b(this,n,"f").type||"click-to-play"!==b(this,n,"f").playMode||(t+="&clickToPlay=1"),`https://sdk.adlook.tech/main/?inventoryWrapper=1${t}${this.forceCoreBaseUrl}`}get finished(){return b(this,r,"f")}set finished(t){t&&!b(this,r,"f")&&("iframe"===this.iframe.type?this.iframe.element.setAttribute("src",""):this.iframe.element.innerHTML=""),y(this,r,t,"f")}get started(){return b(this,o,"f")}set started(t){y(this,o,t,"f"),t&&(this.postBackFiresHandlerWorker=(0,P.default)({start:()=>{var t;(null===(t=b(this,d,"f"))||void 0===t?void 0:t.start)?b(this,d,"f").start():this.startPostBackFired()},creativeView:()=>{var t;(null===(t=b(this,d,"f"))||void 0===t?void 0:t.creativeView)?b(this,d,"f").creativeView():this.creativeViewPostBackFired()},finish:()=>{var t;(null===(t=b(this,d,"f"))||void 0===t?void 0:t.finish)?b(this,d,"f").finish():this.finishPostBackFired(),this.postBackFiresHandlerWorker&&this.postBackFiresHandlerWorker.postBackFiresRemoveHandler()},skip:()=>{this.skipped=!0},all:t=>{var e;"stop_infinity"===t&&(this.forceStopInfinity=!0),(null===(e=b(this,d,"f"))||void 0===e?void 0:e.all)&&b(this,d,"f").all(t),this.allPostBackFired(t)}},this.uid),y(this,a,!1,"f"),this.count+=1,this.withoutIframe?b(this,s,"m",c).call(this):b(this,s,"m",u).call(this))}initEventToPlayTarget(t){"overroll"!==b(this,n,"f").type&&"event-to-play"===b(this,n,"f").playMode&&setTimeout((()=>{document.addEventListener("click",(()=>{!this.started&&b(this,a,"f")&&t()})),document.addEventListener("scroll",(()=>{!this.started&&b(this,a,"f")&&t()})),document.addEventListener("touchend",(()=>{!this.started&&b(this,a,"f")&&t()}))}),100)}resizeObserverStart(){b(this,l,"f").observe(this.iframe.element)}resizeObserverStop(){b(this,l,"f").unobserve(this.iframe.element)}setDefault(){(this.collapse||"flying"===b(this,n,"f").type)&&this.resizeObserverStart(),this.started=!1,this.showed=!1,this.finished=!1,y(this,a,!0,"f")}iframeClassPlayed(){this.iframe.element.classList.add("played")}iframeClassNotPlayed(){this.iframe.element.classList.remove("played")}startPostBackFired(){this.infinitySkeleton&&this.iframe.element.classList.remove("infinity-skeleton"),this.showed||"open-start"!==this.collapse||(b(this,s,"m",m).call(this),this.showed=!0)}creativeViewPostBackFired(){var t,e;this.showed||"open-creativeView"!==this.collapse||(b(this,s,"m",m).call(this),this.showed=!0),(null===(t=b(this,n,"f").callback)||void 0===t?void 0:t.creativeView)&&(null===(e=b(this,n,"f").callback)||void 0===e||e.creativeView())}finishPostBackFired(t){var e,i;return g(this,void 0,void 0,(function*(){if(!this.finished){if(this.collapse&&"number"!=typeof this.infinity?yield b(this,s,"m",v).call(this):this.iframeClassNotPlayed(),this.infinitySkeleton&&this.iframe.element.classList.add("infinity-skeleton"),(null===(e=b(this,n,"f").callback)||void 0===e?void 0:e.finish)&&(null===(i=b(this,n,"f").callback)||void 0===i||i.finish()),this.finished=!0,this.forceStopInfinity||!t.infinityCallback||"number"!=typeof this.infinity||this.infinityStopOnClose&&this.skipped){try{this.collapsePossible&&!this.collapse||!this.styleElement||document.head.removeChild(this.styleElement)}catch(t){console.log(t)}return void(t.destroyedCallback&&t.destroyedCallback())}this.setDefault(),setTimeout((()=>{t.infinityCallback()}),Math.max(1e3*this.infinity,100))}}))}allPostBackFired(t){var e,i;(null===(e=b(this,n,"f").callback)||void 0===e?void 0:e.all)&&(null===(i=b(this,n,"f").callback)||void 0===i||i.all(t))}destroy(){this.iframe&&this.iframe.element&&this.iframe.element.remove()}}n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,s=new WeakSet,c=function(){new k.default(this.iframe.element,window).initFromCore(Object.assign(Object.assign(Object.assign({uid:b(this,n,"f").uid,id:b(this,n,"f").host,page:(0,T.default)(),infinitySkeleton:this.infinitySkeleton},this.debug&&{debug:!0}),("embed"===b(this,n,"f").type||"flying"===b(this,n,"f").type)&&"click-to-play"===b(this,n,"f").playMode&&{clickToPlay:!0}),{interfaceType:this.interfaceType}))},u=function(){"iframe"===this.iframe.type&&this.iframe.element.setAttribute("src",this.url)},p=function(){this.iframeHeight=this.iframe.element.offsetHeight},f=function(){this.iframeWrapper.classList.add("collapsed"),setTimeout((()=>{this.iframeWrapper.classList.remove("collapsed")}),500)},m=function(){this.iframeClassPlayed(),this.iframeWrapper.style.height=`${this.iframeHeight}px`,b(this,s,"m",f).call(this)},v=function(){return g(this,void 0,void 0,(function*(){this.resizeObserverStop(),b(this,s,"m",f).call(this),this.iframeClassNotPlayed(),this.iframeWrapper.style.removeProperty("height"),yield(0,_.default)(.5)}))},e.default=C},32715:function(t,e,i){var s,n,o,r,a,l,h,d,c=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},u=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},p=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0});const f=i(54177),m=i(57989),v=i(69794),g=i(10622),y=i(96198),b=i(85134),w=i(21684),A=i(79438),k=i(49493);class _ extends f.default{constructor(t){super({options:t,postBackCallbackToTop:{all:t=>{"creativeView"===t&&this.infinity&&setTimeout((()=>{u(this,s,"m",l).call(this)}),1e3*this.infinity)},finish:()=>{u(this,s,"m",d).call(this)}}}),s.add(this),n.set(this,void 0),o.set(this,void 0),p(this,n,t,"f"),p(this,o,document.getElementById(u(this,s,"a",a)),"f"),this.initEventToPlayTarget((()=>{u(this,s,"m",h).call(this)})),u(this,o,"f").appendChild(this.iframeWrapper||this.iframe.element),this.collapse||this.iframe.element.classList.add("played"),this.setDefault(),this.appendStyle(),u(this,s,"m",l).call(this)}}n=new WeakMap,o=new WeakMap,s=new WeakSet,r=function(){return u(this,n,"f").playMode||"autoplay-visible"},a=function(){return u(this,n,"f").container||"ut-banner"},l=function(){return"autoplay"===u(this,s,"a",r)||"autoplay-visible"===u(this,s,"a",r)&&(this.count||(0,y.default)(this.collapse?this.iframeWrapper:this.iframe.element,(t=>{this.visibilityLevel=t,!this.started&&this.visibilityLevel&&u(this,s,"m",h).call(this)})),this.visibilityLevel)?u(this,s,"m",h).call(this):void 0},h=function(){return c(this,void 0,void 0,(function*(){if(u(this,n,"f").proxy){const t=u(this,n,"f").proxy.includes("udsp=1");let e="";if(u(this,n,"f").proxy_data){try{e=window.atob(u(this,n,"f").proxy_data)}catch(t){console.error("Error decoding proxy_data:",t)}(0,w.default)(u(this,n,"f").proxy)}else if(e=yield(0,w.default)(u(this,n,"f").proxy),"number"==typeof e)return void(u(this,n,"f").error&&(yield(0,g.pixelXHRPromise)(u(this,n,"f").error.replace("[ERRORCODE]",e.toString()))));e.includes("<html")||(e=b.default+e),t&&u(this,n,"f").error&&!e.includes("udsp_system_015678")&&(0,g.default)(u(this,n,"f").error.replace("[ERRORCODE]","809"));const i=e.includes("ussp_system_015678");if(i&&u(this,n,"f").imp){e+='<script type="text/javascript">window.parent.postMessage("ussp_system_015678_ready","*");<\/script>';let t=!1;const i=e=>{"ussp_system_015678_ready"!==e.data||t||(console.log("imp ussp_system_015678"),(0,g.default)(u(this,n,"f").imp),t=!0),window.removeEventListener("message",i)};window.addEventListener("message",i)}if(u(this,o,"f").style.position="absolute",u(this,o,"f").style.width="100%",u(this,o,"f").style.height="100%",u(this,o,"f").style.left="0px",u(this,o,"f").style.top="0px",this.iframe.element.style.width="100%",this.iframe.element.style.height="100%",u(this,n,"f").campaign){const t=(0,k.default)(u(this,n,"f").campaign);u(this,o,"f").appendChild(t)}"iframe"===this.iframe.type&&(this.iframe.element.setAttribute("marginwidth","0px"),this.iframe.element.setAttribute("marginheight","0px"),this.iframe.element.setAttribute("scrolling","no"),this.iframe.element.contentWindow.document.open(),this.iframe.element.contentWindow.document.write(e),this.iframe.element.contentWindow.document.close()),u(this,n,"f").imp&&!i&&(console.log("imp regular"),(0,g.default)(u(this,n,"f").imp)),u(this,n,"f").second2&&(0,v.default)(u(this,n,"f").second2,document.body),u(this,n,"f").error&&(0,m.default)(u(this,n,"f").error.replace("[ERRORCODE]","99"));const s=window.location.href,r=new URLSearchParams(s).get("uid");window.parent.postMessage({prefix:this.prefixExternal,uid:r||"setup-uid",message:"proxy-ready"},"*")}else this.specialUrl=`https://sdk.adlook.tech/b/?host=${u(this,n,"f").host}&uid=${this.uid}&width=${this.width}&height=${this.height}${this.forceCoreBaseUrl}&page=${(0,A.default)()}${u(this,n,"f").fromFullScreen?"&fromFullScreen=1":""}${u(this,n,"f").transparentSkeleton?"&transparentSkeleton=1":""}${u(this,n,"f").campaign?`&campaignWatermark=${u(this,n,"f").campaign}`:""}`,this.started=!0}))},d=function(){this.finishPostBackFired({infinityCallback:()=>{u(this,s,"m",h).call(this)},destroyedCallback:()=>{this.collapse&&u(this,o,"f").removeChild(this.iframeWrapper||this.iframe.element)}})},e.default=_},83632:function(t,e,i){var s,n,o,r,a,l,h,d,c=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},u=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0});const p=i(54177),f=i(96198);class m extends p.default{constructor(t){super({options:t,postBackCallbackToTop:{finish:()=>{c(this,s,"m",d).call(this)}}}),s.add(this),n.set(this,void 0),o.set(this,void 0),u(this,n,t,"f"),u(this,o,document.getElementById(c(this,s,"a",a)),"f"),c(this,o,"f")?(this.initEventToPlayTarget((()=>{c(this,s,"m",h).call(this)})),c(this,o,"f").appendChild(this.iframeWrapper||this.iframe.element),this.collapse||this.iframeClassPlayed(),this.setDefault(),this.appendStyle(),c(this,s,"m",l).call(this)):console.error(`options.container '${c(this,s,"a",a)}' not found`)}playFromParentPage(){"js-to-play"!==c(this,s,"a",r)||this.count||this.started||c(this,s,"m",h).call(this)}}n=new WeakMap,o=new WeakMap,s=new WeakSet,r=function(){return c(this,n,"f").playMode||"autoplay-visible"},a=function(){return c(this,n,"f").container||"ut-embed"},l=function(){return"autoplay"===c(this,s,"a",r)||"click-to-play"===c(this,s,"a",r)||"autoplay-visible"===c(this,s,"a",r)&&(this.count||(0,f.default)(this.collapse?this.iframeWrapper:this.iframe.element,(t=>{this.visibilityLevel=t,!this.started&&this.visibilityLevel&&c(this,s,"m",h).call(this)})),this.visibilityLevel)?c(this,s,"m",h).call(this):void 0},h=function(){this.started=!0},d=function(){this.finishPostBackFired({infinityCallback:()=>{c(this,s,"m",l).call(this)},destroyedCallback:()=>{this.collapse&&c(this,o,"f").removeChild(this.iframeWrapper||this.iframe.element)}})},e.default=m},87621:function(t,e,i){var s,n,o,r,a,l,h,d,c,u=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},p=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0});const f=i(54177),m=i(96198);class v extends f.default{constructor(t,e){super({options:t,postBackCallbackToTop:{finish:()=>{u(this,s,"m",c).call(this)},all:t=>{if("black-screen"===t)return this.blackScreen=!0,void this.iframe.element.classList.add("on-top");this.blackScreen||("creativeView"===t?this.iframe.element.classList.add("on-top"):"complete"===t&&this.iframe.element.classList.remove("on-top"))}}},e),s.add(this),n.set(this,void 0),o.set(this,void 0),p(this,n,t,"f"),p(this,o,document.getElementById(u(this,s,"a",r)),"f"),u(this,o,"f")?(this.initEventToPlayTarget((()=>{u(this,s,"m",d).call(this)})),u(this,o,"f").appendChild(this.iframeWrapper||this.iframe.element),this.setDefault(),u(this,s,"m",h).call(this)):console.error(`options.container '${u(this,s,"a",r)}' not found`)}playFromParentPage(){"js-to-play"!==u(this,s,"a",a)||this.count||this.started||u(this,s,"m",d).call(this)}}n=new WeakMap,o=new WeakMap,s=new WeakSet,r=function(){return u(this,n,"f").container||"ut-flying"},a=function(){return u(this,n,"f").playMode||"autoplay-visible"},l=function(t){this.nowFlyingSticky="add"===t,this.iframe.element.classList[t]("sticky")},h=function(){return this.count||(0,m.default)(this.iframeWrapper,(t=>{this.visibilityLevel>=5&&t<5&&this.started&&u(this,s,"m",l).call(this,"add"),this.visibilityLevel<15&&t>=15&&this.started&&u(this,s,"m",l).call(this,"remove"),this.visibilityLevel=t,!this.started&&this.visibilityLevel&&"autoplay-visible"===u(this,s,"a",a)&&u(this,s,"m",d).call(this)})),"autoplay"===u(this,s,"a",a)||"click-to-play"===u(this,s,"a",a)||"autoplay-visible"===u(this,s,"a",a)&&this.visibilityLevel?u(this,s,"m",d).call(this):void 0},d=function(){this.appendStyle(),u(this,s,"m",l).call(this,this.visibilityLevel<5?"add":"remove"),this.iframeClassPlayed(),this.started=!0},c=function(){u(this,s,"m",l).call(this,"remove"),this.finishPostBackFired({infinityCallback:()=>{u(this,s,"m",h).call(this)},destroyedCallback:()=>{this.collapse&&u(this,o,"f").removeChild(this.iframeWrapper||this.iframe.element)}})},e.default=v},52606:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},w=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},A=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const k=i(94706),_=i(18146),T=i(7316);n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,s=new WeakSet,p=function(){return A(this,n,"f").fullscreenTimeout||10},f=function(){let t="";return t=A(this,u,"f")%10==1&&A(this,u,"f")%100!=11?"секунду":[2,3,4].includes(A(this,u,"f")%10)&&![12,13,14].includes(A(this,u,"f")%100)?"секунды":"секунд",`Реклама будет закрыта через ${A(this,u,"f")} ${t}`},m=function t(){return b(this,void 0,void 0,(function*(){A(this,u,"f")?(A(this,d,"f").innerHTML=A(this,s,"m",f).call(this),yield(0,T.default)(1),w(this,u,A(this,u,"f")-1,"f"),A(this,s,"m",t).call(this)):A(this,s,"m",g).call(this)}))},v=function(){A(this,h,"f").classList.add("show"),A(this,s,"m",m).call(this)},g=function(){console.log("InventoryCoreBannerFullScreen destroy"),A(this,h,"f").remove(),A(this,l,"f").remove()},y=function(){console.log("InventoryCoreBannerFullScreen init",A(this,n,"f")),console.log("viewport",A(this,o,"f"),A(this,r,"f"));const t=A(this,o,"f")-20,e=A(this,r,"f")-70;console.log("widthContainer",t),console.log("heightContainer",e),w(this,u,A(this,s,"a",p),"f"),A(this,l,"f").innerHTML=(0,_.styleFullScreenBanner)(A(this,n,"f").uid),A(this,h,"f").classList.add(`inventory-fullscreen-banner-overlay_${A(this,n,"f").uid}`),A(this,d,"f").classList.add(`inventory-fullscreen-banner-counter_${A(this,n,"f").uid}`),A(this,d,"f").innerHTML=`${A(this,s,"a",p)}`,A(this,h,"f").appendChild(A(this,d,"f")),A(this,h,"f").appendChild(A(this,c,"f")),A(this,a,"f").appendChild(A(this,l,"f")),A(this,a,"f").appendChild(A(this,h,"f")),new k.default({type:"banner",host:A(this,n,"f").host,uid:`${A(this,n,"f").uid}--fullscreen`,playMode:"autoplay",container:`inventory-fullscreen-banner-container-${A(this,n,"f").uid}`,width:t,height:e,fromFullScreen:!0,collapse:"none",callback:{creativeView:()=>{A(this,s,"m",v).call(this)},all:t=>{"finish"===t&&A(this,s,"m",g).call(this)}}})},e.default=class{constructor(t){s.add(this),n.set(this,void 0),o.set(this,window.innerWidth),r.set(this,window.innerHeight),a.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),c.set(this,void 0),u.set(this,0),w(this,n,t,"f"),A(this,n,"f").fullscreen?(w(this,a,document.getElementsByTagName("body")[0],"f"),w(this,l,document.createElement("style"),"f"),w(this,h,document.createElement("div"),"f"),w(this,d,document.createElement("div"),"f"),w(this,c,document.createElement("div"),"f"),A(this,c,"f").id=`inventory-fullscreen-banner-container-${A(this,n,"f").uid}`,A(this,s,"m",y).call(this)):console.error("fullscreen is not enabled")}}},43544:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},f=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0});const m=i(18146),v=i(54177),g=i(96198);class y extends v.default{constructor(t){super({options:t,postBackCallbackToTop:{finish:()=>{p(this,s,"m",u).call(this)}}}),s.add(this),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),a.set(this,void 0),f(this,n,t,"f"),f(this,a,null,"f"),f(this,o,document.getElementById(p(this,s,"a",l)),"f"),p(this,o,"f")?(this.setDefault(),"click-to-play"===p(this,s,"a",h)&&(this.iframe.element.classList.add("visually-hidden"),f(this,r,document.createElement("button"),"f"),p(this,r,"f").classList.add("inventory-core-button"),f(this,a,p(this,o,"f").firstElementChild,"f"),p(this,a,"f")?(p(this,o,"f").insertBefore(p(this,r,"f"),p(this,a,"f")),p(this,a,"f").setAttribute("tabindex","-1")):p(this,o,"f").appendChild(p(this,r,"f"))),p(this,o,"f").appendChild(this.iframe.element),this.styleInner+=(0,m.styleOverroll)(p(this,s,"a",l),this.uid),this.appendStyle(),p(this,s,"m",d).call(this)):console.error(`options.container '${p(this,s,"a",l)}' not found`)}}n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakSet,l=function(){return p(this,n,"f").container||"ut-overroll"},h=function(){return p(this,n,"f").playMode||"click-to-play"},d=function(){if("autoplay"===p(this,s,"a",h))return p(this,s,"m",c).call(this);"autoplay-visible"!==p(this,s,"a",h)?p(this,r,"f")&&p(this,r,"f").addEventListener("click",(t=>{p(this,o,"f").removeChild(p(this,r,"f")),this.iframe.element.classList.remove("visually-hidden"),p(this,a,"f")&&p(this,a,"f").removeAttribute("tabindex"),p(this,s,"m",c).call(this),t.stopPropagation()})):(0,g.default)(p(this,o,"f"),(t=>{this.visibilityLevel=t,!this.started&&this.visibilityLevel&&p(this,s,"m",c).call(this)}))},c=function(){this.started=!0},u=function(){this.finishPostBackFired({destroyedCallback:()=>{p(this,o,"f").removeChild(this.iframe.element)}})},e.default=y},92750:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b,w,A=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},k=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0});const _=i(18146),T=i(54177);class E extends T.default{constructor(t,e){super({options:t,postBackCallbackToTop:{start:()=>{A(this,s,"m",y).call(this)},creativeView:()=>{A(this,s,"m",b).call(this)},finish:()=>{A(this,s,"m",w).call(this)},all:t=>{if("black-screen"===t)return this.blackScreen=!0,void this.iframe.element.classList.add("on-top");this.blackScreen||("creativeView"===t?this.iframe.element.classList.add("on-top"):"complete"===t&&this.iframe.element.classList.remove("on-top"))}}},e),s.add(this),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),k(this,n,t,"f"),k(this,r,null,"f"),this.initEventToPlayTarget((()=>{A(this,s,"m",f).call(this)})),this.iframe.element.classList.add("sticky"),this.body.appendChild(this.iframe.element),k(this,o,A(this,s,"a",c)?document.createElement("div"):null,"f"),A(this,o,"f")&&(A(this,o,"f").setAttribute("id",`inventory-core-overlay${this.uid}`),A(this,o,"f").classList.add("inventory-core-overlay"),A(this,s,"a",h)&&A(this,o,"f").classList.add("inventory-core-overlay__desktop"),void 0!==A(this,s,"a",d)?A(this,s,"a",d)&&A(this,o,"f").classList.add("inventory-core-overlay__mobile"):A(this,s,"a",h)&&A(this,o,"f").classList.add("inventory-core-overlay__mobile"),this.styleInner+=(0,_.styleOverlay)(this.uid),this.body.appendChild(A(this,o,"f"))),this.appendStyle(),A(this,s,"m",p).call(this)}playFromParentPage(){"js-to-play"!==A(this,s,"a",a)||this.count||this.started||A(this,s,"m",f).call(this)}}n=new WeakMap,o=new WeakMap,r=new WeakMap,s=new WeakSet,a=function(){return A(this,n,"f").playMode||"autoplay"},l=function(){return A(this,n,"f").openTo||"open-creativeView"},h=function(){return!!A(this,n,"f").overlay},d=function(){return void 0!==A(this,n,"f").mobile&&void 0!==A(this,n,"f").mobile.overlay?!!A(this,n,"f").mobile.overlay:void 0},c=function(){return A(this,s,"a",h)||A(this,s,"a",d)},u=function(){return"sticky"===A(this,n,"f").type&&(window.innerWidth>1e3||void 0===A(this,s,"a",d)?A(this,s,"a",h):A(this,s,"a",d))},p=function(){if("autoplay"===A(this,s,"a",a))return A(this,s,"m",f).call(this)},f=function(){this.started=!0},m=function(){k(this,r,window.pageYOffset,"f"),this.body.style.top=`-${A(this,r,"f")}px`},v=function(){this.body.style.removeProperty("top"),null!==A(this,r,"f")&&window.scrollTo(0,A(this,r,"f"))},g=function(){A(this,s,"a",u)&&A(this,s,"m",m).call(this),this.iframeClassPlayed(),this.showed=!0},y=function(){"open-start"===A(this,s,"a",l)&&A(this,s,"m",g).call(this)},b=function(){"open-creativeView"===A(this,s,"a",l)&&A(this,s,"m",g).call(this),this.creativeViewPostBackFired()},w=function(){this.finished||(this.iframe.element.classList.remove("played"),A(this,s,"a",u)&&A(this,s,"m",v).call(this),this.finishPostBackFired({infinityCallback:()=>{A(this,s,"m",p).call(this)},destroyedCallback:()=>{this.iframe.element.remove(),A(this,o,"f")&&A(this,o,"f").remove(),delete this.iframe}}))},e.default=E},98618:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b,w,A,k,_,T,E,P,S,x,C,M,$,V,I,O,D,L,B,F,R,N,W,j,U,H,z,q,Q,Y,G,X,K,Z,J,tt,et=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},it=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},st=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const nt=i(53073),ot=i(14522),rt=i(36879),at=i(9512),lt=i(65481),ht=i(81419),dt=i(91020),ct=i(7316),ut=i(23987),pt=i(81921),ft=i(29854),mt=i(17541),vt=i(65647),gt=i(28746),yt=i(83859),bt=i(62024),wt=i(69002),At=i(96198),kt=i(3486),_t=i(2251);customElements.define("un-player-interface",ot.default);class Tt extends nt.default{constructor(t,e,i=!1){super(),s.add(this),n.set(this,void 0),o.set(this,!1),r.set(this,void 0),a.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),c.set(this,void 0),u.set(this,void 0),p.set(this,void 0),f.set(this,void 0),m.set(this,void 0),v.set(this,0),g.set(this,void 0),y.set(this,void 0),b.set(this,void 0),w.set(this,["sdk.adlook.tech"]),A.set(this,!1),k.set(this,null),_.set(this,void 0),T.set(this,!1),E.set(this,!1),P.set(this,!1),S.set(this,!1),x.set(this,0),C.set(this,0),M.set(this,!1),$.set(this,void 0),this.debugStyle="padding: 5px; padding-right: 10px; background-color: SeaShell; border-radius: 2px; border: 1px dotted grey; font-size: 12px;",this.debugTitle="%c SDK PlayerFrameIniter",console.log("!SIZE!",document.documentElement.clientWidth,document.documentElement.clientHeight),this.emitter=new ht.default;const V=(0,mt.default)(t);if(!V)return console.error("Container not found"),void console.error(t);it(this,n,V,"f"),it(this,r,i,"f"),st(this,r,"f")||(st(this,n,"f").innerHTML=""),it(this,E,st(this,r,"f"),"f"),it(this,a,!1,"f");const I=this.queryOriginalObj.inventoryWrapper&&"1"===this.queryOriginalObj.inventoryWrapper[0];if(it(this,l,{hostId:this.queryOriginalObj.id&&this.queryOriginalObj.id[0]||null,vId:null,inventoryWrapper:I,infinitySkeleton:I&&this.queryOriginalObj.infinitySkeleton&&"1"===this.queryOriginalObj.infinitySkeleton[0],clickToPlay:this.queryOriginalObj.clickToPlay&&"1"===this.queryOriginalObj.clickToPlay[0],page:this.queryOriginalObj.page&&this.queryOriginalObj.page[0],uid:this.queryOriginalObj.uid?this.queryOriginalObj.uid[0]:"default-uid"},"f"),this.queryOriginalObj.interfaceType){const t=Number(this.queryOriginalObj.interfaceType[0]);t&&(0,yt.default)(kt.INVENTORY_CORE_INTERFACE_TYPE,t)&&it(this,v,t,"f")}it(this,h,this.dev&&this.queryOriginalObj.fakeOrigin?this.queryOriginalObj.fakeOrigin:(0,gt.getOrigins)(),"f"),it(this,d,this.dev&&this.queryOriginalObj.fakeOrigin?this.queryOriginalObj.fakeOrigin[0]:(0,gt.getOrigin)(),"f"),it(this,c,null,"f"),it(this,u,e||window,"f"),it(this,p,[],"f"),it(this,f,0,"f"),it(this,m,st(this,u,"f").document.createElement("un-player-interface"),"f"),document.addEventListener("from-un-player-interface",(t=>{const{detail:e}=t;if("skip_available"===e){if(st(this,M,"f"))return;return it(this,M,!0,"f"),void st(this,s,"m",q).call(this,"skip_available")}const i={message:e};st(this,s,"m",Y).call(this,i)})),it(this,g,{isVisibilityCheckEnabled:!1,isSmallFrameAllowed:!1,ctx:"",ctxType:1,nolabel:!1,countdown:30,noCountdown:!1,ab:!1,maxPrerolls:0,toQuery:{isPartnerVPAID:Number(st(this,r,"f")),autoPlay:!this.queryOriginalObj.noautoplay||this.queryOriginalObj.noautoplay&&"1"!==this.queryOriginalObj.noautoplay[0],clickToPlay:st(this,l,"f").clickToPlay,volume:0}},"f"),it(this,y,0,"f"),it(this,b,[],"f"),this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"Initialization"),console.log("%corigins",this.debugStyleAddLabel,st(this,h,"f")),console.log("%corigin",this.debugStyleAddLabel,st(this,d,"f")),console.log("%cwindow.location.href",this.debugStyleAddLabel,window.location.href),console.log("%cancestorOrigins",this.debugStyleAddLabel,window.location.ancestorOrigins),console.log("%cis dev",this.debugStyleAddLabel,!1),console.log("%cqueryOriginalObj:",this.debugStyleAddLabel,this.queryOriginalObj),console.log("%cthis.query",this.debugStyleAddLabel,st(this,l,"f")),console.log("%cthis.#vpaidAcceptOrigin",st(this,w,"f")),console.groupEnd()}))}init(t){this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"init()"),console.log("%conFrameLoadedCallback",this.debugStyleAddLabel,t),console.groupEnd()})),t&&it(this,c,t,"f"),st(this,u,"f").addEventListener("message",(t=>{st(this,a,"f")||st(this,w,"f").some((e=>-1!==t.origin.indexOf(e)))&&"object"==typeof t.data&&t.data.prefix===this.prefixPlayerIniter&&t.data.uid===st(this,l,"f").uid&&"string"==typeof t.data.message&&this.postMessageHandler(t.data)})),st(this,k,"f")?st(this,s,"m",B).call(this):st(this,s,"m",F).call(this)}postMessageHandler(t){this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / message from PlayerIniter 23`,this.debugStyle,t.message),console.log(t),console.groupEnd()}));let{message:e,addData:i}=t,n=0;if("adLoaded"===e)return void(st(this,A,"f")?this.fromPartnerVPAIDStartAd():st(this,s,"m",q).call(this,"adLoaded"));if("click"===e&&st(this,s,"m",Q).call(this,!1),"creativeView"===e&&(st(this,m,"f").setAttribute("play","1"),st(this,s,"m",Q).call(this,!0),!st(this,E,"f")&&st(this,S,"f")&&st(this,m,"f").setAttribute("hide-all","0")),st(this,E,"f")||"billing"!==e||(it(this,S,!0,"f"),st(this,m,"f").setAttribute("hide-all","0")),"pause"===e&&st(this,m,"f").setAttribute("play","0"),"skip"===e)return st(this,s,"m",q).call(this,"skip"),st(this,r,"f")||st(this,s,"m",q).call(this,"finish"),void st(this,s,"m",Z).call(this);if("complete"===e&&(st(this,E,"f")||st(this,m,"f").setAttribute("hide-all","1"),st(this,s,"m",Q).call(this,!1),it(this,y,st(this,y,"f")+1,"f"),st(this,g,"f").maxPrerolls&&st(this,y,"f")>=st(this,g,"f").maxPrerolls&&(e="finish")),"finish"===e){st(this,s,"m",Q).call(this,!1),"number"==typeof i&&it(this,f,i,"f");st(this,f,"f")===st(this,p,"f").length-1||st(this,g,"f").maxPrerolls&&st(this,y,"f")>=st(this,g,"f").maxPrerolls?(st(this,r,"f")&&st(this,s,"m",q).call(this,"vpaidRealFinish"),n=400,it(this,a,!0,"f")):(console.log("Destroy frame 1",st(this,f,"f")),st(this,s,"m",Z).call(this,st(this,f,"f")),e="needMainSetting",i=st(this,f,"f")+1)}if("needMainSetting"===e)return it(this,f,Number(i),"f"),void st(this,s,"m",G).call(this);if("finish"===e)return st(this,s,"m",X).call(this,"handler",n);const o=st(this,r,"f")||"billing"!==e?e:"show";o&&st(this,s,"m",q).call(this,o)}initFromCore({uid:t,id:e,page:i,infinitySkeleton:s,debug:n,clickToPlay:r,interfaceType:a}){it(this,o,!0,"f"),st(this,l,"f").inventoryWrapper=!0,st(this,l,"f").uid=t,st(this,l,"f").hostId=e,st(this,l,"f").page=i,st(this,l,"f").infinitySkeleton=s,this.debug=!!n,st(this,l,"f").clickToPlay=r,st(this,g,"f").toQuery.clickToPlay=r,it(this,v,a,"f"),this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"initFromCore"),console.log("%cquery",this.debugStyleAddLabel,st(this,l,"f")),console.groupEnd()})),this.init()}initFromVPAIDPartner({debug:t,vastFromPartnerVpaid:e,vastFromPartnerVpaidUriVariables:i,vId:n,origins:o,origin:r,onFrameLoadedCallback:a,width:c,height:u,addErrorFromSdk:p}){if(this.debug=!!t,st(this,l,"f").uid=(0,ft.default)(10),it(this,$,p,"f"),"number"==typeof c&&it(this,x,c,"f"),"number"==typeof u&&it(this,C,u,"f"),e)try{it(this,k,window.atob(e),"f"),this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"vastFromPartnerVpaid"),console.log("%vastFromPartnerVpaid",st(this,k,"f")),console.groupEnd()})),i&&it(this,_,i,"f")}catch(t){return console.log(t),st(this,s,"m",J).call(this,"Failed decode vastFromPartnerVpaid")}"string"==typeof n?st(this,l,"f").vId=n:"number"==typeof n&&(st(this,l,"f").hostId=n),it(this,h,o,"f"),it(this,d,r,"f"),this.init(a)}fromPartnerVPAIDStartAd(){it(this,A,!0,"f");st(this,s,"m",Y).call(this,{message:"startAd"})}fromPartnerVPAIDDestroyFrame(){return et(this,void 0,void 0,(function*(){return st(this,s,"m",Z).call(this)}))}fromPartnerVPAIDSkipAd(){if(st(this,r,"f")&&st(this,s,"a",tt)){const t={message:"makeSkip"};st(this,s,"m",Y).call(this,t)}}fromPartnerVPAIDNewVolume(t){if(this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"fromPartnerVPAIDNewVolume"),console.log("newValue",this.debugStyleAddLabel,t),console.log("checkFrameActive",this.debugStyleAddLabel,st(this,s,"a",tt)),console.groupEnd()})),st(this,r,"f")&&st(this,s,"a",tt)){st(this,g,"f").toQuery.volume=t;const e={message:"setVolume",value:t};st(this,s,"m",Y).call(this,e)}}fromPartnerVPAIDPauseAd(){if(this.debugMessage((()=>{console.log(this.debugTitle,this.debugStyle,"fromPartnerVPAIDPauseAd")})),st(this,r,"f")&&st(this,s,"a",tt)){const t={message:"makePause"};st(this,s,"m",Y).call(this,t)}}fromPartnerVPAIDResumeAd(){if(this.debugMessage((()=>{console.log(this.debugTitle,this.debugStyle,"fromPartnerVPAIDResumeAd")})),st(this,r,"f")&&st(this,s,"a",tt)){const t={message:"makeResume"};st(this,s,"m",Y).call(this,t)}}}n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,A=new WeakMap,k=new WeakMap,_=new WeakMap,T=new WeakMap,E=new WeakMap,P=new WeakMap,S=new WeakMap,x=new WeakMap,C=new WeakMap,M=new WeakMap,$=new WeakMap,s=new WeakSet,V=function(){const t=(0,ut.default)(Object.assign(Object.assign(Object.assign(Object.assign({},st(this,l,"f").hostId&&{id:st(this,l,"f").hostId}),st(this,l,"f").vId&&{vid:st(this,l,"f").vId}),!1),{origin:window.encodeURIComponent(st(this,d,"f")),origins:(0,pt.default)(st(this,h,"f")),width:st(this,x,"f")||document.documentElement.clientWidth||document.body.clientWidth,height:st(this,C,"f")||document.documentElement.clientHeight||document.body.clientHeight}));return`${this.coreBaseUrl}/ctx?${t}`},I=function(){let t="";return st(this,l,"f").hostId&&(t+=`&utm_source=${st(this,l,"f").hostId}`),st(this,d,"f")&&(t+=`&utm_medium=${st(this,d,"f")}`),t},O=function(){if(!st(this,b,"f").length)return!1;return Object.assign(Object.assign({vast:`<VAST version="3.0">${st(this,b,"f")[st(this,f,"f")].ad.map((t=>t.vast)).join("")}</VAST>`,clickToPlay:st(this,g,"f").toQuery.clickToPlay,autoPlay:st(this,g,"f").toQuery.autoPlay,volume:st(this,g,"f").toQuery.volume,ab:st(this,g,"f").ab,blackScreen:st(this,E,"f"),watermark:st(this,P,"f")},st(this,k,"f")&&{defaultBillingEvent:"Impression"}),{origins:st(this,h,"f"),vastFromPartnerVpaidUriVariables:st(this,_,"f"),addErrorFromSdk:st(this,$,"f")})},D=function(){let t=`${this.coreBaseUrl}/vast?`;return t+=`${1===st(this,g,"f").ctxType?"ctx":"ctx_v2"}=${st(this,g,"f").ctx}`,t+="&nocredentials=1",t+=`&od=${(0,vt.default)(st(this,n,"f"))}`,st(this,l,"f").page&&(t+=`&p=${encodeURIComponent(st(this,l,"f").page)}`),st(this,g,"f").isSmallFrameAllowed&&(t+="&sf=1"),t},L=function(){return st(this,p,"f")[st(this,f,"f")]},B=function(){return et(this,void 0,void 0,(function*(){st(this,g,"f").isSmallFrameAllowed=!0,st(this,g,"f").isVisibilityCheckEnabled=!1,st(this,g,"f").nolabel=!0,st(this,g,"f").noCountdown=!0;if(!(yield st(this,s,"m",W).call(this)))return st(this,s,"m",J).call(this,"VAST parsing error (Empty or Broken VAST)");st(this,s,"m",R).call(this)}))},F=function(){return st(this,d,"f")?st(this,l,"f").hostId||st(this,l,"f").vId?void(0,wt.default)(st(this,s,"a",V),"get").then((t=>et(this,void 0,void 0,(function*(){const e=JSON.parse(t);if(it(this,P,!!e.watermark,"f"),it(this,E,st(this,r,"f")||!!e.bs,"f"),st(this,E,"f")?st(this,m,"f").setAttribute("hide-all","0"):(st(this,m,"f").setAttribute("hide-all","1"),st(this,l,"f").infinitySkeleton&&st(this,m,"f").setAttribute("infinity-skeleton","1")),e.ctx?(st(this,g,"f").ctx=e.ctx,st(this,g,"f").ctxType=1):e.ctx_v2&&(st(this,g,"f").ctx=e.ctx_v2,st(this,g,"f").ctxType=2),st(this,g,"f").isSmallFrameAllowed=!e.sf,st(this,g,"f").isVisibilityCheckEnabled=!!e.cv,st(this,g,"f").nolabel=e.nolabel||!1,st(this,g,"f").countdown=e.cd,void 0!==e.ab&&(st(this,g,"f").ab=!!e.ab),void 0!==e.ac&&it(this,T,!!e.ac,"f"),st(this,g,"f").noCountdown=!st(this,g,"f").countdown||e.nocd,e.max_prerolls&&(st(this,g,"f").maxPrerolls=e.max_prerolls),st(this,r,"f")||(st(this,g,"f").toQuery.volume=e.vl),e.pxs&&(0,bt.default)(e.pxs),e.px){new dt.default(st(this,u,"f")).init(e.px,e.ref)}e.ws&&st(this,s,"m",K).call(this),this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"CTX"),console.log("%curl",this.debugStyleAddLabel,st(this,s,"a",V)),console.log("%cresponse",this.debugStyleAddLabel,e),console.groupEnd()}));if((yield st(this,s,"m",W).call(this))||st(this,s,"m",J).call(this,"VAST parsing error (Empty or Broken VAST)"),st(this,l,"f").inventoryWrapper)return st(this,s,"m",H).call(this);st(this,s,"m",R).call(this)})))).catch((t=>{console.error("CTX request error",t),!st(this,r,"f")&&[204,400,403].includes(t)&&st(this,s,"m",q).call(this,"stop_infinity"),st(this,s,"m",J).call(this,"CTX request/parsing error")})):st(this,s,"m",J).call(this,"Empty hostId and vId"):st(this,s,"m",J).call(this,"Empty origin")},R=function(){return et(this,void 0,void 0,(function*(){let t=!1;const e=(0,lt.default)(st(this,u,"f"));new Promise((e=>{Object.prototype.hasOwnProperty.call(st(this,u,"f"),"IntersectionObserver")||(t=!1,e(!0)),st(this,g,"f").isVisibilityCheckEnabled||e(!0),(0,At.default)(st(this,n,"f"),(i=>{t=i>=50,t&&e(!0)}))})).then((()=>{let i=!0;st(this,g,"f").isVisibilityCheckEnabled&&!t&&(i=!1),e||st(this,g,"f").isSmallFrameAllowed||(i=!1,(0,bt.default)(`${this.coreBaseUrl}/fin?ctx=${st(this,g,"f").ctx}&sf=1`),(0,ct.default)(250).then((()=>{st(this,s,"m",q).call(this,"finish")}))),i&&st(this,s,"m",H).call(this)}))}))},N=function(){return et(this,void 0,void 0,(function*(){return yield(0,wt.default)(st(this,s,"a",D),"get",{"Content-type":"application/json; charset=utf-8"})}))},W=function(){return et(this,void 0,void 0,(function*(){let t;this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"VAST"),console.log("%curl",this.debugStyleAddLabel,st(this,s,"a",D))}));try{const e=st(this,k,"f")?st(this,k,"f"):yield st(this,s,"m",N).call(this),i=(new DOMParser).parseFromString(e,"application/xml");if(t=i.querySelectorAll("Ad"),!t.length)return st(this,s,"m",X).call(this,"parser"),this.debugMessage((()=>{console.groupEnd()})),!1}catch(t){return this.debugMessage((()=>{console.groupEnd()})),!1}return this.debugMessage((()=>{console.log("%c block",this.debugStyleAddLabel,t)})),t.forEach((t=>{const e=Number(t.getAttribute("id")),i=t.querySelector("Extension[domain]"),n=i&&i.getAttribute("priority")?i.getAttribute("priority"):"1",o=!(!i||!i.getAttribute("domain"))&&i.getAttribute("domain");if(this.debugMessage((()=>{console.log("domain!!",o)})),n){const i=!!o&&(this.dev&&["watchfeed.tv"].includes(o)?`//dev.${o}`:`//${o}`),r=st(this,s,"m",j).call(this,i);let a=t.outerHTML;const l=a.match(/<AdParameters[^>]*>[\s\S]*?<\/AdParameters>/i);let h="";l&&(h=l[0],a=a.replace(l[0],"___AdParameters___")),a=a.replace(/\n/g,"").replace(/\t/g,"").replace(/"/g,"'"),l&&(a=a.replace("___AdParameters___",h)),r.ad.push({priority:Number(n),vast:a,id:e})}else console.log("Error: adBlock extension empty")})),st(this,b,"f").sort(((t,e)=>t.ad[0].priority-e.ad[0].priority)),!this.dev||this.queryOriginalObj.stopChangeDomain||"localhost:8080"!==document.location.host&&"localhost:3000"!==document.location.host||it(this,b,st(this,b,"f").map((t=>Object.assign(Object.assign({},t),{domain:!!t.domain&&"//localhost:8080"}))),"f"),this.debugMessage((()=>{console.log("%c arrayVastToPlayer",this.debugStyleAddLabel,st(this,b,"f")),console.groupEnd()})),!!st(this,b,"f").length}))},j=function(t){const e=st(this,b,"f").find((e=>e.domain===t));if(e)return e;const i={domain:t,ad:[]};return st(this,b,"f").push(i),i},U=function(t,e){if(t)return{type:"frame",element:st(this,u,"f").document.createElement("iframe")};const i=st(this,u,"f").document.createElement("div");return{type:"class",element:i,class:new rt.default(i,{index:e,isPartnerVPAID:st(this,r,"f"),uid:st(this,l,"f").uid})}},H=function(){const t=st(this,u,"f").document.createElement("div");if(t.setAttribute("id","slot-interface"),st(this,m,"f").appendChild(t),st(this,m,"f").setAttribute("countdown",st(this,g,"f").countdown.toString()),st(this,m,"f").setAttribute("click-to-play",st(this,l,"f").clickToPlay?"1":"0"),st(this,m,"f").setAttribute("hide-countdown",st(this,g,"f").noCountdown?"1":"0"),st(this,m,"f").setAttribute("hide-label",st(this,g,"f").nolabel?"1":"0"),st(this,v,"f")&&st(this,o,"f")){st(this,m,"f").setAttribute("interface-type",st(this,v,"f").toString());const t=document.getElementById(`inventory-core-iframe${st(this,l,"f").uid}`);console.log("target",t);new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"class"===e.attributeName){const e=t.classList.contains("sticky");st(this,m,"f").setAttribute("now-sticky",e?"1":"0")}}))})).observe(t,{attributes:!0,attributeFilter:["class"]})}st(this,E,"f")&&st(this,m,"f").classList.add("black-screen"),st(this,n,"f").appendChild(st(this,m,"f")),st(this,b,"f").forEach(((e,i)=>{const n=st(this,s,"m",U).call(this,e.domain,i);if(st(this,p,"f")[i]=n,Object.assign(n.element.style,at.iFrameStyle),"frame"===n.type){const t=`index=${i}&isPartnerVPAID=${st(this,g,"f").toQuery.isPartnerVPAID}${st(this,s,"a",I)}&uid=${st(this,l,"f").uid}`;n.element.setAttribute("allow","encrypted-media *; autoplay *; fullscreen *;"),n.element.setAttribute("allowfullscreen","true"),n.element.src=`${e.domain}/playerUT/?${t}`}else n.class.emitter.subscribe("emit-to-PARENT",(t=>{this.postMessageHandler(t)}));st(this,c,"f")&&!i&&("frame"===n.type?n.element.onload=()=>{st(this,s,"m",G).call(this)}:setTimeout((()=>{st(this,s,"m",G).call(this)}),250)),t.firstElementChild?t.insertBefore(n.element,t.firstElementChild):t.appendChild(n.element),this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"createIframe"),console.log(n),console.groupEnd()})),"class"===n.type&&n.class.init()})),st(this,E,"f")&&st(this,s,"m",q).call(this,"black-screen")},z=function(t){this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / emit to Parent`,this.debugStyle,t),console.groupEnd()})),this.emitter.emit("emit-to-VPAID",t)},q=function(t){if(!["vpaidRealFinish","finish"].includes(t)&&st(this,a,"f"))return;if(st(this,r,"f"))return void((0,yt.default)(_t.EMIT_QUEUE_MESSAGES,t)&&st(this,s,"m",z).call(this,t));const e={prefix:this.prefixExternal,uid:st(this,l,"f").uid,message:t};this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / postBack to HOST page 2`,this.debugStyle,t),console.log(e),console.groupEnd()})),st(this,o,"f")?st(this,u,"f").postMessage(e,"*"):st(this,u,"f").parent.postMessage(e,"*")},Q=function(t){st(this,T,"f")&&st(this,m,"f").setAttribute("accelerate-click",Number(t).toString())},Y=function(t){if(this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"messageToActiveFrame"),console.log(t),console.groupEnd()})),st(this,s,"a",L))if("frame"===st(this,s,"a",L).type){const e=Object.assign({prefix:this.prefixPlayerFrameIniter},t);st(this,s,"a",L).element.contentWindow.postMessage(e,"*")}else st(this,s,"a",L).class.messageFromParent(t);else console.warn("No active iframe")},G=function(){if(!st(this,s,"a",O))return;const t={message:"mainSetting",value:st(this,s,"a",O)};st(this,s,"m",Y).call(this,t)},X=function(t,e=0){return st(this,l,"f").inventoryWrapper&&setTimeout((()=>{st(this,s,"m",Z).call(this)}),e),st(this,r,"f")&&"parser"===t?st(this,s,"m",q).call(this,"vpaidRealFinish"):st(this,r,"f")||st(this,s,"m",q).call(this,"finish"),it(this,a,!0,"f"),!0},K=function(){const t=st(this,u,"f").document.createElement("iframe");Object.assign(t.style,at.vHidden),t.src="https://weborama.utraff.com",st(this,n,"f").appendChild(t)},Z=function(t=null){return et(this,void 0,void 0,(function*(){if(this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"Destroy IFrame"),console.log(null!==t?`iframe index: ${t}`:"all"),console.groupEnd()})),null!==t){const e=st(this,p,"f")[t];Object.assign(e.element.style,at.vHidden),yield(0,ct.default)(.25),console.log("REMOVE",t,e),console.log("thisElement.element",e.element),console.log("thisElement.element.parentNode",e.element.parentNode),e.element.parentNode.removeChild(e.element),"class"===e.type&&e.class.emitter.removeAllListeners("emit-to-PARENT")}else for(yield(0,ct.default)(.25);st(this,n,"f").lastChild;)st(this,n,"f").removeChild(st(this,n,"f").lastChild)}))},J=function(...t){console.warn("Suspension of work",t),st(this,s,"m",q).call(this,"vpaidRealFinish"),st(this,s,"m",Z).call(this)},tt=function(){return!(!st(this,s,"a",L)||"class"!==st(this,s,"a",L).type&&!st(this,s,"a",L).element.contentWindow)},e.default=Tt},36879:function(t,e,i){var s,n,o,r,a,l,h,d=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},c=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},u=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i};Object.defineProperty(e,"__esModule",{value:!0}),i(12719);const p=i(53073),f=i(13745),m=i(81419);class v extends p.default{constructor(t,e){super(),s.add(this),this.emitter=new m.default,n.set(this,["sdk.adlook.tech","a.adlook.tech"]),o.set(this,void 0),this.skipped=!1,this.isIframe=!e,this.dataFromQuery=e?{frameIndex:e.index,isPartnerVPAID:e.isPartnerVPAID,uid:e.uid}:{frameIndex:Number(this.queryOriginalObj.index[0]),isPartnerVPAID:!!Number(this.queryOriginalObj.isPartnerVPAID[0]),uid:this.queryOriginalObj.uid[0].toString()},this.debugStyle="padding: 5px; padding-right: 10px; background-color: WhiteSmoke; border-radius: 2px; border: 1px dotted grey; font-size: 12px;",this.debugTitle=`%c SDK PlayerIniter (index: ${this.dataFromQuery.frameIndex})`,this.dataFromParent={vast:"",debugWebsocket:!1,clickToPlay:!1,ab:!1,blackScreen:!1,watermark:!1,origins:[]},this.dataFromPlayer={billingEvent:"Impression",fbeoCampaign:!1,postBack:!0},this.state={autoPlay:!0,fbeoBillingFired:!1,inStreamPostroll:!0,wasStartEventFires:0!==this.dataFromQuery.frameIndex,volume:0},this.container="string"==typeof t?document.getElementById(t):t,this.utPlayer=document.createElement("ut-player"),this.container.appendChild(this.utPlayer),this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle}`,this.debugStyle,"Initialization"),console.log(this.dataFromQuery),console.groupEnd()}))}get utPlayerOptionsAdv(){return console.log("!!!!",Object.assign(Object.assign(Object.assign({autoPlay:this.state.autoPlay,postBack:this.dataFromQuery.isPartnerVPAID,isPartnerVPAID:this.dataFromQuery.isPartnerVPAID,debugMain:this.debug,volume:this.state.volume,adLoaded:this.dataFromQuery.isPartnerVPAID,blackScreen:this.dataFromParent.blackScreen,origins:this.dataFromParent.origins,parallel:!!this.dataFromParent.ab,block2LVLDomains:c(this,n,"f"),block:{adSetting:{vast:this.dataFromParent.vast,options:{watermark:this.dataFromParent.watermark,debugView:!1,debugAd:this.debug,debugAdBlock:this.debug,debugAdMedia:this.debug,debugAdVPAID:this.debug}}}},!!this.dataFromParent.debugWebsocket&&{debugWebsocket:this.dataFromParent.debugWebsocket}),c(this,o,"f")&&{urlSettingFromSDK:c(this,o,"f")}),this.dataFromParent.addErrorFromSdk&&{addErrorFromSdk:this.dataFromParent.addErrorFromSdk})),Object.assign(Object.assign(Object.assign({autoPlay:this.state.autoPlay,postBack:this.dataFromQuery.isPartnerVPAID,isPartnerVPAID:this.dataFromQuery.isPartnerVPAID,debugMain:this.debug,volume:this.state.volume,adLoaded:this.dataFromQuery.isPartnerVPAID,blackScreen:this.dataFromParent.blackScreen,origins:this.dataFromParent.origins,parallel:!!this.dataFromParent.ab,block2LVLDomains:c(this,n,"f"),block:{adSetting:{vast:this.dataFromParent.vast,options:{watermark:this.dataFromParent.watermark,debugView:!1,debugAd:this.debug,debugAdBlock:this.debug,debugAdMedia:this.debug,debugAdVPAID:this.debug}}}},!!this.dataFromParent.debugWebsocket&&{debugWebsocket:this.dataFromParent.debugWebsocket}),c(this,o,"f")&&{urlSettingFromSDK:c(this,o,"f")}),this.dataFromParent.addErrorFromSdk&&{addErrorFromSdk:this.dataFromParent.addErrorFromSdk})}startPlayer(){return d(this,void 0,void 0,(function*(){document.body.classList.add("inited"),this.dataFromParent.clickToPlay||this.finallyInit()}))}finallyInit(){return d(this,void 0,void 0,(function*(){this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle}`,this.debugStyle,"Player INSERT"),console.log("this.utPlayerOptionsAdv",this.utPlayerOptionsAdv),console.groupEnd()})),this.utPlayer.init(this.utPlayerOptionsAdv),this.state.autoPlay&&this.utPlayer.play()}))}getHandlerUtPlayer({event:t,id:e,data:i}){if(this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / message from Player`,this.debugStyle,t),console.log(e),i&&console.log("data",i),console.groupEnd()})),"adLoaded"!==t)if("skip"!==t)if("info"!==t)if(t===this.dataFromPlayer.billingEvent&&this.triggerBillingEvent(),"ClickTracking"!==t){if("creativeView"!==t)return this.state.wasStartEventFires||"start"!==t&&"Impression"!==t?void("second2"!==t?["firstQuartile","midpoint","thirdQuartile","pause","resume","mute","unmute","click","complete"].includes(t)?c(this,s,"m",l).call(this,{message:t}):["finish","error"].includes(t)||"finish_promise"===t&&(this.skipped?c(this,s,"m",l).call(this,{message:"skip"}):c(this,s,"m",l).call(this,{message:"finish",addData:this.dataFromQuery.frameIndex}),this.destroyPlayer()):"MRCVisibility"===this.dataFromPlayer.billingEvent&&i>50&&(this.debugMessage((()=>{console.groupCollapsed(this.debugTitle,this.debugStyle,"MRCVisibility"),console.log("MRCVisibility is a billing event. currentVisibility is ",i),console.groupEnd()})),this.triggerBillingEvent())):(c(this,s,"m",l).call(this,{message:"start"}),void(this.state.wasStartEventFires=!0));c(this,s,"m",l).call(this,{message:"creativeView"})}else c(this,s,"m",l).call(this,{message:"click"});else c(this,s,"m",r).call(this,i);else this.skipped=!0;else c(this,s,"m",l).call(this,{message:"adLoaded"})}triggerBillingEvent(){this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / Billing event ${this.dataFromPlayer.billingEvent} happened`,`${this.debugStyle}; border-color: red`),console.log("dataFromPlayer.fbeoCampaign",this.dataFromPlayer.fbeoCampaign),console.log("state.fbeoBillingFired",this.state.fbeoBillingFired),console.groupEnd()})),this.dataFromPlayer.fbeoCampaign&&this.state.fbeoBillingFired||c(this,s,"m",l).call(this,{message:"billing"}),this.dataFromPlayer.fbeoCampaign&&(this.state.fbeoBillingFired=!0)}setSetting(t){t.addErrorFromSdk&&(this.dataFromParent.addErrorFromSdk=t.addErrorFromSdk),this.dataFromParent.vast=t.vast,this.dataFromParent.blackScreen=t.blackScreen,this.dataFromParent.watermark=!!t.watermark,this.dataFromParent.origins=t.origins||[],this.state.autoPlay=t.autoPlay,this.state.volume=t.volume,this.dataFromParent.ab=t.ab,this.dataFromParent.clickToPlay=t.clickToPlay&&!this.dataFromQuery.frameIndex,t.defaultBillingEvent&&(this.dataFromPlayer.billingEvent=t.defaultBillingEvent),this.dataFromParent.blackScreen&&this.utPlayer.classList.add("black-screen"),t.vastFromPartnerVpaidUriVariables&&(u(this,o,t.vastFromPartnerVpaidUriVariables,"f"),c(this,o,"f").toSdk&&c(this,s,"m",r).call(this,c(this,o,"f").toSdk))}init(){this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / .init()`,this.debugStyle),console.groupEnd()})),this.utPlayer.emitter.subscribe("toSdk:event",(t=>{this.getHandlerUtPlayer(t)})),this.isIframe&&c(this,s,"m",a).call(this),this.dataFromQuery.frameIndex||this.dataFromQuery.isPartnerVPAID||setTimeout((()=>{c(this,s,"m",l).call(this,{message:"needMainSetting",addData:this.dataFromQuery.frameIndex})}),0)}messageFromParent(t){return this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / message from PlayerFrameIniter`,this.debugStyle,t.message),console.log(t),console.groupEnd()})),"startAd"===t.message?this.utPlayer.adStart():"makeSkip"===t.message?this.utPlayer.skip():"makePause"===t.message?this.utPlayer.pauseAd():"makeResume"===t.message?this.utPlayer.resumeAd():"clickToPlay"===t.message?this.finallyInit():"setVolume"===t.message?(this.state.volume=t.value,this.utPlayer.setVolume(t.value)):void("mainSetting"===t.message&&(this.setSetting(t.value),this.startPlayer()))}destroyPlayer(){this.container.innerHTML="",this.utPlayer.remove(),this.utPlayer=void 0}}n=new WeakMap,o=new WeakMap,s=new WeakSet,r=function(t){console.log("setInfo",t),t&&(t.billingEvent&&f.default[t.billingEvent]&&(this.dataFromPlayer.billingEvent=f.default[t.billingEvent]),this.dataFromPlayer.fbeoCampaign=!!t.fbeo,this.state.fbeoBillingFired=!1,this.dataFromPlayer.postBack=!!t.postBack)},a=function(){window.addEventListener("message",(({data:t})=>{const e=t;e&&"object"==typeof e&&e.prefix===this.prefixPlayerFrameIniter&&this.messageFromParent(e)}))},l=function(t){(Array.isArray(t)?t:[t]).forEach((t=>{this.isIframe?c(this,s,"m",h).call(this,t):this.emitter.emit("emit-to-PARENT",t)}))},h=function(t){if(this.dataFromPlayer.postBack||this.dataFromQuery.isPartnerVPAID||["skip","adstarted","finish"].includes(t.message)){const e=Object.assign({prefix:this.prefixPlayerIniter,uid:this.dataFromQuery.uid},t);this.debugMessage((()=>{console.groupCollapsed(`${this.debugTitle} / message to PlayerFrameIniter`,this.debugStyle,t.message),console.groupEnd()})),window.parent.postMessage(e,"*")}},e.default=v},85134:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default='<div style="clip: rect(0 0 0 0); clip-path: inset(50%); height: 1px; overflow: hidden; position: absolute;white-space: nowrap;width: 1px; z-index: -1;"></div>'},13745:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default={1:"start",2:"Impression",3:"complete",4:"firstQuartile",5:"midpoint",6:"thirdQuartile",7:"creativeView",8:"MRCVisibility"}},14522:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b,w,A,k,_,T=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},E=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},P=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const S=i(62346),x=i(57520),C=i(83859),M=i(3486);class $ extends HTMLElement{constructor(){super(),s.add(this),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),a.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),c.set(this,void 0),u.set(this,void 0),p.set(this,void 0),f.set(this,void 0),m.set(this,void 0),v.set(this,void 0),g.set(this,void 0),y.set(this,void 0),E(this,n,0,"f"),E(this,o,null,"f"),E(this,r,!1,"f"),E(this,v,0,"f"),E(this,g,!1,"f"),E(this,l,!1,"f"),E(this,a,!1,"f"),E(this,h,!0,"f"),E(this,d,!1,"f"),E(this,c,!0,"f"),E(this,u,!1,"f"),E(this,p,!1,"f"),E(this,f,!1,"f")}static get observedAttributes(){return["play","accelerate-click","hide-all","now-sticky"]}attributeChangedCallback(t){switch(t){case"play":P(this,h,"f")&&(E(this,h,!Number(this.getAttribute("play")),"f"),this.render(),P(this,s,"m",k).call(this),P(this,s,"m",A).call(this));break;case"accelerate-click":E(this,u,!!Number(this.getAttribute("accelerate-click")),"f"),P(this,s,"m",w).call(this);break;case"hide-all":E(this,f,!!+this.getAttribute("hide-all"),"f"),P(this,s,"m",_).call(this);break;case"now-sticky":E(this,g,!!+this.getAttribute("now-sticky"),"f"),this.render(),P(this,s,"m",k).call(this),P(this,s,"m",A).call(this)}}connectedCallback(){const t=Number(this.getAttribute("interface-type"));t&&(0,C.default)(M.INVENTORY_CORE_INTERFACE_TYPE,t)&&(E(this,v,t,"f"),E(this,g,!!+this.getAttribute("now-sticky"),"f")),E(this,d,!!+this.getAttribute("click-to-play"),"f"),E(this,a,!!+this.getAttribute("hide-label"),"f"),E(this,l,!!+this.getAttribute("hide-countdown"),"f"),E(this,n,+this.getAttribute("countdown"),"f"),E(this,r,!P(this,n,"f"),"f"),E(this,f,!!+this.getAttribute("hide-all"),"f"),E(this,m,!!+this.getAttribute("infinity-skeleton"),"f"),this.shadowRoot||this.attachShadow({mode:"open"}),this.render()}render(){if(this.shadowRoot.innerHTML=`\n      <slot />\n      <style>\n        :host {\n          --top: 25px;\n          position: absolute;\n          left: 0px;\n          right: 0px;\n          top: 0px;\n          bottom: 0px;\n          z-index: 2010;\n\n          ${1===P(this,v,"f")?"\n            --top-sticky-label: -27px;\n            --top-sticky-countdown: -31px;\n              ":"\n              --top-sticky-label: var(--top);\n              --top-sticky-countdown: var(--top);\n            "}\n        }\n\n        :host(.black-screen) {\n          background-color: hsl(0, 0%, 0%);\n        }\n\n\n        * {\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n        }\n\n        .skeleton {\n          position: absolute;\n          left: 0px;\n          top: 0px;\n          bottom: 0px;\n          right: 0px;\n          background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);\n          background-size: 200% 100%;\n          z-index: 2147483647;\n        }\n\n      </style>\n    `,P(this,m,"f")&&(this.shadowRoot.innerHTML+='<div id="skeleton" class="skeleton"></div>'),P(this,d,"f")&&P(this,c,"f")){this.shadowRoot.innerHTML+=`\n        <style>\n          .play-button {\n            position: absolute;\n            left: 0px;\n            right: 0px;\n            top: 0px;\n            bottom: 0px;\n            width: 100%;\n            background-color: unset;\n            border: none;\n            cursor: pointer;\n            display: grid;\n            place-content: center;\n          }\n\n          .play-button > svg {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            width: 50%;\n            fill: hsla(0, 100%, 100%, 50%);\n            transition: all 0.25s linear;\n          }\n\n          .play-button:hover > svg {\n            fill: hsla(0, 40%, 40%, 100%);\n          }\n        </style>\n        <button id="play" class="play-button">\n          ${S.default}\n        </button>\n      `;this.shadowRoot.getElementById("play").onclick=()=>{this.makeDispatchEvent("clickToPlay"),E(this,c,!1,"f"),this.render()}}P(this,h,"f")||(this.shadowRoot.innerHTML+="\n        <style>\n          .label {\n            position: absolute;\n            top: var(--top);\n            z-index: 2011;\n            color: white;\n            font-size: 12px;\n            padding: 5px;\n            box-shadow: 0 0 1px black;\n            text-shadow: 0 0 0.5em black;\n            user-select: none;\n            backdrop-filter: blur(3px);\n            background: hsla(0, 0%, 0%, 0.15);\n          }\n\n          .label.left {\n            border-radius: 0px 3px 3px 0px;\n          }\n\n          .label.sticky {\n            top: var(--top-sticky-label);\n          }\n\n          .label.right {\n            right: 0px;\n            border-radius: 3px 0px 0px 3px;\n            top: var(--top);\n            transition: background .5s;\n            cursor: pointer;\n          }\n\n          .label.right:hover {\n            background: hsla(0, 0%, 0%, 0.1);\n          }\n\n          .hide {\n            opacity: 0;\n            pointer-events: none;\n          }\n\n          .countdown {\n            position: absolute;\n            top: var(--top);\n            right: 16px;\n            user-select: none;\n            height: 29px;\n            width: 29px;\n            margin: 0;\n            z-index: 2012;\n            backdrop-filter: blur(3px);\n            background-color: hsla(0, 0%, 0%, 0.1);\n            box-shadow: 0 0 0.05em black;\n            border-radius: 50%;\n          }\n\n          .countdown--hide {\n            display: none;\n          }\n\n          .countdown.sticky {\n            top: var(--top-sticky-countdown);\n          }\n\n          .counter {\n            border-radius: 50%;\n          }\n\n          .countdown svg circle {\n            stroke-dashoffset: 0;\n            transition: stroke-dashoffset 1s linear;\n            stroke: #fff;\n            stroke-width: 3px;\n          }\n          .countdown svg #bar {\n              stroke: red;\n          }\n\n          .close_icon {\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(calc(-50% + 0px), -50%);\n            filter: drop-shadow(rgba(0, 0 , 0, 0.75) 0px 0px 2px);\n            stroke: #bdbdbd;\n            stroke-width: 1px;\n          }\n\n          .transparent_click {\n            pointer-events: none;\n          }\n\n          ::slotted(div) {\n            position: absolute;\n            left: 0px;\n            top: 0px;\n            bottom: 0px;\n            right: 0px;\n          }\n        </style>\n      ",P(this,a,"f")||(this.shadowRoot.innerHTML+=`<div id="label" class="label left ${P(this,g,"f")?"sticky":""}">РЕКЛАМА</div>`),this.shadowRoot.innerHTML+=`<div id="countdown" data-size="29" class="countdown ${P(this,g,"f")?"sticky":""} ${P(this,l,"f")?"countdown--hide":""}"></div>`)}makeDispatchEvent(t){return this.shadowRoot.dispatchEvent(new CustomEvent("from-un-player-interface",{bubbles:!0,composed:!0,detail:t})),!0}}n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,y=new WeakMap,s=new WeakSet,b=function(){return!!P(this,u,"f")&&(1!==P(this,v,"f")||!P(this,g,"f"))},w=function(){console.log("checkToAccelerateClick",P(this,u,"f"),P(this,v,"f"),P(this,g,"f")),(P(this,o,"f")||(P(this,s,"m",k).call(this),P(this,o,"f")))&&(P(this,s,"a",b)?P(this,o,"f").classList.add("transparent_click"):(P(this,o,"f").classList.remove("transparent_click"),P(this,o,"f").onclick=()=>{P(this,r,"f")&&this.makeDispatchEvent("makeSkip")}))},A=function(){return T(this,void 0,void 0,(function*(){let t=P(this,n,"f");P(this,y,"f")&&(t=P(this,y,"f").currentTime,P(this,y,"f").stop(),E(this,y,null,"f")),E(this,y,new x.default({countdownElement:P(this,o,"f"),countdown:P(this,n,"f"),size:29,currentTime:t}),"f"),yield P(this,y,"f").promiseFinish,P(this,y,"f").started&&(console.log("makeDispatchEvent skip_available"),this.makeDispatchEvent("skip_available"),E(this,r,!0,"f"),P(this,s,"m",w).call(this))}))},k=function(){E(this,o,this.shadowRoot.getElementById("countdown"),"f")},_=function(){if(!this.shadowRoot)return;const t=this.shadowRoot.getElementById("skeleton");t&&(P(this,f,"f")?t.classList.remove("hide"):t.classList.add("hide"));const e=this.shadowRoot.getElementById("label");e&&(P(this,f,"f")?e.classList.add("hide"):e.classList.remove("hide"));const i=this.shadowRoot.getElementById("countdown");i&&(P(this,f,"f")?i.classList.add("hide"):i.classList.remove("hide"))},e.default=$},62346:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default='<svg viewBox="0 0 477.87 477.87">\n<path d="M238.93 0C106.97 0 0 106.97 0 238.93s106.97 238.94 238.93 238.94 238.94-106.98 238.94-238.94C477.73 107.03 370.83.14 238.93 0zm0 443.73c-113.1 0-204.8-91.69-204.8-204.8s91.7-204.8 204.8-204.8 204.8 91.7 204.8 204.8C443.61 352 352 443.61 238.93 443.73z"/>\n<path d="M339.56 231.32c-1.66-3.32-4.35-6-7.66-7.66l-136.54-68.27a17.07 17.07 0 00-24.7 15.28V307.2a17.07 17.07 0 0024.7 15.27l136.54-68.26a17.07 17.07 0 007.66-22.89zM204.8 279.59v-81.31l81.3 40.65-81.3 40.66z"/>\n</svg>'},57520:function(t,e){var i,s,n,o,r,a,l,h,d,c,u,p,f,m=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))},v=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},g=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});s=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,i=new WeakSet,h=function(){return g(this,n,"f")/2-2},d=function(){return(g(this,n,"f")/2).toString()},c=function(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("close_icon"),t.setAttribute("width",g(this,n,"f")-15+"px"),t.setAttribute("height",g(this,n,"f")-14+"px"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"fill-rule","evenodd"),e.setAttributeNS(null,"clip-rule","evenodd"),e.setAttributeNS(null,"fill","white"),e.setAttributeNS(null,"d","M5.29289 5.29289C5.68342 4.90237 6.31658 4.90237 6.70711 5.29289L12 10.5858L17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L12 13.4142L6.70711 18.7071C6.31658 19.0976 5.68342 19.0976 5.29289 18.7071C4.90237 18.3166 4.90237 17.6834 5.29289 17.2929L10.5858 12L5.29289 6.70711C4.90237 6.31658 4.90237 5.68342 5.29289 5.29289Z"),t.appendChild(e),t},u=function(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("counter"),t.setAttribute("width",`${g(this,n,"f")}px`),t.setAttribute("height",`${g(this,n,"f")}px`),t.setAttributeNS(null,"viewPort",`0 0 ${g(this,n,"f")} ${g(this,n,"f")}`),t.setAttributeNS(null,"version","1.1");const e=document.createElementNS("http://www.w3.org/2000/svg","circle");if(e.setAttributeNS(null,"r",g(this,i,"a",h).toString()),e.setAttributeNS(null,"cx",g(this,i,"a",d)),e.setAttributeNS(null,"cy",g(this,i,"a",d)),e.setAttributeNS(null,"fill","transparent"),e.setAttributeNS(null,"stroke-dasharray",g(this,i,"m",p).call(this,!0)),e.setAttributeNS(null,"stroke-dashoffset","0"),t.appendChild(e),g(this,o,"f")){const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("id","bar"),e.setAttributeNS(null,"r",g(this,i,"a",h).toString()),e.setAttributeNS(null,"cx",g(this,i,"a",d)),e.setAttributeNS(null,"cy",g(this,i,"a",d)),e.setAttributeNS(null,"fill","transparent"),e.setAttributeNS(null,"stroke-dasharray",g(this,i,"m",p).call(this,!0)),e.setAttributeNS(null,"stroke-dashoffset","0"),t.appendChild(e)}return t},p=function(t){const e=2*Math.PI*g(this,i,"a",h);return((g(this,o,"f")-(t?0:Math.max(0,this.currentTime-1)))/g(this,o,"f")*e).toFixed(2)},f=function(){g(this,s,"f").setAttribute("data-tm",this.currentTime?this.currentTime.toString():""),this.currentTime||g(this,s,"f").classList.add("finish")},e.default=class{constructor(t){var e,h;i.add(this),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),a.set(this,!1),this.started=!1,l.set(this,void 0),v(this,s,t.countdownElement,"f"),v(this,n,t.size,"f"),v(this,o,null!==(e=t.currentTime)&&void 0!==e?e:t.countdown,"f"),this.currentTime=null!==(h=t.currentTime)&&void 0!==h?h:t.countdown,v(this,r,!!t.withTimer,"f"),g(this,s,"f")&&(this.started=!0,g(this,s,"f").appendChild(g(this,i,"a",u)),g(this,s,"f").appendChild(g(this,i,"a",c)),this.promiseFinish=new Promise((e=>{v(this,l,e,"f"),t.countdown||e()})),this.start())}start(){return m(this,void 0,void 0,(function*(){g(this,i,"m",f).call(this);const t=g(this,s,"f").firstElementChild.lastElementChild;yield new Promise((t=>{setTimeout((()=>t()),10)})),t.style["stroke-dashoffset"]=g(this,i,"m",p).call(this);const e=setInterval((()=>{this.currentTime<1?clearInterval(e):(this.currentTime-=1,g(this,i,"m",f).call(this),t.style["stroke-dashoffset"]=g(this,i,"m",p).call(this),this.currentTime<1&&(clearInterval(e),g(this,a,"f")||g(this,l,"f").call(this)))}),1e3)}))}stop(){v(this,a,!0,"f")}}},9512:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.iFrameStyle=e.vHidden=void 0;e.vHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",clip:"rect(0 0 0 0)",overflow:"hidden"};e.iFrameStyle={width:"100%",height:"100%",left:"0px",top:"0px",border:0,position:"absolute",overflow:"hidden"}},57989:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});const s=i(10622);e.default=t=>{const e=document.createElement("div");e.className="ads-block",e.style.cssText="position: absolute; top: 1px; left: 1px; opacity: 0.1;",document.body.appendChild(e),setTimeout((()=>{const t=document.createElement("img");t.src="https://adhigh.net/promo.jpg",t.className="ads-img",t.width=300,t.height=1,e.appendChild(t)}),1e3),setTimeout((()=>{0===e.offsetHeight&&(0,s.default)(t),e.remove()}),1500)}},65481:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>{if(t.document.hidden)return!1;const e=t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth,i=t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight;return!(e<560||i<300)}},81419:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.events={},this.events={}}emit(t,e){const i=this.events[t];i&&i.forEach((t=>{t.call(null,e)}))}subscribe(t,e){var i;return this.events[t]||(this.events[t]=[]),null===(i=this.events[t])||void 0===i||i.push(e),()=>{var i;this.events[t]=null===(i=this.events[t])||void 0===i?void 0:i.filter((t=>e!==t))}}removeAllListeners(t){this.events[t]&&delete this.events[t]}}},91020:function(t,e,i){var s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b,w=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},A=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const k=i(69002),_=i(19370);n=new WeakMap,o=new WeakMap,r=new WeakMap,a=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,g=new WeakMap,s=new WeakSet,y=function(){return"leopony.com"===A(this,v,"f")},b=function(){return`https://${A(this,v,"f")}/urls`},e.default=class{constructor(t){s.add(this),n.set(this,void 0),o.set(this,void 0),r.set(this,void 0),a.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),c.set(this,void 0),u.set(this,void 0),p.set(this,void 0),f.set(this,void 0),m.set(this,void 0),v.set(this,void 0),g.set(this,void 0),w(this,n,t,"f"),w(this,o,3e4,"f"),w(this,r,15e3,"f"),w(this,a,3,"f"),w(this,l,null,"f"),w(this,h,0,"f"),w(this,d,[],"f"),w(this,c,[],"f"),w(this,u,[],"f"),w(this,p,null,"f"),w(this,f,null,"f"),w(this,m,!1,"f"),w(this,v,"","f"),w(this,g,"","f")}init(t,e){e&&w(this,g,`//${e}`,"f"),w(this,v,t,"f"),(0,k.default)(A(this,s,"a",b),void 0,void 0,void 0,!1).then((e=>{try{JSON.parse(e).forEach((e=>{A(this,d,"f").push(A(this,s,"a",y)?`https://${t}${e[0]}`:`https://${t}/video/${e[0]}`),A(this,c,"f").push(e[1])}))}catch(t){console.log(t)}A(this,m,"f")&&console.log("%cinited, waiting for the frame with delay","font-size: 48px"),setTimeout((()=>{this.createFrame(A(this,d,"f")[this.getIndexByThrowDice()]).then((()=>{this.sendStat(),A(this,m,"f")&&console.log("%cframe created","font-size: 48px"),w(this,h,A(this,h,"f")+1,"f"),w(this,l,setInterval((()=>{this.updateUrl()}),A(this,r,"f")),"f")}))}),A(this,o,"f"))})).catch((t=>{console.log(t)}))}getIndexByThrowDice(){const t=(0,_.default)(1,100);for(let e=0;e<A(this,c,"f").length;e+=1)if(A(this,c,"f")[e]>=t)return e}createFrame(t){return new Promise((e=>{w(this,p,A(this,n,"f").document.createElement("iframe"),"f");Object.assign(A(this,p,"f").style,{width:"1px",height:"1px",border:0,position:"absolute",overflow:"hidden"});let i="";if("2"===A(this,g,"f")||"2"===A(this,g,"f").toString())i=t,A(this,p,"f").onload=()=>{e(!0)};else if(A(this,g,"f"))i=A(this,g,"f"),A(this,p,"f").onload=()=>{A(this,p,"f").contentWindow.postMessage(t,"*"),e(!0)};else{i=`data:text/html;charset=utf-8,${encodeURI(`<iframe src="${t}" style="width: 1px; height: 1px; border: 0px; position: absolute; overflow: hidden;"></iframe>`)}`,A(this,p,"f").onload=()=>{e(!0)}}A(this,p,"f").src=i,w(this,f,t,"f"),A(this,n,"f").document.body.appendChild(A(this,p,"f")),A(this,m,"f")&&console.log(A(this,p,"f"))}))}destroyFrame(){A(this,m,"f")&&console.log("%cdestroying frame","font-size: 48px"),A(this,n,"f").document.body.removeChild(A(this,p,"f")),w(this,p,null,"f")}updateUrl(){A(this,m,"f")&&console.log("%cupdating url","font-size: 48px");let t="";const e=A(this,d,"f").indexOf(A(this,f,"f"));if(-1!==e&&(A(this,d,"f").splice(e,1),A(this,c,"f").splice(e,1)),A(this,d,"f").length>0){{const e=this.getIndexByThrowDice();if(!(e>-1))return void clearInterval(A(this,l,"f"));t=A(this,d,"f")[e]}if(t)if(A(this,m,"f")&&console.log(`%c${t}`,"font-size: 48px"),A(this,h,"f")<A(this,a,"f")){A(this,p,"f").contentWindow.postMessage({redirect:t},"*");let e="";if("2"===A(this,g,"f")||"2"===A(this,g,"f").toString())e=t,A(this,p,"f").onload=()=>{this.sendStat()};else if(A(this,g,"f"))e=A(this,g,"f"),A(this,p,"f").onload=()=>{A(this,p,"f").contentWindow.postMessage(t,"*"),this.sendStat()};else{e=`data:text/html;charset=utf-8,${encodeURI(`<iframe src="${t}" style="width: 1px; height: 1px; border: 0px; position: absolute; overflow: hidden;"></iframe>`)}`,A(this,p,"f").onload=()=>{this.sendStat()}}A(this,p,"f").src=e,A(this,m,"f")&&console.log(A(this,p,"f").src),w(this,h,A(this,h,"f")+1,"f")}else clearInterval(A(this,l,"f"));else clearInterval(A(this,l,"f"))}else clearInterval(A(this,l,"f"))}sendStat(){let t=`?source=${A(this,v,"f")}`;A(this,h,"f")&&(t+=`&redirects=${A(this,h,"f")}`),A(this,g,"f")&&(t+=`&ref=${A(this,g,"f")}`),(0,k.default)(`https://a.utraff.com/counter${t}`,void 0,void 0,void 0,!1)}}},7316:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t=0)=>new Promise((e=>{setTimeout((()=>{e(!0)}),1e3*t)}))},23987:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const i=(t,e)=>t[e]?i(t,`1${e}`):e;e.default=t=>{const e=Object.assign(Object.assign({},t),{[i(t,"v")]:"2.1.6",[i(t,"h")]:encodeURIComponent(window.location.hostname)});return Object.keys(e).map((t=>{const i=e[t];return"boolean"==typeof i?`${t}=${Number(i)}`:`${t}=${i}`})).join("&")}},81921:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>{const e=[...t];let i="";if(e&&e.length){for(let t=e.length;t>0;t-=1)i+=`${e[t-1]}*`;i=i.substring(0,i.length-1)}return encodeURIComponent(i)}},29854:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>{let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let s=0;s<t;s+=1)e+=i.charAt(Math.floor(Math.random()*i.length));return e}},79438:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=()=>{const t=new URL(window.location.href);let e=`${t.protocol}//${t.hostname}${t.pathname}`;return e.endsWith("/")&&(e=e.slice(0,-1)),encodeURIComponent(e)}},17541:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>{if("string"!=typeof t)return t;return window.document.getElementById(t)||!1}},65647:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const i=t=>t.toString(32).padStart(4,"0");e.default=t=>{const e=t.clientWidth,s=t.clientHeight;return`${i(e)}${i(s)}`}},28746:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getOrigin=e.getOrigins=void 0;e.getOrigin=()=>{if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length)return window.location.ancestorOrigins[window.location.ancestorOrigins.length-1];if(window.self===window.top)return window.location.origin;if(window.document.referrer)try{return new URL(window.document.referrer).origin}catch(t){console.log("error parsing referrer URL",t)}return""};e.getOrigins=t=>{const e=(()=>{var t;if(void 0!==window.location.ancestorOrigins&&window.location.ancestorOrigins.length)return[...window.location.ancestorOrigins];const e=[];if(window.self===window.top)return e.push(window.location.origin),e;let i=window;for(;i!==window.top;){try{if(null===(t=i.document)||void 0===t?void 0:t.referrer){const t=new URL(i.document.referrer);e.push(t.origin)}}catch(t){break}i=i.parent}if(0===e.length&&window.location.origin){const t=new URL(window.document.baseURI);e.push(t.origin)}return e})();t&&t.length&&e.push(...t);const i=[];for(let t=0;t<e.length;t+=1)t&&e[t]===e[t-1]||i.push(e[t]);return i}},19370:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e)=>Math.random()*(e-t)+t},49493:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>{const e=document.createElement("div");return e.style.position="absolute",e.style.bottom="5px",e.style.left="5px",e.style.color="#c3c3c3",e.style.textShadow="0px 0px 2px #262",e.style.fontSize="14px",e.style.pointerEvents="none",e.style.zIndex="2147483647",e.innerText=`${t}`,e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',e}},21684:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const i=(t,e=!1)=>new Promise((s=>{const n=new XMLHttpRequest;n.timeout=2e3,n.open("GET",t,!0),e||(n.withCredentials=!0),n.onload=function(){n.status>=200&&n.status<300?this.responseText&&this.responseText.includes("<")?s(this.responseText):s(802):n.status>=400&&n.status<500?s(803):n.status>=500&&n.status<600?s(804):s(805)},n.onerror=()=>{s(e?806:i(t,!0))},n.ontimeout=()=>{s(807)};try{n.send()}catch(t){s(808)}}));e.default=i},83859:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e)=>t.includes(e)},78199:function(t,e){var i=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});e.default=()=>i(void 0,void 0,void 0,(function*(){return/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent)}))},62024:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e=document)=>{(Array.isArray(t)?t:[t]).forEach((t=>{e.createElement("img").setAttribute("src",t)}))}},69794:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});const s=i(10622),n=i(96198);e.default=(t,e=document.body)=>{if(!e)return;let i,o=!1;(0,n.default)(e,(e=>{o||(e<50&&i?clearTimeout(i):e>=50&&!i&&(i=setTimeout((()=>{o=!0,(0,s.default)(t.replace("(visibility)",e.toString()))}),1e3)))}))}},10622:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.pixelXHRPromise=void 0;e.pixelXHRPromise=t=>new Promise((e=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.onloadend=()=>{e(!0)},i.send()})),e.default=t=>{const e=new XMLHttpRequest;e.open("GET",t,!1),e.send()}},53159:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e)=>{let i=!1;const s=({data:s})=>{if("adlook"===s.prefix&&(!e||s.uid&&s.uid===e))if(t.all&&t.all(s.message),"creativeView"!==s.message){if("start"!==s.message)return("finish"!==s.message||i)&&("vpaidRealFinish"!==s.message||i)?void("skip"===s.message&&t.skip&&t.skip()):(i=!0,void(t.finish&&t.finish()));t.start&&t.start()}else t.creativeView&&t.creativeView()};window.addEventListener("message",s);return{postBackFiresRemoveHandler:()=>{window.removeEventListener("message",s)}}}},69002:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e="GET",i={"Content-type":"application/json; charset=utf-8"},s=null,n=!0)=>new Promise(((o,r)=>{const a=new XMLHttpRequest;if(a.open(e,t),i)for(const t in i)a.setRequestHeader(t,i[t].toString());a.onload=()=>{200===a.status&&a.responseText?o(a.responseText):200!==a.status&&r(a.status)},a.withCredentials=n;const l="object"==typeof s?JSON.stringify(s):s;a.onerror=()=>{r(a.status)};try{a.send(l)}catch(t){r(a.status)}}))},33733:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=t=>new ResizeObserver((()=>{t()}))},57650:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getQueryObj=e.getQueryObject=void 0;e.getQueryObject=t=>{const e=t.replace("?","").split("&"),i={};for(let t=0;t<e.length;t+=1){const s=e[t].indexOf("="),n=e[t].substring(0,s),o=e[t].substring(s+1,e[t].length);void 0===i[n]&&(i[n]=[]),i[n].push(decodeURIComponent(o))}return i};e.getQueryObj=()=>window.location.search?(0,e.getQueryObject)(window.location.search):{}},96198:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=(t,e)=>{let i=null;const s={root:null,rootMargin:"0px",threshold:Array(101).fill(0).map(((t,e)=>.01*e))};try{i=new IntersectionObserver((t=>{e(Math.round(100*t[t.length-1].intersectionRatio))}),s),i.observe(t)}catch(t){e(100)}}},3486:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.INVENTORY_CORE_INTERFACE_TYPE=void 0;e.INVENTORY_CORE_INTERFACE_TYPE=[0,1]},2251:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VPAID_YA_PARAMETERS_AD_BREAK_TYPE=e.VPAID_YA_PARAMETERS_MODULE=e.VPAID_EVENT_VARIANT=e.EMIT_QUEUE_MESSAGES_START_ACCUMULATION=e.EMIT_QUEUE_MESSAGES=void 0;e.EMIT_QUEUE_MESSAGES=["adLoaded","start","creativeView","billing","skip","mute","unmute","firstQuartile","midpoint","thirdQuartile","complete","click","resume","pause","vpaidRealFinish","error"];e.EMIT_QUEUE_MESSAGES_START_ACCUMULATION=["complete","error"];e.VPAID_EVENT_VARIANT=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"];e.VPAID_YA_PARAMETERS_MODULE=["AdLoader","RTBBlock"];e.VPAID_YA_PARAMETERS_AD_BREAK_TYPE=["preroll","midroll","postroll"]},12719:function(t,e,i){var s,n,o,r;i.r(e),i.d(e,{UtPlayer:function(){return So}});const a=globalThis,l=a.ShadowRoot&&(void 0===a.ShadyCSS||a.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,h=Symbol(),d=new WeakMap;let c=class{constructor(t,e,i){if(this._$cssResult$=!0,i!==h)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(l&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=d.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&d.set(e,t))}return t}toString(){return this.cssText}};const u=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new c(i,t,h)},p=l?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new c("string"==typeof t?t:t+"",void 0,h))(e)})(t):t,{is:f,defineProperty:m,getOwnPropertyDescriptor:v,getOwnPropertyNames:g,getOwnPropertySymbols:y,getPrototypeOf:b}=Object,w=globalThis,A=w.trustedTypes,k=A?A.emptyScript:"",_=w.reactiveElementPolyfillSupport,T=(t,e)=>t,E={toAttribute(t,e){switch(e){case Boolean:t=t?k:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},P=(t,e)=>!f(t,e),S={attribute:!0,type:String,converter:E,reflect:!1,hasChanged:P};null!=Symbol.metadata||(Symbol.metadata=Symbol("metadata")),null!=w.litPropertyMetadata||(w.litPropertyMetadata=new WeakMap);class x extends HTMLElement{static addInitializer(t){var e;this._$Ei(),(null!=(e=this.l)?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=S){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(t,i,e);void 0!==s&&m(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){var s;const{get:n,set:o}=null!=(s=v(this.prototype,t))?s:{get(){return this[e]},set(t){this[e]=t}};return{get(){return null==n?void 0:n.call(this)},set(e){const s=null==n?void 0:n.call(this);o.call(this,e),this.requestUpdate(t,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return null!=(e=this.elementProperties.get(t))?e:S}static _$Ei(){if(this.hasOwnProperty(T("elementProperties")))return;const t=b(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(T("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(T("properties"))){const t=this.properties,e=[...g(t),...y(t)];for(const i of e)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,i]of e)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(p(t))}else void 0!==t&&e.push(p(t));return e}static _$Eu(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null==(t=this.constructor.l)||t.forEach((t=>t(this)))}addController(t){var e,i;(null!=(e=this._$EO)?e:this._$EO=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&(null==(i=t.hostConnected)||i.call(t))}removeController(t){var e;null==(e=this._$EO)||e.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const i of e.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var t;const e=null!=(t=this.shadowRoot)?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(l)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const i of e){const e=document.createElement("style"),s=a.litNonce;void 0!==s&&e.setAttribute("nonce",s),e.textContent=i.cssText,t.appendChild(e)}})(e,this.constructor.elementStyles),e}connectedCallback(){var t;null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostConnected)?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostDisconnected)?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EC(t,e){var i;const s=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,s);if(void 0!==n&&!0===s.reflect){const o=(void 0!==(null==(i=s.converter)?void 0:i.toAttribute)?s.converter:E).toAttribute(e,s.type);this._$Em=t,null==o?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(t,e){var i;const s=this.constructor,n=s._$Eh.get(t);if(void 0!==n&&this._$Em!==n){const t=s.getPropertyOptions(n),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null==(i=t.converter)?void 0:i.fromAttribute)?t.converter:E;this._$Em=n,this[n]=o.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,i){var s;if(void 0!==t){if(null!=i||(i=this.constructor.getPropertyOptions(t)),!(null!=(s=i.hasChanged)?s:P)(this[t],e))return;this.P(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,i){var s;this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Em!==t&&(null!=(s=this._$Ej)?s:this._$Ej=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,i]of t)!0!==i.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],i)}let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null==(t=this._$EO)||t.forEach((t=>{var e;return null==(e=t.hostUpdate)?void 0:e.call(t)})),this.update(i)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null==(e=this._$EO)||e.forEach((t=>{var e;return null==(e=t.hostUpdated)?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach((t=>this._$EC(t,this[t])))),this._$EU()}updated(t){}firstUpdated(t){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[T("elementProperties")]=new Map,x[T("finalized")]=new Map,null==_||_({ReactiveElement:x}),(null!=(s=w.reactiveElementVersions)?s:w.reactiveElementVersions=[]).push("2.0.4");const C=globalThis,M=C.trustedTypes,$=M?M.createPolicy("lit-html",{createHTML:t=>t}):void 0,V="$lit$",I=`lit$${Math.random().toFixed(9).slice(2)}$`,O="?"+I,D=`<${O}>`,L=document,B=()=>L.createComment(""),F=t=>null===t||"object"!=typeof t&&"function"!=typeof t,R=Array.isArray,N=t=>R(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]),W="[ \t\n\f\r]",j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,U=/-->/g,H=/>/g,z=RegExp(`>|${W}(?:([^\\s"'>=/]+)(${W}*=${W}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),q=/'/g,Q=/"/g,Y=/^(?:script|style|textarea|title)$/i,G=(tt=1,(t,...e)=>({_$litType$:tt,strings:t,values:e})),X=Symbol.for("lit-noChange"),K=Symbol.for("lit-nothing"),Z=new WeakMap,J=L.createTreeWalker(L,129);var tt;function et(t,e){if(!R(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==$?$.createHTML(e):e}const it=(t,e)=>{const i=t.length-1,s=[];let n,o=2===e?"<svg>":3===e?"<math>":"",r=j;for(let e=0;e<i;e++){const i=t[e];let a,l,h=-1,d=0;for(;d<i.length&&(r.lastIndex=d,l=r.exec(i),null!==l);)d=r.lastIndex,r===j?"!--"===l[1]?r=U:void 0!==l[1]?r=H:void 0!==l[2]?(Y.test(l[2])&&(n=RegExp("</"+l[2],"g")),r=z):void 0!==l[3]&&(r=z):r===z?">"===l[0]?(r=null!=n?n:j,h=-1):void 0===l[1]?h=-2:(h=r.lastIndex-l[2].length,a=l[1],r=void 0===l[3]?z:'"'===l[3]?Q:q):r===Q||r===q?r=z:r===U||r===H?r=j:(r=z,n=void 0);const c=r===z&&t[e+1].startsWith("/>")?" ":"";o+=r===j?i+D:h>=0?(s.push(a),i.slice(0,h)+V+i.slice(h)+I+c):i+I+(-2===h?e:c)}return[et(t,o+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),s]};class st{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let n=0,o=0;const r=t.length-1,a=this.parts,[l,h]=it(t,e);if(this.el=st.createElement(l,i),J.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=J.nextNode())&&a.length<r;){if(1===s.nodeType){if(s.hasAttributes())for(const t of s.getAttributeNames())if(t.endsWith(V)){const e=h[o++],i=s.getAttribute(t).split(I),r=/([.?@])?(.*)/.exec(e);a.push({type:1,index:n,name:r[2],strings:i,ctor:"."===r[1]?lt:"?"===r[1]?ht:"@"===r[1]?dt:at}),s.removeAttribute(t)}else t.startsWith(I)&&(a.push({type:6,index:n}),s.removeAttribute(t));if(Y.test(s.tagName)){const t=s.textContent.split(I),e=t.length-1;if(e>0){s.textContent=M?M.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],B()),J.nextNode(),a.push({type:2,index:++n});s.append(t[e],B())}}}else if(8===s.nodeType)if(s.data===O)a.push({type:2,index:n});else{let t=-1;for(;-1!==(t=s.data.indexOf(I,t+1));)a.push({type:7,index:n}),t+=I.length-1}n++}}static createElement(t,e){const i=L.createElement("template");return i.innerHTML=t,i}}function nt(t,e,i=t,s){var n,o,r;if(e===X)return e;let a=void 0!==s?null==(n=i._$Co)?void 0:n[s]:i._$Cl;const l=F(e)?void 0:e._$litDirective$;return(null==a?void 0:a.constructor)!==l&&(null==(o=null==a?void 0:a._$AO)||o.call(a,!1),void 0===l?a=void 0:(a=new l(t),a._$AT(t,i,s)),void 0!==s?(null!=(r=i._$Co)?r:i._$Co=[])[s]=a:i._$Cl=a),void 0!==a&&(e=nt(t,a._$AS(t,e.values),a,s)),e}let ot=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:s}=this._$AD,n=(null!=(e=null==t?void 0:t.creationScope)?e:L).importNode(i,!0);J.currentNode=n;let o=J.nextNode(),r=0,a=0,l=s[0];for(;void 0!==l;){if(r===l.index){let e;2===l.type?e=new rt(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new ct(o,this,t)),this._$AV.push(e),l=s[++a]}r!==(null==l?void 0:l.index)&&(o=J.nextNode(),r++)}return J.currentNode=L,n}p(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}};class rt{get _$AU(){var t,e;return null!=(e=null==(t=this._$AM)?void 0:t._$AU)?e:this._$Cv}constructor(t,e,i,s){var n;this.type=2,this._$AH=K,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cv=null==(n=null==s?void 0:s.isConnected)||n}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=nt(this,t,e),F(t)?t===K||null==t||""===t?(this._$AH!==K&&this._$AR(),this._$AH=K):t!==this._$AH&&t!==X&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):N(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==K&&F(this._$AH)?this._$AA.nextSibling.data=t:this.T(L.createTextNode(t)),this._$AH=t}$(t){var e;const{values:i,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=st.createElement(et(s.h,s.h[0]),this.options)),s);if((null==(e=this._$AH)?void 0:e._$AD)===n)this._$AH.p(i);else{const t=new ot(n,this),e=t.u(this.options);t.p(i),this.T(e),this._$AH=t}}_$AC(t){let e=Z.get(t.strings);return void 0===e&&Z.set(t.strings,e=new st(t)),e}k(t){R(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const n of t)s===e.length?e.push(i=new rt(this.O(B()),this.O(B()),this,this.options)):i=e[s],i._$AI(n),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null==(i=this._$AP)||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cv=t,null==(e=this._$AP)||e.call(this,t))}}class at{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,s,n){this.type=1,this._$AH=K,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=K}_$AI(t,e=this,i,s){const n=this.strings;let o=!1;if(void 0===n)t=nt(this,t,e,0),o=!F(t)||t!==this._$AH&&t!==X,o&&(this._$AH=t);else{const s=t;let r,a;for(t=n[0],r=0;r<n.length-1;r++)a=nt(this,s[i+r],e,r),a===X&&(a=this._$AH[r]),o||(o=!F(a)||a!==this._$AH[r]),a===K?t=K:t!==K&&(t+=(null!=a?a:"")+n[r+1]),this._$AH[r]=a}o&&!s&&this.j(t)}j(t){t===K?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class lt extends at{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===K?void 0:t}}class ht extends at{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==K)}}class dt extends at{constructor(t,e,i,s,n){super(t,e,i,s,n),this.type=5}_$AI(t,e=this){var i;if((t=null!=(i=nt(this,t,e,0))?i:K)===X)return;const s=this._$AH,n=t===K&&s!==K||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==K&&(s===K||n);n&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!=(i=null==(e=this.options)?void 0:e.host)?i:this.element,t):this._$AH.handleEvent(t)}}class ct{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){nt(this,t)}}const ut={M:V,P:I,A:O,C:1,L:it,R:ot,D:N,V:nt,I:rt,H:at,N:ht,U:dt,B:lt,F:ct},pt=C.litHtmlPolyfillSupport;null==pt||pt(st,rt),(null!=(n=C.litHtmlVersions)?n:C.litHtmlVersions=[]).push("3.2.1");let ft=class extends x{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return null!=(t=this.renderOptions).renderBefore||(t.renderBefore=e.firstChild),e}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{var s,n;const o=null!=(s=null==i?void 0:i.renderBefore)?s:e;let r=o._$litPart$;if(void 0===r){const t=null!=(n=null==i?void 0:i.renderBefore)?n:null;o._$litPart$=r=new rt(e.insertBefore(B(),t),t,void 0,null!=i?i:{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null==(t=this._$Do)||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null==(t=this._$Do)||t.setConnected(!1)}render(){return X}};ft._$litElement$=!0,ft.finalized=!0,null==(o=globalThis.litElementHydrateSupport)||o.call(globalThis,{LitElement:ft});const mt=globalThis.litElementPolyfillSupport;null==mt||mt({LitElement:ft}),(null!=(r=globalThis.litElementVersions)?r:globalThis.litElementVersions=[]).push("4.1.1");const vt=t=>(e,i)=>{void 0!==i?i.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)},gt={attribute:!0,type:String,converter:E,reflect:!1,hasChanged:P},yt=(t=gt,e,i)=>{const{kind:s,metadata:n}=i;let o=globalThis.litPropertyMetadata.get(n);if(void 0===o&&globalThis.litPropertyMetadata.set(n,o=new Map),o.set(i.name,t),"accessor"===s){const{name:s}=i;return{set(i){const n=e.get.call(this);e.set.call(this,i),this.requestUpdate(s,n,t)},init(e){return void 0!==e&&this.P(s,void 0,t),e}}}if("setter"===s){const{name:s}=i;return function(i){const n=this[s];e.call(this,i),this.requestUpdate(s,n,t)}}throw Error("Unsupported decorator location: "+s)};function bt(t){return(e,i)=>"object"==typeof i?yt(t,e,i):((t,e,i)=>{const s=e.hasOwnProperty(i);return e.constructor.createProperty(i,s?{...t,wrapped:!0}:t),s?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}function wt(t){return bt({...t,state:!0,attribute:!1})}const At=["az","be","ce","hy","ka","kk","ky","os","ru","sah","tg","tt","ua","uz"],kt=()=>"language"in navigator&&At.some((t=>-1!==navigator.language.indexOf(t)))||"languages"in navigator&&navigator.languages.some((t=>At.some((e=>-1!==t.indexOf(e)))))?"ru":"en",_t=kt(),Tt={ru:{play:"Запустить видео",posterLabel:"Обложка видео"},en:{play:"Play video",posterLabel:"Video thumbnail"}},Et="#DDD",Pt=G`
	<svg width="18" height="18" viewBox="0 0 24 24">
		<path fill="${Et}" d="M5 17h-5v-10h5v10zm2-10v10l9 5v-20l-9 5zm11.008 2.093c.742.743 1.2 1.77 1.198 2.903-.002 1.133-.462 2.158-1.205 2.9l1.219 1.223c1.057-1.053 1.712-2.511 1.715-4.121.002-1.611-.648-3.068-1.702-4.125l-1.225 1.22zm2.142-2.135c1.288 1.292 2.082 3.073 2.079 5.041s-.804 3.75-2.096 5.039l1.25 1.254c1.612-1.608 2.613-3.834 2.616-6.291.005-2.457-.986-4.681-2.595-6.293l-1.254 1.25z"/>
	</svg>
`,St=G`
	<svg width="18" height="18" viewBox="0 0 24 24">
		<path fill="${Et}" d="M5 17h-5v-10h5v10zm2-10v10l9 5v-20l-9 5zm15.324 4.993l1.646-1.659-1.324-1.324-1.651 1.67-1.665-1.648-1.316 1.318 1.67 1.657-1.65 1.669 1.318 1.317 1.658-1.672 1.666 1.653 1.324-1.325-1.676-1.656z"/>
	</svg>
`,xt=G`
	<svg viewBox="0 0 477.87 477.87">
		<path fill="${Et}" d="M238.93 0C106.97 0 0 106.97 0 238.93s106.97 238.94 238.93 238.94 238.94-106.98 238.94-238.94C477.73 107.03 370.83.14 238.93 0zm0 443.73c-113.1 0-204.8-91.69-204.8-204.8s91.7-204.8 204.8-204.8 204.8 91.7 204.8 204.8C443.61 352 352 443.61 238.93 443.73z"/>
		<path fill="${Et}" d="M339.56 231.32c-1.66-3.32-4.35-6-7.66-7.66l-136.54-68.27a17.07 17.07 0 00-24.7 15.28V307.2a17.07 17.07 0 0024.7 15.27l136.54-68.26a17.07 17.07 0 007.66-22.89zM204.8 279.59v-81.31l81.3 40.65-81.3 40.66z"/>
	</svg>
`,Ct=G`
	<svg viewBox="-60 0 512 512">
		<path d="m64 96 264 160L64 416V96Z"/>
	</svg>
`,Mt=G`
	<svg viewBox="-64 0 512 512">
		<path d="M64 96h96v320H64V96Zm160 0h96v320h-96V96Z"/>
	</svg>
`,$t=G`
	<svg viewBox="0 -2 516 516">
		<path d="M64 176h64L240 64v384L128 336H64V176Zm216 224q50-7 85-49t35-95q0-53-35-95t-85-49V64q46 5 85 33 38 27 61 70 22 42 22 89t-22 90q-23 42-61 70-39 27-85 32v-48Zm4-236q30 9 49 34t19 58q0 30-19 57-19 26-49 36V164Z"/>
	</svg>
`,Vt=G`
	<svg viewBox="0 -2 516 516">
		<path d="m420 452-44-44q-22 15-47 26-26 11-49 14v-48q31-5 61-27L240 272v176L128 336H64V176h80L60 92l32-32 360 360-32 32ZM240 64v80l-39-42 39-38Zm160 192q0-53-35-94-35-42-85-50V64q46 5 85 33 38 27 61 70 22 42 22 89 0 19-5 44-6 25-14 41l-37-37q8-26 8-48Zm-116-92q30 9 49 34t19 58v4l-68-68v-28Z"/>
	</svg>
`,It=u`
	:host {
		position: absolute;
		left: 0px;
		right: 0px;
		bottom: 0px;
		top: 0px;
		width: 100%;
		user-select: none;
		font-family: system-ui;
	}

	:host(.black-screen) {
		background-color: black;
	}

	/* :host(.debug-view) {
		background-color: white;
	} */

	.play-click__poster {
		position: absolute;
		top: 0px;
		left: 0px;
		width: 100%;
		height: 100%;
	}

	.play-click__button {
		position: absolute;
		padding: 5px;
		border-radius: 50%;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		height: 50%;
		aspect-ratio: 1/1;
		display: grid;
		place-content: center;
		border: none;
		transition: background-color .25s linear;
		background-color: hsla(0, 0%, 100%, 0.15);
	}

	.play-click__button:active {
		background-color: hsla(0, 0%, 100%, 0.15);
	}

	.play-click__button:not(:active):hover, .play-click__button:not(:active):focus {
		background-color: hsla(0, 0%, 100%, 0.25);
	}

	.play-click__button:focus-visible {
		outline-offset: 5px;
		outline: 2px solid royalblue;
	}

	.play-click__button > svg {
		height: 150px;
		aspect-ratio: 1/1;
		max-height: 100%;
	}
`,{I:Ot}=ut,Dt=()=>document.createComment(""),Lt=(t,e,i)=>{var s;const n=t._$AA.parentNode,o=void 0===e?t._$AB:e._$AA;if(void 0===i){const e=n.insertBefore(Dt(),o),s=n.insertBefore(Dt(),o);i=new Ot(e,s,t,t.options)}else{const e=i._$AB.nextSibling,r=i._$AM,a=r!==t;if(a){let e;null==(s=i._$AQ)||s.call(i,t),i._$AM=t,void 0!==i._$AP&&(e=t._$AU)!==r._$AU&&i._$AP(e)}if(e!==o||a){let t=i._$AA;for(;t!==e;){const e=t.nextSibling;n.insertBefore(t,o),t=e}}}return i},Bt=(t,e,i=t)=>(t._$AI(e,i),t),Ft={},Rt=t=>{var e;null==(e=t._$AP)||e.call(t,!1,!0);let i=t._$AA;const s=t._$AB.nextSibling;for(;i!==s;){const t=i.nextSibling;i.remove(),i=t}},Nt=1,Wt=2,jt=t=>(...e)=>({_$litDirective$:t,values:e});let Ut=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};const Ht=(t,e)=>{var i;const s=t._$AN;if(void 0===s)return!1;for(const t of s)null==(i=t._$AO)||i.call(t,e,!1),Ht(t,e);return!0},zt=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===(null==i?void 0:i.size))},qt=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),Gt(e)}};function Qt(t){void 0!==this._$AN?(zt(this),this._$AM=t,qt(this)):this._$AM=t}function Yt(t,e=!1,i=0){const s=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(e)if(Array.isArray(s))for(let t=i;t<s.length;t++)Ht(s[t],!1),zt(s[t]);else null!=s&&(Ht(s,!1),zt(s));else Ht(this,t)}const Gt=t=>{t.type==Wt&&(null!=t._$AP||(t._$AP=Yt),null!=t._$AQ||(t._$AQ=Qt))};class Xt extends Ut{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),qt(this),this.isConnected=t._$AU}_$AO(t,e=!0){var i,s;t!==this.isConnected&&(this.isConnected=t,t?null==(i=this.reconnected)||i.call(this):null==(s=this.disconnected)||s.call(this)),e&&(Ht(this,t),zt(this))}setValue(t){if(void 0===this._$Ct.strings)this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}const Kt=()=>new Zt;class Zt{}const Jt=new WeakMap,te=jt(class extends Xt{render(t){return K}update(t,[e]){var i;const s=e!==this.Y;return s&&void 0!==this.Y&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.Y=e,this.ht=null==(i=t.options)?void 0:i.host,this.rt(this.ct=t.element)),K}rt(t){var e;if(this.isConnected||(t=void 0),"function"==typeof this.Y){const i=null!=(e=this.ht)?e:globalThis;let s=Jt.get(i);void 0===s&&(s=new WeakMap,Jt.set(i,s)),void 0!==s.get(this.Y)&&this.Y.call(this.ht,void 0),s.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){var t,e,i;return"function"==typeof this.Y?null==(e=Jt.get(null!=(t=this.ht)?t:globalThis))?void 0:e.get(this.Y):null==(i=this.Y)?void 0:i.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),ee=jt(class extends Ut{constructor(t){var e;if(super(t),t.type!==Nt||"class"!==t.name||(null==(e=t.strings)?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var i,s;if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null==(i=this.nt)?void 0:i.has(t))&&this.st.add(t);return this.render(e)}const n=t.element.classList;for(const t of this.st)t in e||(n.remove(t),this.st.delete(t));for(const t in e){const i=!!e[t];i===this.st.has(t)||(null==(s=this.nt)?void 0:s.has(t))||(i?(n.add(t),this.st.add(t)):(n.remove(t),this.st.delete(t)))}return X}}),ie=G`
	<svg
		class="spinner"
		viewBox="0 0 100 100"
		preserveAspectRatio="xMidYMid"
	>
		<path
			d="M14 50A36 36 0 0 0 86 50A36 38.4 0 0 1 14 50" fill="#AAA"
			stroke="none"
		>
			<animateTransform
				attributeName="transform"
				type="rotate"
				dur="1.4s"
				repeatCount="indefinite"
				keyTimes="0;1"
				values="0 50 51.2;360 50 51.2"
			></animateTransform>
		</path>
	</svg>
`;let se=!1,ne="development",oe=2,re=3,ae=10,le=3,he=10,de=10,ce=.1,ue=30;const pe=void 0!==window.IS_TEST_ENV;try{ne="production",se=!0,oe=Number("2"),re=Number("3"),ae=Number("10"),le=Number("10"),he=Number("15"),de=Number("10"),ce=Number("3"),ue=Number("15")}catch(t){}const fe=u`
	.debug__container {
		display: grid;
		grid-auto-flow: column;
		gap: 5px;
		position: absolute;
		right: 0;
		top: 0;
		z-index: 10000;
	}

	.debug__title{
		font-size: 50%;
		padding: 5px;
		font-weight: bold;
		color: white;
		background-color: chocolate;
	}

	.debug__sound{
		font-size: 50%;
		padding: 5px;
		font-weight: bold;
		color: white;
		background-color: red;
	}

	.debug__sound.on{
		background-color: green;
	}

	.debug__skip{
		font-size: 50%;
		padding: 5px;
		background-color: DarkSlateBlue;
		font-weight: bold;
		color: white;
	}
`,me=u`
	:host(:not(.wrapper)) {
		position: absolute;
		left: 0px;
		right: 0px;
		bottom: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
		user-select: none;
		font-family: system-ui;
	}

	:host(:not(.debug-view)&.wrapper) {
		margin-left: 25px;
	}

	:host(:not(.debug-view):not(.wrapper)) {
		overflow: hidden;
	}

	:host(:not(.debug-view):not(.wrapper).black-screen) {
		background-color: black;
	}

	.spinner{
		background: none;
		display: block;
		shape-rendering: auto;
		width: 20%;
		height: 20%;
		position: absolute;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		z-index: 100;
	}

	.video__control-volume {
		position: absolute;
		padding: 5px;
		border-radius: 50%;
		right: 15px;
		bottom: 15px;
		width: 24px;
		height: 24px;
		display: grid;
		place-content: center;
		background-color: hsla(0, 0%, 0%, 0.5);
		transition: background-color .25s linear;
	}

	.video__control-volume:hover {
		background-color: hsla(0, 0%, 0%, 0.75);
	}

	#main-container {
		position: relative;
		width: 100%;
		height: 100%;
	}
`,ve=u`
	:host(.debug-view){
		display: grid;
		grid-template-rows: min-content auto;
		gap: 5px;
		padding: 5px;
	}
	:host(.debug-view.active) {
		background-color: #51dd0076;
	}

	:host(:not(.debug-view)){
		position: absolute;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
		opacity: 0;
		z-index: 1;
	}

	:host(.watermark){
		&:before {
			content: attr(idad);
			position: absolute;
			left: 5px;
			bottom: 10px;
			font-weight: 500;
			color: #c3c3c3;
			text-shadow: 0px 0px 2px #262626;
			font-size: 14px;
			pointer-events: none;
			z-index: 99999;
		}
	}

	:host(:not(.debug-view).active){
		opacity: 1;
		z-index: 2;
	}

	.title__container {
		display: inline-grid;
		grid-auto-flow: column;
		grid-template-columns: max-content;
		gap: 5px;
		font-size: 75%;
	}

	.title__container > div {
		padding: 2px 5px;
	}

	.title__class {
		background-color: #250000;
		color: white;
	}

	.title__id {
		background-color: #c2c2c2;
		color: black;
	}

	ut-player-ad-vpaid {
		--debug-max-width: 500px;
	}

	button {
		font-size: 90%;
	}
`,ge=u``;class ye{constructor(){this.events={}}emit(t,e){const i=this.events[t];i&&i.forEach((t=>{t.call(null,e)}))}subscribe(t,e){var i;return this.events[t]||(this.events[t]=[]),null==(i=this.events[t])||i.push(e),()=>{var i;this.events[t]=null==(i=this.events[t])?void 0:i.filter((t=>e!==t))}}}const be=(t,e=!1)=>new Promise((i=>{try{const s=new XMLHttpRequest;s.open("GET",t,!0),e&&(s.withCredentials=!0),s.onload=()=>{404!==s.status?s.status>=200&&s.status<300?i("success"):i("fail"):i("cors-possible")},s.onerror=()=>{i("cors-possible")},s.send()}catch(t){i("fail")}})),we=async(t,e)=>{const i=t.replace(/\[ERRORCODE\]/,e.toString());return be(i)},Ae=async(t,e="",i=!1,s=!1)=>{if(!i){const i=await be(t,s);if("success"===i)return!0;if("fail"===i)return e&&await we(e,948),!1;e&&await we(e,949)}const n=await(t=>new Promise((e=>{const i=document.createElement("img");i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.setAttribute("src",t),i.setAttribute("height","1px"),i.setAttribute("width","1px")})))(t);return!n&&e&&await we(e,950),n};class ke extends ft{constructor(t,e){super(),this.debugConsoleElement=!1,this.debugView=!1,this._consoleTitle=t,this.consoleColor=e}get consoleTitle(){return`%c${this._consoleTitle}`}get cssTitle(){return`background-color: ${this.consoleColor}; padding: 5px; color: white; border-radius: 3px; font-weight: 400;`}debugConsole(t){console.log(this.consoleTitle,this.cssTitle,t)}debugConsoleGroup(t,e){console.groupCollapsed(this.consoleTitle,this.cssTitle,e),t(),console.groupEnd()}debug(t,e){if(this.debugConsoleElement){if(!t)return this.debugConsole(e);this.debugConsoleGroup(t,e)}}}const _e=t=>new Promise((e=>{setTimeout(e,t)})),Te=(t,e=document.body)=>{try{if(window.base64AuditFired089)return!0;const i=(t=>{const e=document.createElement("div");e.innerHTML=t.trim();const i=e.querySelector("script");return i?i.getAttribute("src"):null})(window.atob(t));if(console.log("AUDIT SRC",i,e),!i)return!1;const s=document.createElement("script");return s.type="text/javascript",s.src=i,s.async=!0,document.body.appendChild(s),window.base64AuditFired089=!0,!0}catch(t){return console.log("adImpressionAudit","Error"),!1}};var Ee,Pe,Se,xe,Ce,Me,$e=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,Ie=t=>{throw TypeError(t)},Oe=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?Ve(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&$e(e,i,o),o},De=(t,e,i)=>e.has(t)||Ie("Cannot "+i),Le=(t,e,i)=>(De(t,e,"read from private field"),e.get(t)),Be=(t,e,i)=>e.has(t)?Ie("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Fe=(t,e,i,s)=>(De(t,e,"write to private field"),e.set(t,i),i),Re=(t,e,i)=>(De(t,e,"access private method"),i);let Ne=class extends ke{constructor(){super("Player / AD Block","DarkSlateGray"),Be(this,Se),this.emitter=new ye,this.clickDelayToNext=0,this.clickCount=0,this.errorCodeFired=[],this.idAd="",this.played=!1,this.options={id:"",playAvailable:!0,parallel:!1,parallelMode:!1,adLoaded:!1,isPartnerVPAID:!1,wrapperCount:0,wrapperFollowAdditonalWrappers:!0,wrapperAllowMultipleAds:!0,wrapperFallbackOnNoAd:!1,debugView:!1,debugAd:!1,debugAdBlock:!1,debugAdMedia:!1,debugAdVPAID:!1,VPAIDTimeout:0,volume:!1,visibility:0,pxIMG:!1,pxWithCredentials:!1,blockBadVPAID:!0,vastInspectorMode:!1,blackScreen:!1,block2LVLDomains:[],imp1_delay:0,impn_delay:0,watermark:!1,origins:[]},this.adBlockCompleteFired=!1,this.adBlockFinished=!1,this.adBlock=null,this.element=null,Be(this,Ee,""),Be(this,Pe,!1)}async init(t,e){var i,s;this.options=Object.assign(this.options,t),this.options.id=this.options.id?`${this.options.id} -> ${e.id}`:e.id,"wrapper"==e.type&&(this.options.wrapperFollowAdditonalWrappers=e.followAdditonalWrappers,this.options.wrapperAllowMultipleAds=e.allowMultipleAds,this.options.wrapperFallbackOnNoAd=e.fallbackOnNoAd),this.debugView=this.options.debugView,this.debugConsoleElement=this.options.debugAdBlock,this.adBlock=e,(null==(s=null==(i=this.adBlock)?void 0:i.event.audit)?void 0:s.length)&&Fe(this,Ee,this.adBlock.event.audit[0]),this.debug((()=>{console.dir(this.options),console.dir(this.adBlock)}),"init ad-block")}childElementType(){var t,e,i;return"wrapper"===(null==(t=this.adBlock)?void 0:t.type)?"ut-player-ad":(null==(e=this.adBlock)?void 0:e.vpaid)&&!(null==(i=this.adBlock)?void 0:i.video)?"ut-player-ad-block-vpaid":"ut-player-ad-block-media"}async clickHandler(t){if(!(this.clickDelayToNext||this.clickCount>=oe))for(this.clickCount+=1,window.open(t,"_blank"),this.clickDelayToNext=re;this.clickDelayToNext;)await _e(1e3),this.clickDelayToNext-=1}getFirstElement(t){if(t){const e=t.querySelector("*:first-child");if(e){if(e.clientWidth)return e;if(e.shadowRoot)return this.getFirstElement(e.shadowRoot)}}return null}getWidth(){const t=this.getFirstElement(this.shadowRoot);return t?t.clientWidth:-1}getHeight(){const t=this.getFirstElement(this.shadowRoot);return t?t.clientHeight:-1}globalOutEventHandler(t){this.debug((()=>{console.log(t)}),"globalEventReceived"),t.events.forEach((t=>{var e,i;if("complete"===t.event&&(this.adBlockCompleteFired=!0),"ClickThrough"===t.event&&"string"==typeof t.data&&t.data.startsWith("http"))return this.clickHandler(t.data);let s=null==(e=this.adBlock)?void 0:e.event[t.event];if(!s)return;if("ClickThrough"===t.event)return this.clickHandler(s[0]);const n=this.options.visibility;if("Impression"===t.event&&Le(this,Ee)&&!Le(this,Pe)&&Fe(this,Pe,Te(Le(this,Ee),this.renderRoot)),s=[...s.map((t=>t.replace(/\(visibility\)/,n.toString()).replace(/\(volume\)/,Number(this.options.volume).toString()).replace(/\(w\)/,Number(this.getWidth()).toString()).replace(/\(h\)/,Number(this.getHeight()).toString())))],"second2"===t.event&&(t.data=n),["Error","errorAdvanced"].includes(t.event)){if("wrapper"===(null==(i=this.adBlock)?void 0:i.type)&&this.adBlock.uriVariables.deduplicateErrors&&t.addValue){if(901===t.addValue||this.errorCodeFired.includes(t.addValue))return;this.errorCodeFired.push(t.addValue)}s=[...s.map((e=>e.replace(/\[ERRORCODE\]/,(t.addValue||"").toString())))]}Re(this,Se,Ce).call(this,{type:"PX_FIRED",data:{value:t.event,pxs:s}}),t.promise.push(...s.map((e=>{var i;const s="Impression"===t.event&&(null==(i=this.adBlock)?void 0:i.event.errorAdvanced)?this.adBlock.event.errorAdvanced[0]:"";return Ae(e,s,this.options.pxIMG,this.options.pxWithCredentials)})))})),this.emitter.emit("globalOut:event",{id:t.id,events:t.events.filter((t=>"ClickThrough"!==t.event))})}async play(){var t;if(this.element=document.createElement(this.childElementType()),this.element&&this.adBlock){this.debugView&&this.element.classList.add("debug-view"),this.element.emitter.subscribe||await _e(500);try{this.element.emitter.subscribe("globalOut:event",(t=>{this.globalOutEventHandler(t)})),this.element.emitter.subscribe("toVastInspector:event",(t=>{Re(this,Se,xe).call(this,t)}))}catch(t){throw t}if(this.played=!0,Re(this,Se,Ce).call(this,{type:"AD_BLOCK_PLAY",data:{id:this.options.id,type:this.adBlock.type}}),"wrapper"===this.adBlock.type){this.options.parallel||Re(this,Se,Me).call(this);const t=this.element;t.classList.add("wrapper");try{await t.init({options:{...this.options,wrapperCount:this.options.wrapperCount+1,pxIMG:this.options.pxIMG||this.adBlock.uriVariables.pxIMG,pxWithCredentials:this.options.pxWithCredentials||this.adBlock.uriVariables.pxWithCredentials,..."boolean"==typeof this.adBlock.uriVariables.blockBadVPAID&&{blockBadVPAID:this.adBlock.uriVariables.blockBadVPAID},...this.adBlock.uriVariables.timeout&&{VPAIDTimeout:this.adBlock.uriVariables.timeout},...this.adBlock.uriVariables.imp1_delay&&{imp1_delay:this.adBlock.uriVariables.imp1_delay},...this.adBlock.uriVariables.impn_delay&&{impn_delay:this.adBlock.uriVariables.impn_delay}},vastUrl:this.adBlock.VASTAdTagURI})}catch(t){throw t}}else{const e=(this.adBlock.vpaid&&(null==(t=this.adBlock)||t.video),this.element);this.options.volume&&e.setAttribute("volume","");try{await e.init(this.adBlock,this.options)}catch(t){throw console.log(t),t}}return await this.element.play(),this.element.remove(),this.played=!1,setTimeout((()=>{this.adBlockFinished=!0,this.requestUpdate()}),500),this.idAd}}startAdAfterAdLoaded(){this.debug(null,"block startAdAfterAdLoaded()"),this.element&&(Re(this,Se,Me).call(this),this.element.startAdAfterAdLoaded())}pause(){this.debug(null,"pause()"),this.element&&this.element.pause()}resume(){this.debug(null,"resume()"),this.element&&this.element.resume()}setVolume(t){this.debug((()=>{console.log("now",this.options.volume,"new",t)}),"setVolume()"),this.options.volume!==t&&(this.options.volume=t,this.element&&this.element.setVolume(this.options.volume))}skip(){this.debug(null,"skip()"),this.element&&this.element.skip()}setVisibility(t){var e;this.options.visibility=t,this.element&&"wrapper"===(null==(e=this.adBlock)?void 0:e.type)&&this.element.setVisibility(t)}debugResizeBlock(){if(this.element){const t="300px"===this.element.style.getPropertyValue("--debug-max-width")?"500px":"300px";this.element.style.setProperty("--debug-max-width",t)}}render(){var t,e;if(!this.adBlock)return G``;const i="wrapper"===this.adBlock.type?G`	<a href="${this.adBlock.VASTAdTagURI}" target="_blank">Wrapper</a>`:G`InLine`,s=this.debugView?G`
				<div>
					<div class="title__container">
						<div class="title__class">Ad Block</div>
						<div class="title__id">#${this.idAd}</div>
						<div class="title__type">${i}</div>
						${"wrapper"!==(null==(t=this.adBlock)?void 0:t.type)&&(null==(e=this.adBlock)?void 0:e.vpaid)?G`
								<button
									.disabled="${!this.played}"
									@click=${this.debugResizeBlock}
								>
									Resize
								</button>`:G``}
					</div>
				</div>`:G``,n=this.debugView||this.played||!this.adBlockFinished?G`${this.element}`:G``;return G`
			${s}
			${n}
		`}};Ee=new WeakMap,Pe=new WeakMap,Se=new WeakSet,xe=function(t){t.chain.unshift(this.options.id.toString()),this.emitter.emit("toVastInspector:event",t)},Ce=function(t){if(!this.options.vastInspectorMode)return;const e={chain:[],event:t};Re(this,Se,xe).call(this,e)},Me=function(){var t;!this.options.wrapperCount&&"wrapper"===(null==(t=this.adBlock)?void 0:t.type)&&this.adBlock.uriVariables.toSdk&&this.emitter.emit("globalOut:event",{id:this.idAd,events:[{event:"info",promise:[],data:this.adBlock.uriVariables.toSdk}]})},Ne.styles=[ge,ve],Oe([bt({type:String})],Ne.prototype,"idAd",2),Oe([bt({type:Boolean,reflect:!0})],Ne.prototype,"played",2),Oe([wt()],Ne.prototype,"options",2),Ne=Oe([vt("ut-player-ad-block")],Ne);const We=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",je=new RegExp(`^${`[${We}][${`${We}\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040`}]*`}$`),Ue=function(t,e){const i=[];let s=e.exec(t);for(;s;){const n=[],o=s.length;for(let t=0;t<o;t+=1)n.push(s[t]);i.push(n),s=e.exec(t)}return i},He=function(t){const e=je.exec(t);return!(null==e)},ze=function(t){return void 0!==t},qe=function(t){return 0===Object.keys(t).length},Qe=function(t){return ze(t)?t:""},Ye=function(t,e,i){var s={};if(!t)return e;for(let n=0;n<i.length;n+=1)void 0!==t[i[n]]?s[i[n]]=t[i[n]]:s[i[n]]=e[i[n]];return s},Ge=function(t,e,i){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,i):"strict"===e)},Xe=function(t,e,i){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=i,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}},Ke=/^[-+]?0x[a-fA-F0-9]+$/,Ze=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/,Je={hex:!0,leadingZeros:!0,decimalPoint:"."};const ti={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t},stopNodes:[],alwaysCreateTextNode:!1},ei=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"],ii=(t,e,i,s)=>{const n=t.indexOf(e,i);if(-1===n)throw new Error(s);return n+e.length-1},si=(t,e,i)=>{if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&function(t,e={}){if(e=Object.assign({},Je,e),!t||"string"!=typeof t)return t;let i=t.trim();if(void 0!==e.skipLike&&e.skipLike.test(i))return t;if(e.hex&&Ke.test(i))return Number.parseInt(i,16);{const s=Ze.exec(i);if(s){const n=s[2],o=s[3];return 1===n.length&&"."===o[0]?Number(t):!e.leadingZeros&&n.length>0?t:Number(i)}return t}}(t,i)}return ze(t)?t:""},ni=(t,e)=>{if(e.ignoreNameSpace){const e=t.split(":"),i="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=i+e[1])}return t},oi=(t,e,i)=>(e&&(i.trimValues&&(e=e.trim()),e=i.tagValueProcessor(e,t),e=si(e,i.parseNodeValue,i.numParseOptions)),e),ri=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g"),ai=(t,e)=>{if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const i=Ue(t,ri),s=i.length,n={};for(let t=0;t<s;t+=1){const s=ni(i[t][1],e);s.length&&(void 0!==i[t][4]?(e.trimValues&&(i[t][4]=i[t][4].trim()),i[t][4]=e.attrValueProcessor(i[t][4],s),n[e.attributeNamePrefix+s]=si(i[t][4],e.parseAttributeValue,e.numParseOptions)):e.allowBooleanAttributes&&(n[e.attributeNamePrefix+s]=!0))}if(!Object.keys(n).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=n,t}return n}},li=(t,e)=>{let i,s="";for(let n=e;n<t.length;n+=1){let e=t[n];if(i)e===i&&(i="");else if('"'===e||"'"===e)i=e;else{if(">"===e)return{data:s,index:n};"\t"===e&&(e=" ")}s+=e}},hi=(t,e,i)=>({err:{code:t,msg:e,line:i}}),di=(t,e)=>{for(var i=e;e<t.length;e+=1)if("?"!=t[e]&&" "!=t[e]);else{var s=t.substr(i,e-i);if(e>5&&"xml"===s)return hi("InvalidXml","XML declaration allowed only at the start of the document.",ui(t,e));if("?"==t[e]&&">"==t[e+1]){e+=1;break}}return e},ci=(t,e)=>{if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e+=1)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let i=1;for(e+=8;e<t.length;e+=1)if("<"===t[e])i+=1;else if(">"===t[e]&&(i-=1,0===i))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e+=1)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e},ui=(t,e)=>t.substring(0,e).split(/\r?\n/).length,pi=(t,e)=>{let i="",s="",n=!1;for(;e<t.length;e+=1){if('"'===t[e]||"'"===t[e])if(""===s)s=t[e];else{if(s!==t[e])continue;s=""}else if(">"===t[e]&&""===s){n=!0;break}i+=t[e]}return""===s&&{value:i,index:e,tagClosed:n}},fi=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g"),mi=(t,e)=>t.indexOf(e)+e.length,vi=(t,e)=>{const i=Ue(t,fi),s={};for(let n=0;n<i.length;n+=1){if(0===i[n][1].length)return hi("InvalidAttr",`Attribute '${i[n][2]}' has no space in starting.`,mi(t,i[n][0]));if(void 0===i[n][3]&&!e.allowBooleanAttributes)return hi("InvalidAttr",`boolean attribute '${i[n][2]}' is not allowed.`,mi(t,i[n][0]));const o=i[n][2];if(!He(o))return hi("InvalidAttr",`Attribute '${o}' is an invalid name.`,mi(t,i[n][0]));if(s.hasOwnProperty(o))return hi("InvalidAttr",`Attribute '${o}' is repeated.`,mi(t,i[n][0]));s[o]=1}return!0},gi=(t,e)=>{if(";"===t[e+=1])return-1;if("#"===t[e])return((t,e)=>{let i=/\d/;for("x"===t[e]&&(e+=1,i=/[\da-fA-F]/);e<t.length;e+=1){if(";"===t[e])return e;if(!t[e].match(i))break}return-1})(t,e+=1);let i=0;for(;e<t.length;e+=1,i+=1)if(!(t[e].match(/\w/)&&i<20)){if(";"===t[e])break;return-1}return e},yi=["allowBooleanAttributes"],bi=function(t,e,i){const s={};if(!e.alwaysCreateTextNode&&(!t.child||qe(t.child))&&(!t.attrsMap||qe(t.attrsMap)))return ze(t.val)?t.val:"";if(ze(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)){const n=Ge(t.tagname,e.arrayMode,i);s[e.textNodeName]=n?[t.val]:t.val}!function(t,e,i){if(e){const s=Object.keys(e),n=s.length;for(let o=0;o<n;o+=1)t[s[o]]="strict"===i?[e[s[o]]]:e[s[o]]}}(s,t.attrsMap,e.arrayMode);const n=Object.keys(t.child);for(let o=0;o<n.length;o+=1){const r=n[o];if(t.child[r]&&t.child[r].length>1){s[r]=[];for(let i in t.child[r])t.child[r].hasOwnProperty(i)&&s[r].push(bi(t.child[r][i],e,r))}else{const n=bi(t.child[r][0],e,r),o=!0===e.arrayMode&&"object"==typeof n||Ge(r,e.arrayMode,i);s[r]=o?[n]:n}}return s},wi=["Impression","Error"],Ai=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","fullscreen","exitFullscreen","close","acceptInvitation","expand","collapse","closeLinear","skip"],ki=["second2","errorAdvanced","audit"],_i=["ClickThrough","ClickTracking","CustomClick"],Ti={creativeView:"vast_creativeView",Impression:"vast_Impression",start:"vast_start",skip:"vast_skipAd",firstQuartile:"vast_firstQuartile",midpoint:"vast_midpoint",thirdQuartile:"vast_thirdQuartile",complete:"vast_complete",ClickTracking:"vast_click",resume:"vast_resume",pause:"vast_pause"},Ei=["application/javascript","application/x-javascript"],Pi=["video/3gpp","video/3gpp2","video/3gp2","video/mpeg","video/mp4","video/ogg","video/quicktime","video/webm",...Ei],Si=(t,e)=>t.includes(e),xi=(t,e)=>{const i={};e&&Object.assign(i,e);const s=t.startsWith("http")?t:"https://example.com"+t;return new URL(s).searchParams.forEach(((t,e)=>{switch(e){case"imp1_delay":const s=Number(t);isNaN(s)||(i.imp1_delay=s);break;case"impn_delay":const n=Number(t);isNaN(n)||(i.impn_delay=n);break;case"timeout":i.timeout=Number(t);break;case"px_img":i.pxIMG=!!Number(t);break;case"wc":i.pxWithCredentials=!!Number(t);break;case"blk":i.blockBadVPAID=!!Number(t);break;case"derr":i.deduplicateErrors=!!Number(t);break;default:switch(void 0===i.toSdk&&(i.toSdk={}),e){case"be":i.toSdk.billingEvent=Number(t);break;case"fbeo":i.toSdk.fbeo=!!Number(t);break;case"pb":i.toSdk.postBack=!!Number(t)}}})),i},Ci=(t,e,i,s)=>{var n,o,r,a,l,h,d,c,u,p,f,m,v,g,y;if(!(null==t?void 0:t.Wrapper)&&!(null==t?void 0:t.InLine)||(null==t?void 0:t.Wrapper)&&(null==t?void 0:t.InLine))return 101;const b=(null==t?void 0:t.Wrapper)||(null==t?void 0:t.InLine);if("object"!=typeof b)return 101;const w=document.createElement("ut-player-ad-block");e.debugView&&w.classList.add("debug-view");const A={type:(null==t?void 0:t.Wrapper)?"wrapper":"inline",event:{},element:w,finish:!1,...(null==(n=null==t?void 0:t.attr)?void 0:n.id)&&{id:null==(o=null==t?void 0:t.attr)?void 0:o.id}||{id:Math.random().toString(36)},...!isNaN(Number(null==(r=null==t?void 0:t.attr)?void 0:r.sequence))&&{sequence:Number(null==(a=null==t?void 0:t.attr)?void 0:a.sequence)}};A.id&&(A.element.setAttribute("idAd",A.id.toString()),e.watermark&&!e.wrapperCount&&A.element.classList.add("watermark"));try{wi.forEach((t=>{if(t in b){const e=b[t].filter((t=>"string"==typeof t||(!(void 0===t.cdata||!t.cdata||!t.cdata.trim())||!(void 0===t.undefined||!Array.isArray(t.undefined)||!t.undefined.length)))).map((t=>"string"==typeof t?t.trim():void 0!==t.cdata&&t.cdata.trim()?t.cdata.trim():t.undefined[0].toString().trim()));""!==e[0]&&(A.event[t]=e)}}))}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / EVENT_VARIANT_MAIN"),t}try{(null==(l=null==b?void 0:b.Extensions)?void 0:l.Extension)&&ki.forEach((t=>{var e,i;const s=b.Extensions.Extension.filter((e=>{var i;return(null==(i=null==e?void 0:e.attr)?void 0:i.type)===t}));s.length&&(A.event[t]=[],s.forEach((e=>{var i,s;void 0!==e.cdata&&e.cdata?null==(i=A.event[t])||i.push(e.cdata.toString().trim()):void 0!==e.undefined&&Array.isArray(e.undefined)&&e.undefined.length&&(null==(s=A.event[t])||s.push(e.undefined[0].toString().trim()))})),"errorAdvanced"!==t||(null==(e=A.event[t])?void 0:e.length)||((null==(i=A.event.Error)?void 0:i.length)?A.event[t]=[...A.event.Error]:delete A.event[t]))}))}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / EVENT_VARIANT_EXTENSIONS"),t}let k;if(console.log("addErrorFromSdk",s),s&&s.error&&(Array.isArray(A.event.Error)?A.event.Error.push(s.error.trim()):A.event.Error=[s.error.trim()],s.errorAdvanced&&(Array.isArray(A.event.errorAdvanced)?A.event.errorAdvanced.push(s.error.trim()):A.event.errorAdvanced=[s.error.trim()]),console.log("Добавленные ошибки",s)),(null==(h=null==b?void 0:b.Creatives)?void 0:h.Creative)&&Array.isArray(b.Creatives.Creative)){if(k=b.Creatives.Creative.find((t=>"Linear"in t)),k){const t=null==k?void 0:k.Linear;try{(null==(d=null==t?void 0:t.TrackingEvents)?void 0:d.Tracking)&&Ai.forEach((e=>{const i=t.TrackingEvents.Tracking.filter((t=>t.attr.event===e));i.length&&(A.event[e]=[],i.forEach((t=>{var i,s;void 0!==t.cdata&&t.cdata.trim()?null==(i=A.event[e])||i.push(t.cdata.toString().trim()):void 0!==t.undefined&&Array.isArray(t.undefined)&&t.undefined.length&&(null==(s=A.event[e])||s.push(t.undefined[0].toString().trim()))})))}))}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / EVENT_VARIANT_TRACKINGS_EVENTS"),t}try{(null==t?void 0:t.VideoClicks)&&_i.forEach((e=>{if(e in t.VideoClicks)if("ClickThrough"===e){const i=Array.isArray(t.VideoClicks[e])?t.VideoClicks[e][0]:t.VideoClicks[e];A.event[e]=void 0===i.cdata?[i.toString().trim()]:[i.cdata.toString().trim()]}else A.event[e]=t.VideoClicks[e].filter((t=>!!t)).map((t=>void 0!==t.cdata?t.cdata.toString().trim():t.toString().trim()))}))}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / EVENT_VARIANT_LINEAR_VIDEO_CLICKS"),t}}}else if("wrapper"!==A.type)return 101;if("wrapper"===A.type){if(!(null==(c=null==b?void 0:b.VASTAdTagURI)?void 0:c.cdata)&&"string"!=typeof(null==b?void 0:b.VASTAdTagURI))return 101;try{const t=!e.wrapperCount||e.wrapperFollowAdditonalWrappers,s=!e.wrapperCount||e.wrapperAllowMultipleAds,n=!!e.wrapperCount&&e.wrapperFallbackOnNoAd,o="string"==typeof b.VASTAdTagURI?b.VASTAdTagURI.trim():b.VASTAdTagURI.cdata.trim();return{...A,type:"wrapper",followAdditonalWrappers:void 0!==(null==(u=null==b?void 0:b.attr)?void 0:u.followAdditonalWrappers)?null==(p=null==b?void 0:b.attr)?void 0:p.followAdditonalWrappers:t,allowMultipleAds:void 0!==(null==(f=null==b?void 0:b.attr)?void 0:f.allowMultipleAds)?null==(m=null==b?void 0:b.attr)?void 0:m.allowMultipleAds:s,fallbackOnNoAd:void 0!==(null==(v=null==b?void 0:b.attr)?void 0:v.fallbackOnNoAd)?null==(g=null==b?void 0:b.attr)?void 0:g.fallbackOnNoAd:n,VASTAdTagURI:o,uriVariables:xi(o,i)}}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / WRAPPER_SPECIAL"),t}}const _={...A,type:"inline",duration:1e3*ue,vpaid:!1,video:!1,media:[]},T=null==k?void 0:k.Linear;if(!T)return _.errorCode=200,_;try{if(T.Duration){const t=("string"==typeof T.Duration?T.Duration:"object"==typeof T.Duration&&T.Duration.cdata?T.Duration.cdata:"").match(/^(\d\d):(\d\d):(\d\d)\.?(\d\d\d)?$/i);if(t){const e="00"!==t[1]?3600*Number(t[1]):0,i="00"!==t[2]?60*Number(t[2]):0,s="00"!==t[3]?Number(t[3]):0,n=e+i+s+(t[4]&&"000"!==t[4]?Number(t[4])/1e3:0);n&&(_.duration=1e3*n)}}}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / duration"),t}try{if((null==(y=T.MediaFiles)?void 0:y.MediaFile)&&T.MediaFiles.MediaFile.length){_.media=(t=>{const e=[];return Array.isArray(t)?(t.forEach((t=>{var i,s,n,o,r,a,l,h,d,c,u,p,f,m,v,g,y,b,w,A,k,_,T;const E=null!=(s=null==(i=null==t?void 0:t.attr)?void 0:i.type)?s:"";if(Si(Pi,E)){const i=t.cdata?t.cdata.trim():void 0===(P=t.undefined)?"":"string"==typeof P?P.trim():P.length?P[0].trim():"",s=null!=(o=null==(n=null==t?void 0:t.attr)?void 0:n.delivery)?o:"progressive",S=(null==(r=null==t?void 0:t.attr)?void 0:r.width)?t.attr.width:640,x=(null==(a=null==t?void 0:t.attr)?void 0:a.height)?t.attr.height:360;if(Si(Ei,E)){const n={type:E,href:i,delivery:s,width:S,height:x,setting:{apiFramework:"VPAID"===(null==(l=null==t?void 0:t.attr)?void 0:l.apiFramework)&&"VPAID"}};n.href&&n.setting.apiFramework&&e.push(n)}else{const n={type:null!=(d=null==(h=null==t?void 0:t.attr)?void 0:h.type)?d:"video/mp4",href:i,delivery:s,width:S,height:x,setting:{}};(null==(c=null==t?void 0:t.attr)?void 0:c.codec)&&(n.setting.codec=null==(u=null==t?void 0:t.attr)?void 0:u.codec),(null==(p=null==t?void 0:t.attr)?void 0:p.id)&&(n.setting.id=null==(f=null==t?void 0:t.attr)?void 0:f.id),(null==(m=null==t?void 0:t.attr)?void 0:m.bitrate)&&(n.setting.bitrate=null==(v=null==t?void 0:t.attr)?void 0:v.bitrate),(null==(g=null==t?void 0:t.attr)?void 0:g.minBitrate)&&(n.setting.minBitrate=null==(y=null==t?void 0:t.attr)?void 0:y.minBitrate),(null==(b=null==t?void 0:t.attr)?void 0:b.maxBitrate)&&(n.setting.maxBitrate=null==(w=null==t?void 0:t.attr)?void 0:w.maxBitrate),(null==(A=null==t?void 0:t.attr)?void 0:A.scalable)&&(n.setting.scalable=!!(null==(k=null==t?void 0:t.attr)?void 0:k.scalable)),(null==(_=null==t?void 0:t.attr)?void 0:_.maintainAspectRatio)&&(n.setting.maintainAspectRatio=!!(null==(T=null==t?void 0:t.attr)?void 0:T.maintainAspectRatio)),n.href&&e.push(n)}}var P})),e.sort(((t,e)=>t.width<e.width?1:t.width>e.width?-1:t.type<e.type?1:t.type===e.type?0:-1))):e})(T.MediaFiles.MediaFile);_.media.find((t=>!Si(Ei,t.type)))&&(_.video=!0)}}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / media"),t}try{const t=_.media.find((t=>Si(Ei,t.type)));t&&(_.vpaid=!0,T.AdParameters&&("string"==typeof T.AdParameters?t.setting.adParameters=T.AdParameters.trim():"object"==typeof T.AdParameters&&("string"==typeof T.AdParameters.cdata?t.setting.adParameters=T.AdParameters.cdata.trim():"string"==typeof T.AdParameters.undefined&&(t.setting.adParameters=T.AdParameters.undefined.trim()))))}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / VPAID"),t}return _},Mi={attributeNamePrefix:"",attrNodeName:"attr",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,cdataTagName:"cdata",supressEmptyNode:!0,cdataPositionChar:"\\c",parseTrueNumberOnly:!1,arrayMode:/^Ad$|^Creative$|^MediaFile$|^Extension$|^Tracking$|^Impression$|^ClickTracking$|^CustomClick$|^Error$/},$i=(t,e,i,s)=>{var n,o,r,a,l,h,d;try{const e=((t,e)=>{e=Ye(e,ti,yi);const i=[];let s=!1,n=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let o=0;o<t.length;o+=1)if("<"===t[o]&&"?"===t[o+1]){if(o+=2,o=di(t,o),o.err)return o}else{if("<"!==t[o]){if(" "===t[o]||"\t"===t[o]||"\n"===t[o]||"\r"===t[o])continue;return hi("InvalidChar",`char '${t[o]}' is not expected.`,ui(t,o))}if(o+=1,"!"===t[o]){o=ci(t,o);continue}{let r=!1;"/"===t[o]&&(r=!0,o+=1);let a="";for(;o<t.length&&">"!==t[o]&&" "!==t[o]&&"\t"!==t[o]&&"\n"!==t[o]&&"\r"!==t[o];o+=1)a+=t[o];if(a=a.trim(),"/"===a[a.length-1]&&(a=a.substring(0,a.length-1),o-=1),!He(a)){let e;return e=0===a.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":`Tag '${a}' is an invalid name.`,hi("InvalidTag",e,ui(t,o))}const l=pi(t,o);if(!1===l)return hi("InvalidAttr",`Attributes for '${a}' have open quote.`,ui(t,o));let h=l.value;if(o=l.index,"/"===h[h.length-1]){h=h.substring(0,h.length-1);const i=vi(h,e);if(!0!==i)return hi(i.err.code,i.err.msg,ui(t,o-h.length+i.err.line));s=!0}else if(r){if(!l.tagClosed)return hi("InvalidTag",`Closing tag '${a}' doesn't have proper closing.`,ui(t,o));if(h.trim().length>0)return hi("InvalidTag",`Closing tag '${a}' can't have attributes or invalid starting.`,ui(t,o));{const e=i.pop();if(a!==e)return hi("InvalidTag",`Closing tag '${e}' is expected inplace of '${a}'.`,ui(t,o));0==i.length&&(n=!0)}}else{const r=vi(h,e);if(!0!==r)return hi(r.err.code,r.err.msg,ui(t,o-h.length+r.err.line));if(!0===n)return hi("InvalidXml","Multiple possible root nodes found.",ui(t,o));i.push(a),s=!0}for(o+=1;o<t.length;o+=1)if("<"===t[o]){if("!"===t[o+1]){o+=1,o=ci(t,o);continue}if("?"!==t[o+1])break;if(o=di(t,o+1),o.err)return o}else if("&"===t[o]){const e=gi(t,o);if(-1==e)return hi("InvalidChar","char '&' is not expected.",ui(t,o));o=e}"<"===t[o]&&(o-=1)}}return s?!(i.length>0)||hi("InvalidXml",`Invalid '${JSON.stringify(i,null,4).replace(/\r?\n/g,"")}' found.`,1):hi("InvalidXml","Start tag expected.",1)})(t.replace(/\n/g,"").replace(/\t/g,""));if("object"==typeof e)return console.log("validate VAST error",e),100}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / validateXml"),console.log("validate VAST error e",t),t}const c=function(t,e){t=t.replace(/\r\n?/g,"\n"),e=Ye(e,ti,ei);const i=new Xe("!xml");let s=i,n="";for(let i=0;i<t.length;i+=1)if("<"===t[i])if("/"===t[i+1]){const o=ii(t,">",i,"Closing Tag is not closed.");let r=t.substring(i+2,o).trim();if(e.ignoreNameSpace){const t=r.indexOf(":");-1!==t&&(r=r.substr(t+1))}s&&(s.val?s.val=`${Qe(s.val)}${oi(r,n,e)}`:s.val=oi(r,n,e)),e.stopNodes.length&&e.stopNodes.includes(s.tagname)&&(s.child=[],null==s.attrsMap&&(s.attrsMap={}),s.val=t.substr(s.startIndex+1,i-s.startIndex-1)),s=s.parent,n="",i=o}else if("?"===t[i+1])i=ii(t,"?>",i,"Pi Tag is not closed.");else if("!--"===t.substr(i+1,3))i=ii(t,"--\x3e",i,"Comment is not closed.");else if("!D"===t.substr(i+1,2)){const e=ii(t,">",i,"DOCTYPE is not closed.");i=t.substring(i,e).indexOf("[")>=0?t.indexOf("]>",i)+1:e}else if("!["===t.substr(i+1,2)){const o=ii(t,"]]>",i,"CDATA is not closed.")-2,r=t.substring(i+9,o);if(n&&(s.val=`${Qe(s.val)}${oi(s.tagname,n,e)}`,n=""),e.cdataTagName){const t=new Xe(e.cdataTagName,s,r);s.addChild(t),s.val=Qe(s.val)+e.cdataPositionChar,r&&(t.val=r)}else s.val=(s.val||"")+(r||"");i=o+2}else{const o=li(t,i+1);let r=o.data;const a=o.index,l=r.indexOf(" ");let h=r,d=!0;if(-1!==l&&(h=r.substr(0,l).replace(/\s\s*$/,""),r=r.substr(l+1)),e.ignoreNameSpace){const t=h.indexOf(":");-1!==t&&(h=h.substr(t+1),d=h!==o.data.substr(t+1))}if(s&&n&&"!xml"!==s.tagname&&(s.val=`${Qe(s.val)}${oi(s.tagname,n,e)}`),r.length>0&&r.lastIndexOf("/")===r.length-1){"/"===h[h.length-1]?(h=h.substr(0,h.length-1),r=h):r=r.substr(0,r.length-1);const t=new Xe(h,s,"");h!==r&&(t.attrsMap=ai(r,e)),s.addChild(t)}else{const t=new Xe(h,s);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=a),h!==r&&d&&(t.attrsMap=ai(r,e)),s.addChild(t),s=t}n="",i=a}else n+=t[i];return i}(t,Mi),u=bi(c,Mi);if(""===(null==u?void 0:u.nobanner))return 303;if(!(null==(o=null==(n=null==u?void 0:u.VAST)?void 0:n.attr)?void 0:o.version))return 101;const p=Number(null==(a=null==(r=null==u?void 0:u.VAST)?void 0:r.attr)?void 0:a.version);if(isNaN(p)||p<2)return 102;const f={version:p,ad:[]};try{if((null==(l=null==u?void 0:u.VAST)?void 0:l.Error)&&Array.isArray(u.VAST.Error)&&u.VAST.Error.length){const t=u.VAST.Error[0];("string"==typeof t||(null==t?void 0:t.cdata))&&(f.error="string"==typeof t?t.trim():t.cdata.trim())}}catch(t){throw(t instanceof TypeError||t instanceof RangeError||t instanceof EvalError)&&(t.message+=" / VAST-Event-error"),t}if((null==(h=null==u?void 0:u.VAST)?void 0:h.Ad)&&(null==(d=null==u?void 0:u.VAST)?void 0:d.Ad.length)>0){let t=u.VAST.Ad.map((t=>Ci(t,e,i,s)));const n=t.find((t=>"number"==typeof t));if(n)return n;e.wrapperAllowMultipleAds||(t=t.filter((t=>"number"!=typeof t&&void 0===t.sequence)).slice(0,1)),t.forEach((t=>{f.ad.push(t)}))}return f};var Vi,Ii,Oi,Di,Li,Bi,Fi,Ri,Ni,Wi,ji,Ui,Hi,zi,qi,Qi,Yi,Gi,Xi,Ki,Zi,Ji,ts,es,is,ss,ns,os,rs,as,ls,hs,ds,cs,us,ps,fs,ms,vs,gs=Object.defineProperty,ys=Object.getOwnPropertyDescriptor,bs=t=>{throw TypeError(t)},ws=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?ys(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&gs(e,i,o),o},As=(t,e,i)=>e.has(t)||bs("Cannot "+i),ks=(t,e,i)=>(As(t,e,"read from private field"),i?i.call(t):e.get(t)),_s=(t,e,i)=>e.has(t)?bs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ts=(t,e,i,s)=>(As(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),Es=(t,e,i)=>(As(t,e,"access private method"),i);let Ps=class extends ke{constructor(){super("Player / AD","DarkSlateBlue"),_s(this,qi),_s(this,Vi,0),_s(this,Ii,Kt()),this.emitter=new ye,_s(this,Oi,!1),_s(this,Di,!1),_s(this,Li),this.options={id:"",playAvailable:!0,wrapperCount:0,wrapperFollowAdditonalWrappers:!0,wrapperAllowMultipleAds:!0,wrapperFallbackOnNoAd:!1,debugView:!1,debugAd:!1,debugAdBlock:!1,debugAdMedia:!1,debugAdVPAID:!1,VPAIDTimeout:he,volume:!1,adLoaded:!1,parallel:!1,parallelMode:!1,isPartnerVPAID:!1,visibility:0,pxIMG:!1,pxWithCredentials:!1,blockBadVPAID:!0,vastInspectorMode:!1,blackScreen:!1,block2LVLDomains:[],imp1_delay:0,impn_delay:0,watermark:!1,origins:[]},_s(this,Bi,!1),_s(this,Fi,!1),_s(this,Ri,!1),_s(this,Ni,[]),_s(this,Wi,null),_s(this,ji,[]),_s(this,Ui,null),_s(this,Hi),_s(this,zi,!1),this.vastObj=900,this.spinnerStatus=!0,_s(this,ls,((t,e)=>{if(this.debug((()=>{console.log(t.events)}),`globalEventReceived ${e} ${typeof e}`),t.events.find((t=>"adLoaded"===t.event))){if(this.options.parallel||this.options.parallelMode){if(this.options.parallel&&!this.options.wrapperCount&&("string"!=typeof e&&"number"!=typeof e||Es(this,qi,rs).call(this,e),ks(this,Di)))return}else if(!this.options.isPartnerVPAID||ks(this,Oi))return void this.startAdAfterAdLoaded();Ts(this,Di,!0)}if(t.events.find((t=>"start"===t.event||"Impression"===t.event))&&(this.spinnerStatus=!1),t.events.find((t=>"skip"===t.event))&&(Ts(this,Ri,!0),clearTimeout(ks(this,Vi)),this.options.parallel&&ks(this,Ui)&&ks(this,Ui).call(this,null)),t.events.find((t=>"mute"===t.event))&&Es(this,qi,ms).call(this,"mute"),t.events.find((t=>"unmute"===t.event))&&Es(this,qi,ms).call(this,"unmute"),this.options.wrapperCount)this.debug((()=>{console.log(t)}),"globalEventSend"),this.emitter.emit("globalOut:event",t);else{const e=ks(this,ji).find((t=>"play"===t.status));t.events.forEach((t=>{ks(this,Ni).push(...t.promise),e&&"Error"===t.event||Es(this,qi,ps).call(this,t.event,t.data||t.addValue)}))}})),_s(this,vs,(t=>{Es(this,qi,Ji).call(this,{type:"VAST_EVENT_ERROR",data:{errorCode:t}}),ks(this,ls).call(this,{id:this.options.id,events:[{event:"Error",addValue:t,promise:[]}]})})),Ts(this,Hi,new Promise((t=>{Ts(this,Ui,t)})))}get visibility(){return this.options.visibility}async init(t,e,i){t.options&&(this.options=Object.assign(this.options,t.options)),this.options.wrapperCount||Ts(this,Li,i),this.options.parallel&&this.options.wrapperCount&&(this.options.parallel=!1,this.options.parallelMode=!0),this.options.wrapperCount&&this.debug(null,`уровень ${this.options.wrapperCount} подписка`),this.debugView=this.options.debugView,this.debugConsoleElement=this.options.debugAd,this.debug((()=>{console.log("initObj",t),console.log("initObj.vast",t.vast),console.log("addErrorFromSdk",ks(this,Li))}),"init"),this.debugConsoleElement&&(this._consoleTitle+=` ${this.options.wrapperCount}`);let s=t.vast;if(Es(this,qi,Ji).call(this,{type:"VAST_INIT",data:{id:this.options.id.toString(),vastUrl:t.vastUrl||"",vastText:t.vast||""}}),!s&&t.vastUrl){let e=301;try{const i=this.options.wrapperCount<=1&&!this.options.pxWithCredentials;e=await Es(this,qi,ts).call(this,t.vastUrl,i)}catch(t){e=301}this.debug((()=>{console.log(typeof e,!!e),console.log("fetchResult",e)}),"fetch-result"),"number"==typeof e?this.vastObj=e:s=e}if("string"==typeof s){try{this.vastObj=$i(s,this.options,e,ks(this,Li))}catch(t){this.vastObj=100}"number"==typeof this.vastObj?Es(this,qi,Ji).call(this,{type:"VAST_PARSE_FAIL",data:{errorCode:this.vastObj}}):Es(this,qi,Ji).call(this,{type:"VAST_PARSE_SUCCESS",data:{adBlocksIds:ks(this,qi,Yi).map((t=>t.id))}})}return this.debug((()=>{console.log("initObj",t),console.log("options",this.options),console.log("vastObj",this.vastObj),console.log("urlSettingFromSDK",e)}),"init result"),this.options.wrapperCount>=2&&this.options.block2LVLDomains.length&&Ts(this,qi,ks(this,qi,Yi).filter((t=>{let e=0;return"inline"===t.type?t.media.forEach((t=>{Si(Ei,t.type)&&this.options.block2LVLDomains.some((e=>t.href.includes(e)))&&(e=952)})):this.options.block2LVLDomains.some((e=>t.VASTAdTagURI.includes(e)))&&(e=951),e&&this.emitter.emit("globalOut:event",{id:this.options.id,events:[{event:"errorAdvanced",addValue:e,promise:[]}]}),!e})),Gi),this.options}firstUpdated(){if(this.options.wrapperCount||!this.shadowRoot)return;const t=this.shadowRoot.getElementById("main-container");t&&((t,e)=>{let i;const s={root:null,rootMargin:"0px",threshold:Array(101).fill(0).map(((t,e)=>.01*e))};try{i=new IntersectionObserver((t=>{e(Math.round(100*t[t.length-1].intersectionRatio))}),s),i.observe(t)}catch(t){console.log("catch",t),e(100)}})(t,(t=>{this.setVisibility(t)}))}setVisibility(t){this.debug(null,`SET VISIBILITY ${t}`);try{this.options.visibility=t,ks(this,qi,Ki)?ks(this,qi,Yi).forEach((e=>{e.element.setVisibility(t)})):"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.setVisibility(t)}catch(t){}}play(){return new Promise((async t=>{Es(this,qi,es).call(this);try{!ks(this,qi,Yi).length&&"number"!=typeof this.vastObj&&this.vastObj.error&&be(this.vastObj.error)}catch(t){}Ts(this,Fi,!0),ks(this,qi,Ki)?await Es(this,qi,ss).call(this):await Es(this,qi,is).call(this),this.spinnerStatus=!1,Ts(this,Fi,!1),Es(this,qi,Ji).call(this,{type:"VAST_FINISH",data:null}),this.options.wrapperCount||(Es(this,qi,ps).call(this,"finish"),await Promise.all(ks(this,Ni)),this.debug(null,"Promise.all !!!"),Es(this,qi,ps).call(this,"finish_promise")),t("finish")}))}toggleVolume(){this.options.volume=!this.options.volume,Es(this,qi,fs).call(this)}startAdAfterAdLoaded(){this.debug(null,`ad startAdAfterAdLoaded() this.options.parallel ${this.options.parallel}`),Ts(this,Oi,!0),this.options.parallel?Es(this,qi,os).call(this):ks(this,Fi)&&"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.startAdAfterAdLoaded()}setVolume(t){this.debug((()=>{console.log("now",this.options.volume,"new",t)}),"setVolume()"),this.options.volume!==t&&(this.options.volume=t,Es(this,qi,fs).call(this))}skip(){this.debug(null,"skip()");try{this.options.wrapperCount||Ts(this,Vi,setTimeout((()=>{ks(this,ls).call(this,{id:0,events:[{event:"skip",promise:[]}]})}),350)),Ts(this,Fi,!1),ks(this,qi,Ki)?ks(this,qi,Yi).forEach((t=>{t.element.skip()})):"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.skip()}catch(t){}}pause(){if(this.debug((()=>{console.log("this.#played",ks(this,Fi),"this.activeIndex",ks(this,Wi))}),"pause()"),ks(this,Fi))if(ks(this,qi,Ki)){Ts(this,zi,!0);const t=ks(this,ji).find((t=>"play"===t.status));if(t){const e=ks(this,qi,Yi).find((e=>e.element.options.id===t.id));e&&(t.status="paused",e.element.pause())}}else"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.pause()}resume(){if(this.debug((()=>{console.log("this.played",ks(this,Fi),"this.activeIndex",ks(this,Wi))}),"resume()"),ks(this,Fi))if(ks(this,qi,Ki)){Ts(this,zi,!1);const t=ks(this,ji).find((t=>"paused"===t.status));if(t){const e=ks(this,qi,Yi).find((e=>e.element.options.id===t.id));e&&(t.status="play",e.element.resume())}else Es(this,qi,os).call(this)}else"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.resume()}render(){const t=this.options.debugView&&!this.options.wrapperCount?G`
				<div class="debug__container">
					<div class="debug__title">DEBUG MODE</div>
					<div class=${ee({on:this.options.volume,debug__sound:!0})} @click=${this.toggleVolume}>
					sound: ${this.options.volume?G`on`:G`off`}
					</div>
					<div class="debug__skip" @click=${this.skip}>
						skip
					</div>
				</div>
			`:G``,e=!this.options.debugView&&ks(this,qi,Qi)?ie:G``,i=this.options.blackScreen&&ks(this,Fi)&&!this.options.wrapperCount?G`<div class="video__control-volume" ${te(ks(this,Ii))} @click=${this.toggleVolume}>
				${this.options.volume?Pt:St}
			</div>`:G``;return G`
			${t}
			${e}
			<div id="main-container">
				${ks(this,qi,Yi).filter((t=>!t.finish)).map((t=>G`${t.element}`)).reverse()}
				${i}
			</div>
		`}};Vi=new WeakMap,Ii=new WeakMap,Oi=new WeakMap,Di=new WeakMap,Li=new WeakMap,Bi=new WeakMap,Fi=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Wi=new WeakMap,ji=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,zi=new WeakMap,qi=new WeakSet,Qi=function(){return this.options.blackScreen&&this.spinnerStatus&&!this.options.wrapperCount},Yi=function(){return"number"==typeof this.vastObj?[]:this.vastObj.ad},Gi=function(t){"number"!=typeof this.vastObj&&(this.vastObj.ad=t)},Xi=function(){return this.options.wrapperCount>=ae},Ki=function(){return this.options.parallel&&!this.options.wrapperCount},Zi=function(t){this.options.wrapperCount&&t.chain.unshift(this.options.id.toString()),this.emitter.emit("toVastInspector:event",t)},Ji=function(t){if(!this.options.vastInspectorMode)return;const e={chain:[],event:t};Es(this,qi,Zi).call(this,e)},ts=function(t,e=!1){return new Promise((i=>{Es(this,qi,Ji).call(this,{type:"VAST_LOAD",data:null});const s=new XMLHttpRequest;s.open("GET",t,!0);const n=!e&&-1===t.indexOf("nocredentials");n&&(s.withCredentials=!0),s.timeout=1e3*le;const o=t=>{""===t?(Es(this,qi,Ji).call(this,{type:"VAST_LOAD_FAIL",data:{responseCode:"Empty or not XML"}}),i(303)):"number"==typeof t?(Es(this,qi,Ji).call(this,{type:"VAST_LOAD_FAIL",data:{responseCode:t}}),i(300)):(Es(this,qi,Ji).call(this,{type:"VAST_LOAD_SUCCESS",data:{vastText:t}}),i(t))};s.onload=function(){s.status>=200&&s.status<300?this.responseText&&this.responseText.includes("<")?o(this.responseText):o(""):o(s.status)},s.onerror=e=>{Es(this,qi,Ji).call(this,{type:"VAST_LOAD_FAIL",data:{responseCode:"404 or CORS"}}),n&&e&&0===e.target.status?i(Es(this,qi,ts).call(this,t,!0)):i(300)},s.ontimeout=()=>{Es(this,qi,Ji).call(this,{type:"VAST_LOAD_FAIL",data:{responseCode:`Timeout ${le} sec.`}}),i(301)};try{s.send()}catch(t){Es(this,qi,Ji).call(this,{type:"VAST_LOAD_FAIL",data:{responseCode:"Unknown error"}}),i(300)}}))},es=function(){return"number"==typeof this.vastObj?(ks(this,vs).call(this,this.vastObj),!0):!(!this.options.wrapperCount||ks(this,qi,Yi).length)&&(ks(this,vs).call(this,303),!0)},is=async function(){for await(const t of Es(this,qi,us).call(this))this.spinnerStatus=!0,this.debug((()=>{console.log(t)}),"AD блок завершен")},ss=function(){return new Promise((async t=>{const e=[];Ts(this,ji,ks(this,qi,Yi).map((t=>({id:t.id,status:"wait"}))));for(let t=0;t<ks(this,qi,Yi).length;t+=1){Es(this,qi,ds).call(this,ks(this,qi,Yi)[t])&&e.push(Es(this,qi,cs).call(this,ks(this,qi,Yi)[t]))}await Promise.race([Promise.all(e),ks(this,Hi)]),t()}))},ns=function(){ks(this,qi,Yi).forEach(((t,e)=>{e!==ks(this,Wi)?t.element.classList.remove("active"):(t.element.classList.add("active"),ks(this,qi,Yi)[ks(this,Wi)].element.startAdAfterAdLoaded())}))},os=function(){if(ks(this,zi))return;if(ks(this,ji).find((t=>"play"===t.status||"paused"===t.status)))return;let t=null;ks(this,qi,Yi).forEach(((e,i)=>{if(null!==t)return;const s=ks(this,ji).find((t=>"ready"===t.status&&t.id===e.element.options.id));s&&(t=i,s.status="play")})),null!==t?(Ts(this,Wi,t),Es(this,qi,ns).call(this)):this.spinnerStatus=!0},rs=function(t){this.debug(null,`playParallelAdLoaded ${t}`);const e=ks(this,ji).find((e=>e.id===t&&"wait"===e.status));e?e.status="ready":ks(this,ji).push({id:t,status:"ready"}),this.options.isPartnerVPAID&&!ks(this,Oi)||Es(this,qi,os).call(this)},as=function(t){this.debug(null,`playParallelComplete ${t}`);const e=ks(this,ji).find((e=>e.id===t&&"play"===e.status));e&&(Ts(this,Wi,null),e.status="finished",Es(this,qi,os).call(this))},ls=new WeakMap,hs=function(t){try{t.emitter.subscribe("globalOut:event",(e=>{ks(this,ls).call(this,e,t.options.id)})),t.emitter.subscribe("toVastInspector:event",(t=>{Es(this,qi,Zi).call(this,t)}))}catch(t){}},ds=function(t){if("wrapper"===t.type&&ks(this,qi,Xi))return ks(this,vs).call(this,302),!1;if("wrapper"===t.type&&!this.options.wrapperFollowAdditonalWrappers)return!1;return!(ks(this,Bi)&&t.sequence&&this.options.wrapperFallbackOnNoAd)&&!ks(this,Ri)},cs=async function(t){const e=t.element;return e.init(this.options,t),Es(this,qi,hs).call(this,e),await e.play(),Es(this,qi,as).call(this,t.id),!0},us=async function*(){for(let t=0;t<ks(this,qi,Yi).length;t+=1){Ts(this,Wi,t);if(Es(this,qi,ds).call(this,ks(this,qi,Yi)[t])){const e=Es(this,qi,cs).call(this,ks(this,qi,Yi)[t]);let i;ks(this,qi,Yi)[t].element.classList.add("active");try{i=await e}catch(t){}ks(this,qi,Yi)[t].element.classList.remove("active"),!ks(this,qi,Yi)[t].element.adBlockFinished&&ks(this,qi,Yi)[t].sequence&&Ts(this,Bi,!0),ks(this,qi,Yi)[t].finish=!0,yield i}else yield!1}},ps=function(t,e){this.emitter.emit("toMainFromAd:event",{id:this.options.id,event:t,data:e})},fs=function(){this.requestUpdate(),ks(this,qi,Ki)?ks(this,qi,Yi).forEach((t=>{t.element.setVolume(this.options.volume)})):"number"==typeof ks(this,Wi)&&ks(this,qi,Yi)[ks(this,Wi)].element.setVolume(this.options.volume)},ms=function(t){"mute"===t&&this.options.volume?(this.options.volume=!1,this.requestUpdate()):"unmute"!==t||this.options.volume||(this.options.volume=!0,this.requestUpdate())},vs=new WeakMap,Ps.styles=[me,fe],ws([wt()],Ps.prototype,"options",2),ws([wt()],Ps.prototype,"vastObj",2),ws([bt({type:Boolean,state:!0})],Ps.prototype,"spinnerStatus",2),Ps=ws([vt("ut-player-ad")],Ps);const Ss=(t,e,i)=>{const s=new Map;for(let n=e;n<=i;n++)s.set(t[n],n);return s},xs=jt(class extends Ut{constructor(t){if(super(t),t.type!==Wt)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let s;void 0===i?i=e:void 0!==e&&(s=e);const n=[],o=[];let r=0;for(const e of t)n[r]=s?s(e,r):r,o[r]=i(e,r),r++;return{values:o,keys:n}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,s]){var n;const o=t._$AH,{values:r,keys:a}=this.dt(e,i,s);if(!Array.isArray(o))return this.ut=a,r;const l=null!=(n=this.ut)?n:this.ut=[],h=[];let d,c,u=0,p=o.length-1,f=0,m=r.length-1;for(;u<=p&&f<=m;)if(null===o[u])u++;else if(null===o[p])p--;else if(l[u]===a[f])h[f]=Bt(o[u],r[f]),u++,f++;else if(l[p]===a[m])h[m]=Bt(o[p],r[m]),p--,m--;else if(l[u]===a[m])h[m]=Bt(o[u],r[m]),Lt(t,h[m+1],o[u]),u++,m--;else if(l[p]===a[f])h[f]=Bt(o[p],r[f]),Lt(t,o[u],o[p]),p--,f++;else if(void 0===d&&(d=Ss(a,f,m),c=Ss(l,u,p)),d.has(l[u]))if(d.has(l[p])){const e=c.get(a[f]),i=void 0!==e?o[e]:null;if(null===i){const e=Lt(t,o[u]);Bt(e,r[f]),h[f]=e}else h[f]=Bt(i,r[f]),Lt(t,o[u],i),o[e]=null;f++}else Rt(o[p]),p--;else Rt(o[u]),u++;for(;f<=m;){const e=Lt(t,h[m+1]);Bt(e,r[f]),h[f++]=e}for(;u<=p;){const t=o[u++];null!==t&&Rt(t)}return this.ut=a,((t,e=Ft)=>{t._$AH=e})(t,h),X}}),Cs=u`
	:host(.debug-view) {
		width: 100%;
	}

	:host(:not(.debug-view)) {
		position: absolute;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
	}

	.video__wrapper {
		position: relative;
	}

	:host(:not(.debug-view)) > .video__wrapper {
		width: 100%;
		height: 100%;
	}

	:host(.debug-view) > .video__wrapper {
		width: 100%;
		max-width: 300px;
	}

	video {
		width: 100%;
		height: 100%;
	}

	/* .video__control-volume {
		position: absolute;
		padding: 5px;
		border-radius: 50%;
		right: 15px;
		bottom: 15px;
		width: 24px;
		height: 24px;
		display: grid;
		place-content: center;
		background-color: hsla(0, 0%, 0%, 0.5);
		transition: background-color .25s linear
	}

	.video__control-volume:hover {
		background-color: hsla(0, 0%, 0%, 0.75);
	} */

	.event-container{
		display: flex;
		flex-wrap: wrap;
		gap: 5px;
	}

	.event-container span {
		padding: 5px;
		background-color: aquamarine;
		font-size: 80%;
		font-weight: bold;
	}

	.Error {
		background-color: tomato !important;
	}
`,Ms=u``;class $s extends ke{constructor(t,e){super(t,e),this.debugEventCollection=[],this.debugEventContainer=G`
		<div class="event-container">
			${xs(this.debugEventCollection,(t=>G`<span class="${t}">${t}</span>`))}
		</div>`,this.pushDebugEventCollection=t=>{"string"==typeof t?this.debugEventCollection.push(t):this.debugEventCollection.push(...t)}}}const Vs=()=>{const t=window.navigator.userAgent;return/iPad|iPhone|iPod/.test(t)},Is=(t,e)=>({...t,...["Error","errorAdvanced"].includes(t.event)&&{addValue:e},promise:[]}),Os=(t,e)=>Array.isArray(t)?t.map((t=>Is(t,e))):[Is(t,e)],Ds=()=>{try{const t=new AudioContext,e=t.createOscillator(),i=t.createGain();return i.gain.value=.05,i.connect(t.destination),e.type="sine",e.connect(t.destination),e.start(),e.stop(),"suspended"!==t.state}catch(t){return!1}};var Ls,Bs,Fs,Rs,Ns,Ws,js,Us,Hs=Object.defineProperty,zs=Object.getOwnPropertyDescriptor,qs=t=>{throw TypeError(t)},Qs=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?zs(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&Hs(e,i,o),o},Ys=(t,e,i)=>e.has(t)||qs("Cannot "+i),Gs=(t,e,i)=>(Ys(t,e,"read from private field"),e.get(t)),Xs=(t,e,i)=>e.has(t)?qs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Ks=(t,e,i,s)=>(Ys(t,e,"write to private field"),e.set(t,i),i),Zs=(t,e,i)=>(Ys(t,e,"access private method"),i);let Js=class extends $s{constructor(){super("Player / AD Block / Media","DarkBlue"),Xs(this,Ls),this.adLoaded=!1,this.mutedOnStart=Vs()||!Ds(),this.unMuted=!1,this.volume=!1,this.emitter=new ye,this.promiseResolveThisBlockFinished=null,this.finished=!1,this.clicked=!1,this._played=!1,Xs(this,Fs),Xs(this,Rs),Xs(this,Ns,!1),this.currentTime=0,Xs(this,Ws,!1),Xs(this,js,!1),this.canPlay=!1,this.sourceError=0,this.checkSourceErrorCounting=0,this.errorCode=405,this.realDuration=0,this.adBlock=null,this.videoBlockProto=[],this.videoBlock=[],this.videoTag=Kt(),this.videoTagWrapper=Kt(),this.videoTagSource=[],this.resolveInit=()=>{},this.eventLoadedData=()=>{var t,e;this.canPlay=!0,Ks(this,Ns,!0),Gs(this,Rs)&&clearTimeout(Gs(this,Rs));const i=null!=(e=null==(t=this.videoTag.value)?void 0:t.duration)?e:15e3;(!this.realDuration||this.realDuration>i)&&(this.realDuration=i),this.adLoaded||(this.played=!0,this.requestUpdate())},this.eventError=()=>{this.emitEvent({event:"Error"},this.errorCode),this.endBlock()},this.eventEnded=()=>{this.emitEvent({event:"complete"}),this.endBlock()},this.endBlock=()=>{var t,e;this.played=!1,this.finished=!0,clearTimeout(Gs(this,Fs)),clearTimeout(Gs(this,Rs)),this.disconnectedCallback(),null==(t=this.videoTag.value)||t.remove(),null==(e=this.videoTagWrapper.value)||e.remove(),this.requestUpdate(),this.promiseResolveThisBlockFinished&&this.promiseResolveThisBlockFinished("finish")},this.eventTimeUpdate=()=>{var t,e;const i=Math.floor(1e3*(null!=(e=null==(t=this.videoTag.value)?void 0:t.currentTime)?e:10)),s=this.currentTimeEvent(i);"string"==typeof s?this.emitEvent({event:s}):Array.isArray(s)&&s.forEach((t=>this.emitEvent({event:t}))),this.currentTime=i},console.log("ut-player-ad-block-media constructor",Vs(),Ds())}emitEvent(t,e){this.adBlock&&(this.debugView&&(this.pushDebugEventCollection(Array.isArray(t)?t.map((t=>t.event)):t.event),this.requestUpdate()),Array.isArray(t)?t.forEach((t=>Zs(this,Ls,Bs).call(this,t,e))):Zs(this,Ls,Bs).call(this,t,e),this.emitter.emit("globalOut:event",{id:this.adBlock.id,events:Os(t,e)}))}set played(t){!this._played&&t&&this.adBlock&&(this.emitEvent([{event:"creativeView"},{event:"start"}]),Ks(this,Fs,setTimeout((()=>{Gs(this,Ws)||this.emitEvent({event:"errorAdvanced"},997)}),3e3))),this._played=t}get played(){return this._played}currentTimeEvent(t){if(!this.currentTime&&!Gs(this,Ws))return Ks(this,Ws,!0),Gs(this,Fs)&&clearTimeout(Gs(this,Fs)),"Impression";const e=[];return this.currentTime<2e3&&t>2e3&&e.push("second2"),this.currentTime<this.realDurationQuartile.first&&t>this.realDurationQuartile.first&&e.push("firstQuartile"),this.currentTime<this.realDurationQuartile.midpoint&&t>this.realDurationQuartile.midpoint&&e.push("midpoint"),this.currentTime<this.realDurationQuartile.third&&t>this.realDurationQuartile.third&&e.push("thirdQuartile"),!!e.length&&e}get realDurationQuartile(){return{first:Math.floor(this.realDuration/4*1e3),midpoint:Math.floor(this.realDuration/2*1e3),third:3*Math.floor(this.realDuration/4*1e3)}}ensureInView(t){t&&(this.videoTagSource.push(t),t.addEventListener("error",(()=>{this.sourceError+=1})))}init(t,e){return new Promise((i=>{Ks(this,js,e.vastInspectorMode),this.debugConsoleElement=e.debugAdMedia,this.debugView=e.debugView,this.volume=e.volume,this.adLoaded=e.adLoaded||e.parallelMode||e.parallel,this.resolveInit=i,this.adBlock=t,this.adBlock.duration&&(this.realDuration=this.adBlock.duration),this.videoBlockProto=t.media.map((t=>{var e;return{type:t.type,href:t.href,width:null!=(e=t.width)?e:1280}})),this.debug((()=>{console.log("adBlock",this.adBlock)}),"init")}))}disconnectedCallback(){var t,e,i,s;this.videoTagSource.forEach((t=>{t.removeEventListener("error",this.eventError)})),null==(t=this.videoTag.value)||t.removeEventListener("error",this.eventError),null==(e=this.videoTag.value)||e.removeEventListener("loadeddata",this.eventLoadedData),null==(i=this.videoTag.value)||i.removeEventListener("ended",this.eventEnded),null==(s=this.videoTag.value)||s.removeEventListener("timeupdate",this.eventTimeUpdate),super.disconnectedCallback()}setVolume(t){var e;if(this.debug((()=>{console.log("setVolume now",this.volume,"new",t,"played",this.played,"mutedOnStart",this.mutedOnStart,"unMuted",this.unMuted,"canPlayWithSound()",Ds())}),"setVolume()"),this.volume!==t&&this.played&&(this.volume=t,null==(e=this.videoTag)?void 0:e.value)){if(this.mutedOnStart&&!this.unMuted){if(!Ds())return;this.unMuted=!0,this.videoTag.value.muted=!1}this.videoTag.value.volume=Number(t),this.emitEvent([{event:t?"unmute":"mute"}])}}skip(){this.debug(null,"skip()"),this.videoTagWrapper.value&&this.videoTag.value&&(this.emitEvent([{event:"skip"}]),this.endBlock())}pause(){var t;this.debug(null,"pause()"),(null==(t=this.videoTag)?void 0:t.value)&&this.videoTag.value.pause()}resume(){var t;this.debug(null,"resume()"),(null==(t=this.videoTag)?void 0:t.value)&&this.videoTag.value.play()}filteredVideoBlock(){if(!this.videoBlockProto.length)return;if(!this.videoBlockProto.some((t=>"video/mp4"===t.type||"video/webm"===t.type)))return void(this.videoBlock=this.videoBlockProto.slice());const t=(()=>{const t=navigator.userAgent;return/smart-tv|smarttv|appletv|googletv|hbbtv|pov_tv|netcast|viera|aquos|dtvnet|roku|tizen|webos/i.test(t)?"smart-tv":/android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t)?"mobile":"desktop"})();if(this.videoBlock=this.videoBlockProto.filter((t=>"video/mp4"===t.type||"video/webm"===t.type)),1===this.videoBlock.length||"smart-tv"===t)return;this.videoBlock.sort(((t,e)=>t.type===e.type?0:"video/mp4"===t.type?-1:"video/mp4"===e.type?1:0));const e=this.videoBlock.map((t=>t.width)).sort(((t,e)=>t-e));if("mobile"===t){const t=e[0];return void(this.videoBlock=this.videoBlock.filter((e=>e.width===t)))}const i=this.getBoundingClientRect().width*(window.devicePixelRatio||1),s=(n=i,e.reduce(((t,e)=>Math.abs(e-n)<Math.abs(t-n)?e:t)));var n;this.videoBlock=this.videoBlock.filter((t=>t.width===s))}firstUpdated(){var t,e,i,s;Ks(this,Rs,setTimeout((()=>{Gs(this,Ns)||this.emitEvent({event:"errorAdvanced"},996)}),3e3)),this.videoTag.value&&(this.videoTag.value.volume=Number(this.volume)),this.filteredVideoBlock(),this.requestUpdate(),null==(t=this.videoTag.value)||t.addEventListener("error",this.eventError),null==(e=this.videoTag.value)||e.addEventListener("loadeddata",this.eventLoadedData),null==(i=this.videoTag.value)||i.addEventListener("ended",this.eventEnded),null==(s=this.videoTag.value)||s.addEventListener("timeupdate",this.eventTimeUpdate),this.resolveInit("init"),setTimeout((()=>{this.checkSourceError()}),100)}checkSourceError(){if(!this.canPlay&&!this.finished)return this.checkSourceErrorCounting+=1,this.videoBlock.length&&this.sourceError===this.videoBlock.length?(this.errorCode=401,this.eventError()):this.checkSourceErrorCounting===10*de?(this.errorCode=402,this.eventError()):void setTimeout((()=>{this.checkSourceError()}),100)}play(){return new Promise((async t=>{var e,i;this.promiseResolveThisBlockFinished=t,!this.adBlock||this.adBlock.errorCode||(null==(e=this.adBlock)?void 0:e.media.length)||(this.adBlock.errorCode=403),(null==(i=this.adBlock)?void 0:i.errorCode)?(this.errorCode=this.adBlock.errorCode,this.eventError()):this.videoTag.value&&(this.adLoaded?this.emitEvent([{event:"adLoaded"}]):(Zs(this,Ls,Us).call(this,{type:"VIDEO_PLAY",data:{url:this.videoBlock[0].href}}),this.videoTag.value.play()))}))}clickToVideo(){if(!this.played)return;const t=[{event:"ClickThrough"}];this.clicked||(this.clicked=!0,t.push({event:"ClickTracking"})),this.emitEvent(t)}startAdAfterAdLoaded(){this.debug(null,"media startAdAfterAdLoaded()"),this.videoTag.value&&(this.played=!0,this.requestUpdate(),Zs(this,Ls,Us).call(this,{type:"VIDEO_PLAY",data:{url:this.videoBlock[0].href}}),this.videoTag.value.play())}render(){const t=this.mutedOnStart?G`<video ${te(this.videoTag)} @click=${this.clickToVideo} playsinline muted>
					${xs(this.videoBlock,(t=>G`
							<source ${te(this.ensureInView)} src="${t.href}" type="${t.type}">
						`))}
				</video>`:G`<video ${te(this.videoTag)} @click=${this.clickToVideo} playsinline>
				${xs(this.videoBlock,(t=>G`
						<source ${te(this.ensureInView)} src="${t.href}" type="${t.type}">
					`))}
				</video>`,e=this.debugView||this.played||!this.finished?G`
			<div ${te(this.videoTagWrapper)} class="video__wrapper">
				${t}
			</div>`:G``;return G`
			${e}
			${this.debugView?this.debugEventContainer:""}
		`}};Ls=new WeakSet,Bs=function(t,e){Zs(this,Ls,Us).call(this,"Error"===t.event?{type:"VAST_EVENT_ERROR",data:{errorCode:null!=e?e:0}}:{type:"VAST_EVENT",data:{value:t.event}})},Fs=new WeakMap,Rs=new WeakMap,Ns=new WeakMap,Ws=new WeakMap,js=new WeakMap,Us=function(t){if(!Gs(this,js))return;const e={chain:[],event:t};this.emitter.emit("toVastInspector:event",e)},Js.styles=[Ms,Cs],Qs([bt({type:Boolean})],Js.prototype,"volume",2),Js=Qs([vt("ut-player-ad-block-media")],Js);const tn=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],en=u`
	#adLoaderIframe {
		width: 100%;
		overflow: hidden;
	}

	:host(.debug-view) > #adLoaderIframe {
		border: 1px solid #aaa;
		max-width: var(--debug-max-width);
		aspect-ratio: auto 1 / 0.5625;
	}

	:host(:not(.debug-view)) {
		position: absolute;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
	}

	:host(:not(.debug-view)) > #adLoaderIframe {
		border: none;
		height: 100%;
	}

	.event-container{
		display: flex;
		flex-wrap: wrap;
		gap: 5px;
	}

	.event-container span {
		padding: 5px;
		background-color: aquamarine;
		font-size: 80%;
		font-weight: bold;
	}

	.opacity-0-search-adv {
		opacity: 0;
	}

	.Error {
		background-color: tomato !important;
	}
`,sn=u``,nn=(t,e)=>new Promise((async i=>{if(e.startsWith("http://")&&"https:"===window.location.protocol)return i(946);if(!(e.startsWith("https://")||e.startsWith("http://")||e.startsWith("//")||(pe||"development"===ne)&&e.startsWith("./")))return i(947);let s=!0;const n=setTimeout((()=>(s=!1,i(901))),1e3*le),o=t=>(clearTimeout(n),i(901)),r=async e=>{"UT_PLAYER_VPAID_LOAD"===e.data&&(window.removeEventListener("message",r),(async()=>{if(!t.contentWindow)return o();for(;s;){const s=t.contentWindow.getVPAIDAd;if(s){if("function"!=typeof s)return o();const t=s();return(e=t).handshakeVersion&&"function"==typeof e.handshakeVersion&&e.initAd&&"function"==typeof e.initAd&&e.startAd&&"function"==typeof e.startAd&&e.stopAd&&"function"==typeof e.stopAd&&e.skipAd&&"function"==typeof e.skipAd&&e.resizeAd&&"function"==typeof e.resizeAd&&e.pauseAd&&"function"==typeof e.pauseAd&&e.resumeAd&&"function"==typeof e.resumeAd&&e.expandAd&&"function"==typeof e.expandAd&&e.collapseAd&&"function"==typeof e.collapseAd&&e.subscribe&&"function"==typeof e.subscribe&&e.unsubscribe&&"function"==typeof e.unsubscribe&&t?(clearTimeout(n),i(t)):o()}await _e(200)}var e})())};for(;!t.contentWindow;)if(await _e(100),!s)return;const a=`<!DOCTYPE html><html><head><meta charset="UTF-8"><style type="text/css">\n\thtml, body {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tpadding: 0px;\n\t\tmargin: 0px;\n\t\tbackground-color: transparent;\n\t\toverflow: hidden;\n\t}\n\n\t.slot {\n\t\tposition: absolute;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tleft: 0px;\n\t\ttop: 0px;\n\t\toverflow: hidden;\n\t}\n\n\t// .slot:not(:empty) + video {\n\t// \tdisplay: none;\n\t// }\n\n\t.slot-video {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft: 0px;\n\t\ttop: 0px;\n\t}\n\n\t.slot > iframe {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tleft: 0px;\n\t\ttop: 0px;\n\t}\n\n\t.slot > a {\n\t\tposition: absolute;\n\t\tleft: 0px;\n\t\ttop: 0px;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t</style></head><body><script type="${["./vpaid.js","./src/utils/vpaidUnit/index.ts"].includes(e)?"module":"text/javascript"}" src="${e}"><\/script><script type="text/javascript">window.parent.postMessage("UT_PLAYER_VPAID_LOAD","*");<\/script></body></html>`;window.addEventListener("message",r),t.contentWindow.document.open(),t.contentWindow.document.write(a),t.contentWindow.document.close()}));var on=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,s){return t[0]===e&&(i=s,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(e,i){var s=t(this.__entries__,e);~s?this.__entries__[s][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,s=t(i,e);~s&&i.splice(s,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,s=this.__entries__;i<s.length;i++){var n=s[i];t.call(e,n[1],n[0])}},e}()}(),rn="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,an="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),ln="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(an):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var hn=["top","right","bottom","left","width","height","size","weight"],dn="undefined"!=typeof MutationObserver,cn=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,s=!1,n=0;function o(){i&&(i=!1,t()),s&&a()}function r(){ln(o)}function a(){var t=Date.now();if(i){if(t-n<2)return;s=!0}else i=!0,s=!1,setTimeout(r,e);n=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){rn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),dn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){rn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;hn.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),un=function(t,e){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];Object.defineProperty(t,n,{value:e[n],enumerable:!1,writable:!1,configurable:!0})}return t},pn=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||an},fn=wn(0,0,0,0);function mn(t){return parseFloat(t)||0}function vn(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+mn(t["border-"+i+"-width"])}),0)}function gn(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return fn;var s=pn(t).getComputedStyle(t),n=function(t){for(var e={},i=0,s=["top","right","bottom","left"];i<s.length;i++){var n=s[i],o=t["padding-"+n];e[n]=mn(o)}return e}(s),o=n.left+n.right,r=n.top+n.bottom,a=mn(s.width),l=mn(s.height);if("border-box"===s.boxSizing&&(Math.round(a+o)!==e&&(a-=vn(s,"left","right")+o),Math.round(l+r)!==i&&(l-=vn(s,"top","bottom")+r)),!function(t){return t===pn(t).document.documentElement}(t)){var h=Math.round(a+o)-e,d=Math.round(l+r)-i;1!==Math.abs(h)&&(a-=h),1!==Math.abs(d)&&(l-=d)}return wn(n.left,n.top,a,l)}var yn="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof pn(t).SVGGraphicsElement}:function(t){return t instanceof pn(t).SVGElement&&"function"==typeof t.getBBox};function bn(t){return rn?yn(t)?function(t){var e=t.getBBox();return wn(0,0,e.width,e.height)}(t):gn(t):fn}function wn(t,e,i,s){return{x:t,y:e,width:i,height:s}}var An=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=wn(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=bn(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),kn=function(){return function(t,e){var i,s,n,o,r,a,l,h=(s=(i=e).x,n=i.y,o=i.width,r=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),un(l,{x:s,y:n,width:o,height:r,top:n,right:s+o,bottom:r+n,left:s}),l);un(this,{target:t,contentRect:h})}}(),_n=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new on,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof pn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new An(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof pn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new kn(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Tn="undefined"!=typeof WeakMap?new WeakMap:new on,En=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=cn.getInstance(),s=new _n(e,i,this);Tn.set(this,s)}}();["observe","unobserve","disconnect"].forEach((function(t){En.prototype[t]=function(){var e;return(e=Tn.get(this))[t].apply(e,arguments)}}));var Pn,Sn,xn,Cn,Mn,$n,Vn,In,On,Dn,Ln,Bn=void 0!==an.ResizeObserver?an.ResizeObserver:En,Fn=Object.defineProperty,Rn=Object.getOwnPropertyDescriptor,Nn=t=>{throw TypeError(t)},Wn=(t,e,i)=>e.has(t)||Nn("Cannot "+i),jn=(t,e,i)=>(Wn(t,e,"read from private field"),i?i.call(t):e.get(t)),Un=(t,e,i)=>e.has(t)?Nn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Hn=(t,e,i,s)=>(Wn(t,e,"write to private field"),e.set(t,i),i),zn=(t,e,i)=>(Wn(t,e,"access private method"),i);let qn=class extends $s{constructor(){super("Player / AD Block / VPAID","DarkGreen"),Un(this,Cn),this.skipTimeout=0,this.loaded=!1,this.played=!1,this.playedAd=!1,this.paused=!1,this.skipped=!1,this.adLoaded=!1,this.volume=!1,this.clicked=!1,this.VPAIDTimeoutMilliseconds=0,this.VPAIDTimeoutGlobalMilliseconds=0,this.VPAIDTimeoutImp1=0,this.VPAIDTimeoutImpN=0,this.iframe=Kt(),this.iframeSize={width:0,height:0},this.VPAIDCreative=null,Un(this,Pn,!1),this.errorCode=901,this.emitter=new ye,this.adBlock=null,this.promiseResolveInit=null,this.promiseResolveThisBlockFinished=null,this.mediaBlock=null,this.VPAIDSlot=document.createElement("div"),this.VPAIDVideoSlot=document.createElement("video"),this.blockBadVPAID=!0,this.origins=[],this.blackScreen=!1,Un(this,Sn,{AdLoaded:!1,startAdFired:!1,AdStarted:!1,AdVideoStart:!1,AdVideoFirstQuartile:!1,AdVideoMidpoint:!1,AdVideoThirdQuartile:!1,AdVideoComplete:!1,AdImpression:!1}),Un(this,xn,!1),this.eventError=()=>{this.emitEvent({event:"Error"},this.errorCode),this.endBlock()},this.endBlock=()=>{if(this.iframe.value&&(this.resizeObserver.unobserve(this.iframe.value),this.iframe.value.remove()),tn.forEach((t=>{var e;null==(e=this.VPAIDCreative)||e.unsubscribe(this.eventHandler[t],t)})),this.VPAIDCreative&&this.played&&this.playedAd){zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"stopAd()"}});try{this.VPAIDCreative.stopAd()}catch(t){console.warn("Error .stopAd()",t)}}this.played=!1,this.playedAd=!1,-1!==this.checkAdImpressionDelayTimeout&&clearTimeout(this.checkAdImpressionDelayTimeout),clearTimeout(this.skipTimeout),clearTimeout(this.checkAdStartedTimeout),clearTimeout(this.checkAdImpressionTimeout),clearTimeout(this.checkAdLoadedTimeout),clearTimeout(this.globalTimeout),this.VPAIDCreative=null,this.promiseResolveThisBlockFinished&&this.promiseResolveThisBlockFinished("finish")},this.startEmitSecond2=()=>{if(this.played&&this.creativePlayTime>=2)return this.emitEvent({event:"second2"});setTimeout((()=>{this.startEmitSecond2()}),500)},this.globalTimeout=-1,this.firedGlobalTimeout=()=>{this.emitEvent({event:"Error"},900),this.endBlock()},this.checkAdStartedTimeout=-1,this.checkAdStarted=()=>{this.debug(null,"vpaid-check-ad-started-fail"),this.emitEvent({event:"Error"},304),this.emitEvent({event:"errorAdvanced"},999),this.endBlock()},this.checkAdLoadedTimeout=-1,this.checkAdLoaded=()=>{this.debug(null,"vpaid-check-ad-loaded-fail"),this.emitEvent({event:"Error"},304),this.emitEvent({event:"errorAdvanced"},998),this.endBlock()},this.checkAdImpressionTimeout=-1,this.checkAdImpressionCount=0,this.checkAdImpression=()=>{this.checkAdImpressionCount+=1,this.checkAdImpressionCount%5||this.emitEvent({event:"errorAdvanced"},950+this.checkAdImpressionCount),this.checkAdImpressionTimeout=setTimeout((()=>{this.checkAdImpression()}),1e3)},this.checkAdImpressionDelayTimeout=-1,this.checkAdImpressionDelayTimeoutType=953,this.checkAdImpressionDelay=()=>{this.debug(null,"vpaid-check-ad-impression-delay"),this.emitEvent({event:"errorAdvanced"},this.checkAdImpressionDelayTimeoutType),this.emitEvent({event:"Error"},900),this.endBlock()},this.startAd=()=>{if(jn(this,Sn).startAdFired=!0,!this.VPAIDCreative)return!1;this.checkAdStartedTimeout=setTimeout((()=>{this.checkAdStarted()}),this.VPAIDTimeoutMilliseconds),this.checkAdImpressionTimeout=setTimeout((()=>{this.checkAdImpression()}),1e3),this.VPAIDTimeoutImp1&&(this.checkAdImpressionDelayTimeout=setTimeout((()=>{this.checkAdImpressionDelay()}),this.VPAIDTimeoutImp1));try{zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"startAd()"}}),this.VPAIDCreative.startAd()}catch(t){console.warn("Error .startAd()",t),this.endBlock()}return!0},Un(this,Ln,((t,e)=>{zn(this,Cn,Dn).call(this,{type:"VPAID_EVENT",data:{event:t,addData:e}})})),this.eventHandler={AdLoaded:t=>{jn(this,Ln).call(this,"AdLoaded",t);zn(this,Cn,In).call(this,"AdLoaded")&&(clearTimeout(this.checkAdLoadedTimeout),this.eventHandlerUniversal("AdLoaded",t),this.VPAIDCreative&&(this.loaded=!0,this.creativeAdVolume=Number(this.volume),this.adLoaded?this.emitEvent([{event:"adLoaded"}]):this.startAd()))},AdStarted:t=>{jn(this,Ln).call(this,"AdStarted",t),this.played=!0;zn(this,Cn,In).call(this,"AdStarted")&&(this.VPAIDVideoSlot.querySelector("source")||(this.VPAIDVideoSlot.style.zIndex="-1"),clearTimeout(this.checkAdStartedTimeout),this.eventHandlerUniversal("AdStarted",t),this.emitEvent([{event:"creativeView"}]))},AdStopped:t=>{jn(this,Ln).call(this,"AdStopped",t),this.eventHandlerUniversal("AdStopped",t),this.endBlock()},AdSkipped:t=>{jn(this,Ln).call(this,"AdSkipped",t),this.skipped||(this.skipped=!0,this.eventHandlerUniversal("AdSkipped",t),this.emitEvent({event:"skip"}),this.endBlock())},AdSkippableStateChange:t=>{jn(this,Ln).call(this,"AdSkippableStateChange",t),this.eventHandlerUniversal("AdSkippableStateChange",t)},AdSizeChange:t=>{jn(this,Ln).call(this,"AdSizeChange",t),this.eventHandlerUniversal("AdSizeChange",t)},AdLinearChange:t=>{jn(this,Ln).call(this,"AdLinearChange",t),this.eventHandlerUniversal("AdLinearChange",t),this.creativeAdLinear||this.emitEvent({event:"closeLinear"})},AdDurationChange:t=>{jn(this,Ln).call(this,"AdDurationChange",t),this.eventHandlerUniversal("AdDurationChange",t)},AdExpandedChange:t=>{jn(this,Ln).call(this,"AdExpandedChange",t),this.eventHandlerUniversal("AdExpandedChange",t)},AdInteraction:t=>{jn(this,Ln).call(this,"AdInteraction",t),this.eventHandlerUniversal("AdInteraction",t)},AdUserAcceptInvitation:t=>{jn(this,Ln).call(this,"AdUserAcceptInvitation",t),this.eventHandlerUniversal("AdUserAcceptInvitation",t),this.emitEvent({event:"acceptInvitation"})},AdUserMinimize:t=>{jn(this,Ln).call(this,"AdUserMinimize",t),this.eventHandlerUniversal("AdUserMinimize",t),this.emitEvent({event:"collapse"})},AdUserClose:t=>{jn(this,Ln).call(this,"AdUserClose",t),this.eventHandlerUniversal("AdUserClose",t),this.emitEvent({event:"close"})},AdPaused:t=>{jn(this,Ln).call(this,"AdPaused",t),this.eventHandlerUniversal("AdPaused",t),this.played=!1,this.paused=!0,this.emitEvent({event:"pause"})},AdPlaying:t=>{jn(this,Ln).call(this,"AdPlaying",t),this.eventHandlerUniversal("AdPlaying",t),this.played=!0,this.paused=!1,this.emitEvent({event:"resume"})},AdLog:t=>{jn(this,Ln).call(this,"AdLog",t),this.eventHandlerUniversal("AdLog",t)},AdVolumeChange:t=>{jn(this,Ln).call(this,"AdVolumeChange",t),this.eventHandlerUniversal("AdVolumeChange",t),this.debug(null,`AdVolumeChange creativeAdVolume ${this.creativeAdVolume}`);try{if(this.realFinish||!this.loaded)return;if(!this.volume&&this.creativeAdVolume&&!Ds())return;if(!(this.volume&&!this.creativeAdVolume||!this.volume&&this.creativeAdVolume))return;const t=this.creativeAdVolume?"unmute":"mute";this.emitEvent({event:t}),this.volume=!!this.creativeAdVolume}catch(t){throw t}},AdImpression:async t=>{var e;jn(this,Ln).call(this,"AdImpression",t),this.played||(this.played=!0),this.playedAd||(this.playedAd=!0);await zn(this,Cn,Vn).call(this,"AdImpression")&&(clearTimeout(this.checkAdImpressionTimeout),null==(e=this.iframe.value)||e.classList.remove("opacity-0-search-adv"),this.eventHandlerUniversal("AdImpression",t),this.emitEvent({event:"Impression"}),this.VPAIDTimeoutImp1&&(-1!==this.checkAdImpressionDelayTimeout&&clearTimeout(this.checkAdImpressionDelayTimeout),this.VPAIDTimeoutImpN&&(this.checkAdImpressionDelayTimeout=setTimeout((()=>{this.checkAdImpressionDelayTimeoutType=954,this.checkAdImpressionDelay()}),this.VPAIDTimeoutImpN))))},AdVideoStart:async t=>{jn(this,Ln).call(this,"AdVideoStart",t),this.played||(this.played=!0),this.playedAd=!0;await zn(this,Cn,Vn).call(this,"AdVideoStart")&&(this.eventHandlerUniversal("AdVideoStart",t),this.emitEvent([{event:"start"}]),this.debug(null,`this.adDuration ${this.creativeAdDuration}`),setTimeout((()=>{this.startEmitSecond2()}),1e3))},AdVideoFirstQuartile:t=>{jn(this,Ln).call(this,"AdVideoFirstQuartile",t);zn(this,Cn,In).call(this,"AdVideoFirstQuartile")&&(this.eventHandlerUniversal("AdVideoFirstQuartile",t),this.emitEvent({event:"firstQuartile"}))},AdVideoMidpoint:t=>{jn(this,Ln).call(this,"AdVideoMidpoint",t);zn(this,Cn,In).call(this,"AdVideoMidpoint")&&(this.eventHandlerUniversal("AdVideoMidpoint",t),this.emitEvent({event:"midpoint"}))},AdVideoThirdQuartile:t=>{jn(this,Ln).call(this,"AdVideoThirdQuartile",t);zn(this,Cn,In).call(this,"AdVideoThirdQuartile")&&(this.eventHandlerUniversal("AdVideoThirdQuartile",t),this.emitEvent({event:"thirdQuartile"}))},AdVideoComplete:t=>{jn(this,Ln).call(this,"AdVideoComplete",t);zn(this,Cn,In).call(this,"AdVideoComplete")&&(this.eventHandlerUniversal("AdVideoComplete",t),this.playedAd&&(this.emitEvent({event:"complete"}),this.playedAd=!1))},AdClickThru:t=>{jn(this,Ln).call(this,"AdClickThru",t),this.eventHandlerUniversal("AdClickThru",t),this.realFinish||(this.clicked?this.emitEvent([{event:"ClickThrough",data:t}]):(this.clicked=!0,this.emitEvent([{event:"ClickTracking"},{event:"ClickThrough",data:t}])))},AdError:t=>{jn(this,Ln).call(this,"AdError",t),this.eventHandlerUniversal("AdError",t),this.emitEvent({event:"Error"},901),this.endBlock()}},this.workerUniversalTimeout=t=>{this.VPAIDTimeoutMilliseconds&&(-1!==this.globalTimeout&&clearTimeout(this.globalTimeout),"AdInteraction"!==t&&"AdUserAcceptInvitation"!==t&&(this.debug((()=>{console.log("this.globalTimeout",this.globalTimeout)}),`universalWorkerTimeout ${this.VPAIDTimeoutMilliseconds}`),this.VPAIDTimeoutImp1||(this.globalTimeout=setTimeout((()=>{this.firedGlobalTimeout()}),this.VPAIDTimeoutGlobalMilliseconds))))},this.eventHandlerUniversal=(t,e)=>{"AdLoaded"!==t&&"AdVolumeChange"!==t&&"AdDurationChange"!==t&&this.workerUniversalTimeout(t),this.debug((()=>{e&&console.log("payload",e)}),`message from VPAID - ${t}`)},this.subscribeToEvent=()=>{this.debug((()=>{console.log(tn)}),"subscribeToEvent"),tn.forEach((t=>{var e;null==(e=this.VPAIDCreative)||e.subscribe(this.eventHandler[t],t)}))},this.resizeObserver=new Bn((()=>{try{this.iframe.value&&(this.iframeSize.width=this.iframe.value.clientWidth,this.iframeSize.height=this.iframe.value.clientHeight,this.played&&this.VPAIDCreative&&this.sendIframeSizeToVpaid())}catch(t){throw t}})),this.sendIframeSizeToVpaid=()=>{if(this.VPAIDCreative){zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"resizeAd()"}}),this.debug(null,`resizeAd() ${this.iframeSize.width} ${this.iframeSize.height}`);try{this.VPAIDCreative.resizeAd(this.iframeSize.width,this.iframeSize.height,"normal")}catch(t){console.warn("Error .resizeAd()",t)}}},this.initAd=()=>{var t,e;if(this.VPAIDCreative&&this.mediaBlock&&this.iframe.value){this.checkAdLoadedTimeout=setTimeout((()=>{this.checkAdLoaded()}),this.VPAIDTimeoutMilliseconds);try{this.debug((()=>{var t,e,i,s,n,o,r,a;if(console.log("this.iframeSize.width",this.iframeSize.width),console.log("this.iframeSize.height",this.iframeSize.height),console.log("AdParameters",null==(i=null==(e=null==(t=this.mediaBlock)?void 0:t.setting)?void 0:e.adParameters)?void 0:i.length,null!=(o=null==(n=null==(s=this.mediaBlock)?void 0:s.setting)?void 0:n.adParameters)?o:""),null==(a=null==(r=this.mediaBlock)?void 0:r.setting)?void 0:a.adParameters)try{console.log("AdParameters",JSON.parse(this.mediaBlock.setting.adParameters))}catch(t){console.log("AdParameters NOT PARSED",t)}console.log("slot",this.VPAIDSlot),console.log("videoSlot",this.VPAIDVideoSlot)}),"initAd()"),zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"initAd()"}}),this.volume&&!Ds()&&(this.volume=!1),this.volume||Ds()||(this.VPAIDVideoSlot.muted=!0,this.VPAIDVideoSlot.setAttribute("muted","true")),this.origins.length&&this.VPAIDCreative.setOrigins&&this.VPAIDCreative.setOrigins(this.origins),this.VPAIDCreative.initAd(this.iframeSize.width,this.iframeSize.height,"normal",720,{AdParameters:null!=(e=null==(t=this.mediaBlock.setting)?void 0:t.adParameters)?e:""},{slot:this.VPAIDSlot,videoSlot:this.VPAIDVideoSlot,videoSlotCanAutoPlay:!0})}catch(t){throw this.endBlock(),t}}},this.VPAIDVideoSlot.classList.add("slot-video"),this.VPAIDSlot.classList.add("slot")}get realFinish(){return!this.played&&!this.paused}init(t,e){return new Promise((i=>{this.volume=e.volume,this.adLoaded=e.adLoaded||e.parallelMode||e.parallel,this.adBlock=t,this.VPAIDTimeoutMilliseconds=e.VPAIDTimeout?1e3*e.VPAIDTimeout:void 0,this.VPAIDTimeoutGlobalMilliseconds=this.VPAIDTimeoutMilliseconds?2*this.VPAIDTimeoutMilliseconds:void 0,e.imp1_delay&&(this.VPAIDTimeoutImp1=1e3*e.imp1_delay),e.impn_delay&&(this.VPAIDTimeoutImpN=1e3*e.impn_delay),e.origins.length&&(this.origins=e.origins),Hn(this,Pn,e.vastInspectorMode),this.blockBadVPAID=e.blockBadVPAID,this.mediaBlock=this.adBlock.media[0],this.debugConsoleElement=e.debugAdVPAID,this.debugView=e.debugView,this.blackScreen=e.blackScreen,this.render(),this.promiseResolveInit=i,this.debug((()=>{var i,s;console.dir(t),console.dir(e),console.log("adParameters",null==(s=null==(i=this.mediaBlock)?void 0:i.setting)?void 0:s.adParameters)}),"init")}))}setVolume(t){this.debug((()=>{console.log("now",this.volume,"new",t)}),"setVolume()"),this.volume!==t&&(this.creativeAdVolume=Number(t),this.debug((()=>{console.log(this.creativeAdVolume)}),"getVolume()"))}skip(){if(this.debug(null,"skip()"),this.VPAIDCreative&&this.played){this.skipTimeout=setTimeout((()=>{this.debug(null,"Остановка автоматическая, AdSkipped не пришел за 500мс."),this.eventHandler.AdSkipped()}),500),this.debug(null,"вызов skipAd()"),zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"skipAd()"}});try{this.VPAIDCreative.skipAd()}catch(t){console.warn("Error .skipAd()",t),this.endBlock()}}else this.debug(null,"Остановка до инициализации"),this.endBlock()}pause(){if(this.debug(null,"pause()"),this.VPAIDCreative){zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"pauseAd()"}});try{this.VPAIDCreative.pauseAd()}catch(t){console.warn("Error .pauseAd()",t),this.endBlock()}}}resume(){if(this.debug(null,"resume()"),this.VPAIDCreative){zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"resume()"}});try{this.VPAIDCreative.resumeAd(),this.played=!0,this.paused=!1}catch(t){console.warn("Error .resumeAd()",t),this.endBlock()}}}firstUpdated(){this.promiseResolveInit&&this.promiseResolveInit(!0)}emitEvent(t,e){this.adBlock&&(this.pushDebugEventCollection(Array.isArray(t)?t.map((t=>t.event)):t.event),this.requestUpdate(),Array.isArray(t)?t.forEach((t=>zn(this,Cn,On).call(this,t,e))):zn(this,Cn,On).call(this,t,e),this.emitter.emit("globalOut:event",{id:this.adBlock.id,events:Os(t,e)}))}get creativeAdVolume(){if(!this.VPAIDCreative)return 0;zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"getAdVolume()"}});let t=0;try{t=this.VPAIDCreative.getAdVolume()}catch(t){console.warn("Error .getAdVolume()",t)}return"number"==typeof t?t:0}set creativeAdVolume(t){if(this.VPAIDCreative){zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:`setAdVolume(${t})`}}),this.debug(null,`setAdVolume(${t})`);try{this.VPAIDCreative.setAdVolume(t)}catch(e){console.warn(`Error .setAdVolume(${t})`,e)}try{this.debug(null,`getAdVolume() = ${this.VPAIDCreative.getAdVolume()}`)}catch(t){console.warn("Error .getAdVolume()",t)}}}get creativeAdRemainingTime(){if(!this.VPAIDCreative)return 0;zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"getAdRemainingTime()"}});let t=10;try{t=this.VPAIDCreative.getAdRemainingTime()}catch(t){console.warn("Error .getAdRemainingTime()",t)}return"number"==typeof t?t:10}get creativeAdDuration(){if(!this.VPAIDCreative)return 0;const t=this.adBlock?this.adBlock.duration/1e3:15;zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"getAdDuration()"}});let e=5e3;try{e=this.VPAIDCreative.getAdDuration(),("number"!=typeof e||Number.isNaN(e)||e<=0)&&(e=5e3)}catch(t){console.warn("Error .getAdDuration()",t)}const i=e>=5e3?e/1e3:e;return Math.max(t,i)}get creativeAdLinear(){if(!this.VPAIDCreative)return!1;zn(this,Cn,Dn).call(this,{type:"VPAID_METHOD_FIRED",data:{method:"getAdLinear()"}});try{return!!this.VPAIDCreative.getAdLinear()}catch(t){return console.warn("Error .getAdLinear()",t),!0}}get creativePlayTime(){return this.creativeAdDuration-this.creativeAdRemainingTime}startAdAfterAdLoaded(){this.debug(null,"vpaid startAdAfterAdLoaded()"),this.startAd()}play(){return new Promise((async t=>{var e,i,s;this.promiseResolveThisBlockFinished=t;const n=null==(e=this.mediaBlock)?void 0:e.href;if(n&&this.iframe.value){zn(this,Cn,Dn).call(this,{type:"VPAID_PLAY",data:{url:n}}),this.resizeObserver.observe(this.iframe.value);const t=await nn(this.iframe.value,n);if(this.debug(null,"loadVPAIDScript finish"),"number"==typeof t)return[946,947].includes(t)?(this.emitEvent({event:"errorAdvanced"},t),void this.endBlock()):(this.errorCode=t,this.eventError());try{this.VPAIDCreative=t,this.subscribeToEvent()}catch(t){throw t}null==(i=this.iframe.value.contentWindow)||i.document.getElementsByTagName("body")[0].appendChild(this.VPAIDVideoSlot),null==(s=this.iframe.value.contentWindow)||s.document.getElementsByTagName("body")[0].appendChild(this.VPAIDSlot),this.initAd()}}))}render(){return G`
			<iframe ${te(this.iframe)} id="adLoaderIframe" allow="autoplay" class="${this.blackScreen?"":"opacity-0-search-adv"}"></iframe>
			${this.debugView?this.debugEventContainer:""}
		`}};Pn=new WeakMap,Sn=new WeakMap,xn=new WeakMap,Cn=new WeakSet,Mn=function(){jn(this,Sn).AdVideoStart=!1,jn(this,Sn).AdVideoFirstQuartile=!1,jn(this,Sn).AdVideoMidpoint=!1,jn(this,Sn).AdVideoThirdQuartile=!1,jn(this,Sn).AdVideoComplete=!1,jn(this,Sn).AdImpression=!1},$n=function(t){return this.played&&!jn(this,xn)&&(this.emitEvent({event:"errorAdvanced"},t),Hn(this,xn,!0),this.blockBadVPAID&&!jn(this,Pn)&&this.endBlock()),!(this.blockBadVPAID&&!jn(this,Pn))},Vn=async function(t,e=!1){return this.debug(null,`healthCheckerAsync VPAID ${t}`),jn(this,Sn).AdStarted?"AdImpression"===t?jn(this,Sn).AdImpression?zn(this,Cn,$n).call(this,915):(jn(this,Sn).AdImpression=!0,!0):jn(this,Sn).AdVideoStart?zn(this,Cn,$n).call(this,916):(jn(this,Sn).AdVideoStart=!0,!0):e?zn(this,Cn,$n).call(this,"AdImpression"===t?940:941):(await _e(100),zn(this,Cn,Vn).call(this,t,!0))},In=function(t){if(this.debug(null,`healthChecker VPAID - ${t}`),"AdLoaded"===t)return jn(this,Sn).AdLoaded?zn(this,Cn,$n).call(this,910):(jn(this,Sn).AdLoaded=!0,!0);if(!jn(this,Sn).startAdFired)return zn(this,Cn,$n).call(this,911);if("AdStarted"===t)return jn(this,Sn).AdLoaded?jn(this,Sn).AdStarted?zn(this,Cn,$n).call(this,913):(jn(this,Sn).AdStarted=!0,!0):zn(this,Cn,$n).call(this,912);if(!jn(this,Sn).AdStarted)switch(t){case"AdVideoFirstQuartile":return zn(this,Cn,$n).call(this,942);case"AdVideoMidpoint":return zn(this,Cn,$n).call(this,943);case"AdVideoThirdQuartile":return zn(this,Cn,$n).call(this,944);default:return zn(this,Cn,$n).call(this,945)}return"AdVideoFirstQuartile"===t?jn(this,Sn).AdVideoStart?jn(this,Sn).AdVideoFirstQuartile?zn(this,Cn,$n).call(this,918):(jn(this,Sn).AdVideoFirstQuartile=!0,!0):zn(this,Cn,$n).call(this,917):"AdVideoMidpoint"===t?jn(this,Sn).AdVideoFirstQuartile?jn(this,Sn).AdVideoMidpoint?zn(this,Cn,$n).call(this,920):(jn(this,Sn).AdVideoMidpoint=!0,!0):zn(this,Cn,$n).call(this,919):"AdVideoThirdQuartile"===t?jn(this,Sn).AdVideoMidpoint?jn(this,Sn).AdVideoThirdQuartile?zn(this,Cn,$n).call(this,922):(jn(this,Sn).AdVideoThirdQuartile=!0,!0):zn(this,Cn,$n).call(this,921):jn(this,Sn).AdVideoThirdQuartile?jn(this,Sn).AdImpression?(zn(this,Cn,Mn).call(this),!0):zn(this,Cn,$n).call(this,924):zn(this,Cn,$n).call(this,923)},On=function(t,e){zn(this,Cn,Dn).call(this,"Error"===t.event?{type:"VAST_EVENT_ERROR",data:{errorCode:null!=e?e:0}}:"errorAdvanced"===t.event?{type:"VPAID_ERROR_ADVANCED",data:{errorCode:null!=e?e:0}}:{type:"VAST_EVENT",data:{value:t.event}})},Dn=function(t){if(!jn(this,Pn))return;const e={chain:[],event:t};this.emitter.emit("toVastInspector:event",e)},Ln=new WeakMap,qn.styles=[sn,en],qn=((t,e,i,s)=>{for(var n,o=s>1?void 0:s?Rn(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&Fn(e,i,o),o})([vt("ut-player-ad-block-vpaid")],qn);const Qn=u`
	:host {
		position: absolute;
		left: 0px;
		right: 0px;
		bottom: 0px;
		top: 0px;
		user-select: none;
		font-family: system-ui;
	}

	video {
		width: 100%;
		height: 100%;
		/* object-fit: cover; */
	}

	video:hover + .media-control, .media-control:hover {
		opacity: 1;
	}
`,Yn="important",Gn=" !"+Yn,Xn=jt(class extends Ut{constructor(t){var e;if(super(t),t.type!==Nt||"style"!==t.name||(null==(e=t.strings)?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const s=t[i];return null==s?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(const t in e){const s=e[t];if(null!=s){this.ft.add(t);const e="string"==typeof s&&s.endsWith(Gn);t.includes("-")||e?i.setProperty(t,e?s.slice(0,-11):s,e?Yn:""):i[t]=s}}return X}}),Kn=kt(),Zn={ru:{play:"Запустить видео",stop:"Остановить видео",rangeVolume:"Уровень громкости",muted:"Выключить звук",unmuted:"Включить звук",durationLabel:"Полоса воспроизведение видео, продолжительность [minute] мин [second] сек",durationText:"Прошло [minute] мин [second] сек"},en:{play:"Play video",stop:"Stop video",rangeVolume:"Volume level",muted:"Turn off the sound",unmuted:"Turn on sound",durationLabel:"Video playback strip, duration [minute] min [second] sec",durationText:"Elapsed [minute] min [second] sec"}},Jn=u`
:host {
	position: absolute;
	bottom: 0px;
	left: 0px;
	width: 100%;
	background-color: hsla(0, 0%, 0%, 0.25);
	color: white;
	font-size: 90%;
	opacity: 0;
	transition: all .4s linear;
	display: grid;
	column-gap: 5px;
	grid-template-areas:
		'button-play time-container volume-container'
		'range-container range-container range-container';
	grid-template-columns: min-content auto min-content;
	overflow-x: hidden;
	padding-top: 3px;
	padding-bottom: 2px;
}

.duration__container {
	grid-area: range-container;
	position: relative;
	margin-left: 16px;
	margin-right: 16px;
}

.duration__range {
	width: 100%;
}

svg {
	width: 20px;
	height: 20px;
	fill: white;
}

button {
	border: none;
	background-color: unset;
	width: 36px;
	height: 36px;
	display: grid;
	place-content: center;
	border-radius: 50%;
}

.play__button {
	grid-area: button-play;
	margin-left: 10px;
	position: relative;
	z-index: 2;
}

.play__button::before {
	content: '';
	position: absolute;
	border-radius: 50%;
	width: 100%;
	height: 100%;
	background-color: hsla(0, 0%, 100%, 0);
	transition: all .25s linear;
	z-index: 1;
}
.play__button > svg {
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: 2;
}

.play__button:hover::before, .play__button:focus-visible::before {
	background-color: hsla(0, 0%, 20%, 0.9);
}

button::before {
	content: '';
	position: absolute;
	border-radius: 50%;
	width: 100%;
	height: 100%;
	left: 0px;
	top: 0px;
	background-color: hsla(0, 0%, 100%, 0);
	transition: all .25s linear;
}

.time__container {
	grid-area: time-container;
	align-self: center;
}

.volume__container {
	grid-area: volume-container;
	margin-right: 10px;
	transition: all .25s linear;
	display: flex;
	justify-content: flex-end;
	border-radius: 18px;
	padding-left: 18px;
	position: relative;
}

.volume__container:hover, .volume__show-bg {
	background-color: hsla(0, 0%, 20%, 0.9);
}

.volume__range {
	width: 0px;
	opacity: 0;
	transition: width .25s linear, opacity .1s linear;
}

.volume__container:hover > .volume__range,
.volume__range:focus,
.volume__show-bg > .volume__range {
	width: 120px;
	opacity: 1;
}

.volume__container:hover > .volume__custom-fill,
.volume__range:focus + .volume__custom-fill,
.volume__show-bg > .volume__custom-fill {
	max-width: 120px;
	opacity: 1;
}

input[type="range"] {
	-webkit-appearance: none;
	margin: 10px 0;
	border-radius: 18px;
	position: relative;
	z-index: 5;
	background-color: unset;
}

input[type="range"]::-webkit-slider-runnable-track {
	width: 100%;
	height: 5px;
	box-shadow: 0px 0px 0px #000000;
	background: hsla(0, 0%, 100%, 0.1);
	border-radius: 2px;
	border: 0px solid #000000;
}

input[type="range"]::-webkit-slider-thumb {
	box-shadow: 0px 0px 0px #000000;
	border: 1px solid #7D7D7D;
	height: 10px;
	width: 12px;
	border-radius: 4px;
	background: #B3B3B3;
	-webkit-appearance: none;
	transform: translateY(-25%);
}
input[type="range"]:focus::-webkit-slider-runnable-track {
	background: hsla(0, 0%, 100%, 0.1);
}
input[type="range"]::-moz-range-track {
	width: 100%;
	height: 5px;
	box-shadow: unset;
	background: hsla(0, 0%, 100%, 0.1);
	border-radius: 2px;
	border: 0px solid #000000;
}

input[type="range"]::-moz-range-thumb {
	box-shadow: unset;
	border: 1px solid #7D7D7D;
	height: 9px;
	width: 12px;
	border-radius: 4px;
	background: #B3B3B3;
}

.duration__range::-moz-range-track {
	transform: translateY(calc(-25% - 3px));
}

.duration__range::-moz-range-thumb {
	transform: translateY(calc(-25% - 2px));
}

button:focus-visible, input:focus-visible {
	outline: 2px solid royalblue;
}

button:focus-visible {
	outline-offset: 1px;
}

input:focus-visible {
	outline-offset: 8px;
}

.volume__custom-fill, .duration__custom-fill, .buffered__custom-fill {
	position: absolute;
	height: 5px;
	border-radius: 2px;
}

.volume__custom-fill {
	left: 17px;
	top: 16px;
	z-index: 1;
	max-width: 0;
	opacity: 1;
	transition: max-width .25s linear, opacity .1s linear;
	background: hsla(0, 0%, 100%, 0.35);
}

.duration__custom-fill, .buffered__custom-fill {
	left: 0px;
	top: 11px;
}

.duration__custom-fill {
	background: hsla(0, 0%, 100%, 0.6);
	z-index: 1;
}

.buffered__custom-fill {
	background: hsla(0, 0%, 100%, 0.15);
	z-index: 1;
}

.control-debug {
		position: absolute;
		z-index: 100;
		background-color: white;
		padding: 3px;
		top: 0px;
		left: 50%;
		transform: translateX(-50%);
		font-size: 70%;
		color: black
	}

`,to=t=>{const e=Math.trunc(t/60);return{minute:e,second:t-60*e}},eo=t=>{const{minute:e,second:i}=to(t);return`${e}:${(t=>t<10?`0${t}`:t.toString())(i)}`};var io=Object.defineProperty,so=Object.getOwnPropertyDescriptor,no=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?so(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&io(e,i,o),o};let oo=class extends ke{constructor(){super("Player / Media / Control","DarkRed"),this.volumeRangeTag=Kt(),this.durationRangeTag=Kt(),this.aria=Zn[Kn],this.played=!1,this.currentTime=0,this.duration=0,this.buffered=0,this.volume=0,this.seeked=!1,this.ariaCurrentTimeText="",this.volumeFocus=!1,this.muteFocus=!1}get currentTimeMinuteSecond(){return to(this.currentTime)}get currentTimeString(){return eo(this.currentTime)}generateAriaCurrentTimeText(){this.ariaCurrentTimeText=this.aria.durationText.replace(/\[minute\]/,this.currentTimeMinuteSecond.minute.toString()).replace(/\[second\]/,this.currentTimeMinuteSecond.second.toString())}get durationMinuteSecond(){return to(this.duration)}get durationString(){return eo(this.duration)}get ariaDurationLabel(){return this.aria.durationLabel.replace(/\[minute\]/,this.durationMinuteSecond.minute.toString()).replace(/\[second\]/,this.durationMinuteSecond.second.toString())}get showVolumeChange(){return this.volumeFocus||this.muteFocus}get volumeToRange(){return(100*this.volume).toString()}get durationOnePercent(){return this.duration/100}get currentTimePercent(){const t=this.currentTime/this.durationOnePercent;return t<10?t+1:100===t?99:t}get bufferedPercent(){const t=Math.max(this.currentTime,this.buffered)/this.durationOnePercent;return t<10?t+1:100===t?99:t}get volumeRangeTagValue(){return this.volumeRangeTag.value?this.volumeRangeTag.value.value:0}buttonPlay(){this.dispatchEvent(new CustomEvent("control-button-play"))}buttonMute(){this.dispatchEvent(new CustomEvent("control-volume-change",{detail:this.volume?0:1}))}volumeChange(){this.dispatchEvent(new CustomEvent("control-volume-change",{detail:Number(this.volumeRangeTagValue)/100}))}volumeFocused(){this.volumeFocus=!0}volumeUnfocused(){this.volumeFocus=!1}muteFocused(){this.muteFocus=!0}muteUnfocused(){this.muteFocus=!1}rangeMouseDown(){this.seeked=!0}rangeMouseUp(){this.seeked=!1}currentTimeChange(){this.durationRangeTag.value&&(this.dispatchEvent(new CustomEvent("control-time-change",{detail:{time:Number(this.durationRangeTag.value.value),seeked:this.seeked}})),this.generateAriaCurrentTimeText())}render(){const t={"volume__show-bg":this.showVolumeChange,volume__container:!0},e={width:1.2*Number(this.volumeToRange)+"px"},i={width:`${Number(this.currentTimePercent)}%`},s={width:`${Number(this.bufferedPercent)}%`};return G`
			<button
				class="play__button"
				aria-label="${this.played?this.aria.stop:this.aria.play}"
				@click="${this.buttonPlay}"
			>
				${this.played?Mt:Ct}
			</button>
			<div class="time__container">
				${this.currentTimeString} / ${this.durationString}
			</div>
			<div class=${ee(t)}>
				<input
					${te(this.volumeRangeTag)}
					type="range"
					min="0"
					max="100"
					class="volume__range"
					.value=${this.volumeToRange}
					@change=${this.volumeChange}
					@input=${this.volumeChange}
					@focus=${this.volumeFocused}
					@blur=${this.volumeUnfocused}
					aria-label=${this.aria.rangeVolume}
				>
				<span class="volume__custom-fill" aria-hidden="true" style=${Xn(e)}></span>
				<button
					aria-label="${this.volume?this.aria.muted:this.aria.unmuted}"
					@click="${this.buttonMute}"
					@focus=${this.muteFocused}
					@blur=${this.muteUnfocused}
				>
					${this.volume?$t:Vt}
				</button>
			</div>
			<div class="duration__container">
				<input
					${te(this.durationRangeTag)}
					type="range"
					min="0"
					.max="${this.duration.toString()}"
					@change=${this.currentTimeChange}
					@input=${this.currentTimeChange}
					@focus=${this.generateAriaCurrentTimeText}
					@mousedown=${this.rangeMouseDown}
					@mouseup=${this.rangeMouseUp}
					class="duration__range"
					.value=${this.currentTime.toString()}
					aria-label=${this.ariaDurationLabel}
					aria-valuetext=${this.ariaCurrentTimeText}
				>
				<span class="buffered__custom-fill" aria-hidden="true" style=${Xn(s)}></span>
				<span class="duration__custom-fill" aria-hidden="true" style=${Xn(i)}></span>
			</div>
		`}};oo.styles=[Jn],no([bt({converter:{fromAttribute:t=>"true"===t}})],oo.prototype,"played",2),no([bt({type:Number})],oo.prototype,"currentTime",2),no([bt({type:Number})],oo.prototype,"duration",2),no([bt({type:Number})],oo.prototype,"buffered",2),no([bt({type:Number})],oo.prototype,"volume",2),no([bt({type:Boolean})],oo.prototype,"seeked",2),no([bt({type:String,state:!0})],oo.prototype,"ariaCurrentTimeText",2),no([bt({type:Boolean,state:!0})],oo.prototype,"volumeFocus",2),no([bt({type:Boolean,state:!0})],oo.prototype,"muteFocus",2),oo=no([vt("ut-player-media-control")],oo);var ro=Object.defineProperty,ao=Object.getOwnPropertyDescriptor,lo=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?ao(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&ro(e,i,o),o};let ho=class extends ke{constructor(){super("Player / Media / File","DarkRed"),this.elementFinishResolve=()=>{},this.videoTag=Kt(),this.videoTagSource=Kt(),this.emitter=new ye,this.url="",this.debugMedia=!1,this.played=!1,this.volume=1,this.buffered=0,this.duration=0,this.currentTime=0,this.quartileEventHistory=[],this.maxCurrentTime=0,this.eventError=t=>{this.debug((()=>{console.log(t)}),"eventError"),this.emitToMainElement("media-error"),this.elementFinishResolve("error")},this.eventLoadedData=()=>{this.videoTag.value&&(this.duration=Math.trunc(this.videoTag.value.duration),this.played=!0,this.videoTag.value.volume=this.volume,this.videoTag.value.play(),this.debug((()=>{console.log({url:this.url,duration:this.duration})}),"eventLoadedData"),this.emitToMainElement("media-init",{duration:this.duration,volume:this.volume}),this.emitToMainElement("media-start"))},this.eventEnded=()=>{this.played=!1,this.debug(null,"eventEnded"),this.emitToMainElement("media-complete"),this.elementFinishResolve("complete")},this.eventTimeUpdate=()=>{this.videoTag.value&&this.setCurrentTime(Math.trunc(this.videoTag.value.currentTime))},this.progress=()=>{if(this.videoTag.value)try{this.buffered=Math.trunc(this.videoTag.value.buffered.end(0))}catch(t){}}}emitToMainElement(t,e){this.emitter.emit("toMainFromMedia:event",{event:t,data:e})}get volumeToRange(){return(100*this.volume).toString()}set volumeToRange(t){if(!this.videoTag.value)return;Number(t)/100!==this.volume&&(this.volume=Number(t)/100,this.videoTag.value.volume=this.volume,this.debug(null,`media-volumeChange ${this.volume}`),this.emitToMainElement("media-volumeChange",this.volume))}get durationQuartile(){return{firstQuartile:Math.floor(this.duration/4),midpoint:Math.floor(this.duration/2),thirdQuartile:3*Math.floor(this.duration/4)}}setCurrentTime(t){this.currentTime=t,t<=this.maxCurrentTime||(this.maxCurrentTime=t,this.debug(null,`eventTimeUpdate ${this.maxCurrentTime}`),this.emitToMainElement("media-timeUpdate",this.maxCurrentTime),Object.keys(this.durationQuartile).forEach((t=>{const e=t;!this.quartileEventHistory.includes(e)&&this.maxCurrentTime>=this.durationQuartile[e]&&(this.quartileEventHistory.push(e),this.debug(null,`media-${e}`),this.emitToMainElement(`media-${e}`))})))}start(){return new Promise((async t=>{this.debug(null,"start"),this.debugConsoleElement=this.debugMedia,this.elementFinishResolve=t}))}firstUpdated(){this.videoTag.value&&this.videoTagSource.value&&(this.videoTagSource.value.addEventListener("error",this.eventError),this.videoTag.value.addEventListener("abort",this.eventError),this.videoTag.value.addEventListener("error",this.eventError),this.videoTag.value.addEventListener("abort",this.eventError),this.videoTag.value.addEventListener("loadeddata",this.eventLoadedData),this.videoTag.value.addEventListener("ended",this.eventEnded),this.videoTag.value.addEventListener("timeupdate",this.eventTimeUpdate),this.videoTag.value.addEventListener("progress",this.progress))}pause(){this.videoTag.value&&(this.debug(null,"media-pause"),this.emitToMainElement("media-pause"),this.videoTag.value.pause(),this.played=!1)}play(){this.videoTag.value&&(this.debug(null,"media-play"),this.emitToMainElement("media-play"),this.videoTag.value.play(),this.played=!0)}buttonPlay(){if(this.videoTag.value)return this.played?this.pause():void this.play()}volumeChange(t){this.videoTag.value&&(this.volume=t.detail,this.videoTag.value.volume=this.volume)}currentTimeChange(t){this.videoTag.value&&(this.setCurrentTime(t.detail.time),this.videoTag.value.currentTime=t.detail.time)}render(){return G`
			<video ${te(this.videoTag)} @click="${this.buttonPlay}">
				<source ${te(this.videoTagSource)} .src="${this.url}">
			</video>
			<ut-player-media-control
				class="media-control"
				played=${this.played}
				currentTime=${this.currentTime}
				duration=${this.duration}
				buffered=${this.buffered}
				volume=${this.volume}

				@control-button-play=${this.buttonPlay}
				@control-volume-change=${this.volumeChange}
				@control-time-change=${this.currentTimeChange}
			></ut-player-media-control>
		`}disconnectedCallback(){this.videoTag.value&&this.videoTagSource.value&&(this.videoTagSource.value.removeEventListener("error",this.eventError),this.videoTag.value.removeEventListener("abort",this.eventError),this.videoTag.value.removeEventListener("error",this.eventError),this.videoTag.value.removeEventListener("stalled",this.eventError),this.videoTag.value.removeEventListener("loadeddata",this.eventLoadedData),this.videoTag.value.removeEventListener("ended",this.eventEnded),this.videoTag.value.removeEventListener("timeupdate",this.eventTimeUpdate),this.videoTag.value.removeEventListener("progress",this.progress))}};ho.styles=[Qn],lo([bt({type:String})],ho.prototype,"url",2),lo([bt({type:Boolean,attribute:"debug"})],ho.prototype,"debugMedia",2),lo([bt({type:Boolean,state:!0})],ho.prototype,"played",2),lo([bt({type:Number,reflect:!0})],ho.prototype,"volume",2),lo([bt({type:Number,state:!0})],ho.prototype,"buffered",2),lo([bt({type:Number,state:!0})],ho.prototype,"duration",2),lo([bt({type:Number,state:!0})],ho.prototype,"currentTime",2),ho=lo([vt("ut-player-media-file")],ho);const co=u`
	:host {
		position: absolute;
		left: 0px;
		right: 0px;
		bottom: 0px;
		top: 0px;
		user-select: none;
		font-family: system-ui;
	}

	iframe {
		position: absolute;
		left: 0px;
		top: 0px;
		width: 100% !important;
		height: 100% !important;
	}

	/* video {
		width: 100%;
		height: 100%;
	} */

	iframe:hover + .media-control, .media-control:hover {
		opacity: 1;
	}

`;var uo=Object.defineProperty,po=Object.getOwnPropertyDescriptor,fo=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?po(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&uo(e,i,o),o};let mo=class extends ke{constructor(){super("Player / Media / YouTube","DarkRed"),this.elementFinishResolve=()=>{},this.emitter=new ye,this.playerTag=Kt(),this.w=window,this.YouTubePlayer=null,this.duration=0,this.state=-1,this.currentTime=0,this.volume=0,this.debugMedia=!1,this.youtubeKey="",this.quartileEventHistory=[],this.maxCurrentTime=0,this.onYouTubeIframeAPIReady=()=>{this.playerTag.value&&(this.YouTubePlayer=new YT.Player(this.playerTag.value,{videoId:this.youtubeKey,playerVars:{disablekb:1,controls:0,fs:0,modestbranding:1,rel:0,showinfo:0},events:{onReady:()=>{this.YouTubePlayer&&(this.duration=this.YouTubePlayer.getDuration(),this.emitToMainElement("media-init",{duration:this.duration,volume:this.volume}),this.YouTubePlayer.seekTo(0,!0),this.YouTubePlayer.playVideo(),this.emitToMainElement("media-start"))},onStateChange:t=>{if(this.state=t.data,1===t.data)return this.checkCurrentTime();0===t.data&&(this.emitToMainElement("media-complete"),this.elementFinishResolve("finish"))},onError:()=>{this.emitToMainElement("media-error"),this.elementFinishResolve("finish")}}}))}}emitToMainElement(t,e){this.emitter.emit("toMainFromMedia:event",{event:t,data:e})}get durationQuartile(){return{firstQuartile:Math.floor(this.duration/4),midpoint:Math.floor(this.duration/2),thirdQuartile:3*Math.floor(this.duration/4)}}play(){this.YouTubePlayer&&(this.debug(null,"media-play"),this.emitToMainElement("media-play"),this.YouTubePlayer.playVideo())}pause(){this.YouTubePlayer&&(this.debug(null,"media-pause"),this.emitToMainElement("media-pause"),this.YouTubePlayer.pauseVideo())}start(){return new Promise((t=>{this.debugConsoleElement=this.debugMedia,this.elementFinishResolve=t}))}checkCurrentTime(){this.YouTubePlayer&&(this.currentTime=Math.floor(this.YouTubePlayer.getCurrentTime()),1===this.state&&setTimeout((()=>{this.checkCurrentTime()}),250),this.currentTime<=this.maxCurrentTime||(this.maxCurrentTime=this.currentTime,this.debug(null,`eventTimeUpdate ${this.maxCurrentTime}`),this.emitToMainElement("media-timeUpdate",this.maxCurrentTime),Object.keys(this.durationQuartile).forEach((t=>{const e=t;!this.quartileEventHistory.includes(e)&&this.maxCurrentTime>=this.durationQuartile[e]&&(this.quartileEventHistory.push(e),this.debug(null,`media-${e}`),this.emitToMainElement(`media-${e}`))}))))}firstUpdated(){var t;if(!this.playerTag.value)return;if(this.w.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady,"undefined"!=typeof YT)return this.onYouTubeIframeAPIReady();const e=document.createElement("script");e.type="text/javascript",e.src="https://www.youtube.com/iframe_api",null==(t=this.shadowRoot)||t.appendChild(e)}get played(){return 1===this.state}currentTimeChange(t){this.YouTubePlayer&&this.YouTubePlayer.seekTo(t.detail.time,!t.detail.seeked)}volumeChange(t){this.YouTubePlayer&&(this.volume=t.detail,this.YouTubePlayer.setVolume(100*this.volume),this.emitToMainElement("media-volumeChange",this.volume))}buttonPlay(){this.YouTubePlayer&&(1===this.state?(this.emitToMainElement("media-pause"),this.YouTubePlayer.pauseVideo()):(this.emitToMainElement("media-play"),this.YouTubePlayer.playVideo()))}render(){return G`
		<div ${te(this.playerTag)}></div>
		<ut-player-media-control
			class="media-control"
			played=${this.played}
			currentTime=${this.currentTime}
			duration=${this.duration}
			volume=${this.volume}

			@control-button-play=${this.buttonPlay}
			@control-volume-change=${this.volumeChange}
			@control-time-change=${this.currentTimeChange}
		></ut-player-media-control>
		`}};mo.styles=[co],fo([bt({type:Number,state:!0})],mo.prototype,"duration",2),fo([bt({type:Number,state:!0})],mo.prototype,"state",2),fo([bt({type:Number,state:!0})],mo.prototype,"currentTime",2),fo([bt({type:Number})],mo.prototype,"volume",2),fo([bt({type:Boolean,attribute:"debug"})],mo.prototype,"debugMedia",2),fo([bt({type:String,attribute:"youtube-key"})],mo.prototype,"youtubeKey",2),mo=fo([vt("ut-player-media-youtube")],mo);const vo=t=>{var e;if(!t)return!1;if(!t.match(/^https:\/\/(www.)youtube.com\//gi))return!1;const i=null==(e=t.split("?")[1])?void 0:e.split("&");if(!i)return!1;let s=!1;return i.some((t=>{const[e,i]=t.split("=");return!("v"!==e||!i)&&(s=i,!0)})),s};var go,yo,bo=Object.defineProperty,wo=Object.getOwnPropertyDescriptor,Ao=t=>{throw TypeError(t)},ko=(t,e,i,s)=>{for(var n,o=s>1?void 0:s?wo(e,i):e,r=t.length-1;r>=0;r--)(n=t[r])&&(o=(s?n(e,i,o):n(o))||o);return s&&o&&bo(e,i,o),o},_o=(t,e,i)=>e.has(t)||Ao("Cannot "+i),To=(t,e,i)=>(_o(t,e,"read from private field"),e.get(t)),Eo=(t,e,i)=>e.has(t)?Ao("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Po=(t,e,i,s)=>(_o(t,e,"write to private field"),e.set(t,i),i);let So=class extends ke{constructor(){super("Player","black"),this.aria=Tt[_t],this.fullAdPromise=[],this.emitter=new ye,this.elementMedia=null,this.elementAd=null,this.adPlayed=[],this.showPlayClick=!1,this.showPlayClickResolve=()=>{},this.idPlayer=Math.floor(1e5*Math.random()),Eo(this,go),Eo(this,yo),this.options={id:Math.floor(1e6*Math.random()),autoPlay:!0,parallel:!1,mediaSendEvent:!1,postBack:!1,isPartnerVPAID:!1,poster:"",volume:.8,block:[],block2LVLDomains:[],debugMedia:!1,debugMain:!1,adLoaded:!1,origins:[]},this.activeBlock=-1,this.getAdPositionType=t=>"media-start"===t.event?{type:"preroll"}:"media-firstQuartile"===t.event?{type:"midroll",midrollTime:"firstQuartile"}:"media-midpoint"===t.event?{type:"midroll",midrollTime:"midpoint"}:"media-thirdQuartile"===t.event?{type:"midroll",midrollTime:"thirdQuartile"}:"media-timeUpdate"===t.event&&"number"==typeof t.data?{type:"midroll",midrollTime:t.data}:"media-complete"===t.event&&{type:"postroll"},this.playMediaEmitterHandler=async t=>{if(this.options.mediaSendEvent&&this.emitToSdk(t.event,t.data),!this.nowActiveBlock.adSetting||!this.elementMedia)return;const e=this.getAdPositionType(t);if(!e)return;if(this.adPlayed.find((t=>t.type===e.type&&(t.midrollTime===e.midrollTime||"number"==typeof t.midrollTime&&"number"==typeof e.midrollTime&&e.midrollTime>=t.midrollTime))))return;const i=this.nowActiveBlock.adSetting.find((t=>!!t.position&&(!(t.position.type!==e.type||!["postroll","preroll"].includes(e.type))||"midroll"===t.position.type&&"midroll"===e.type&&(t.position.midrollTime===e.midrollTime||"number"==typeof t.position.midrollTime&&"number"==typeof e.midrollTime&&e.midrollTime>=t.position.midrollTime))));i&&(this.adPlayed.push(e),this.elementMedia.pause(),await this.playAd(i),this.requestUpdate(),this.elementMedia.play())}}emitToSdk(t,e,i=this.idPlayer){const s={id:i,event:t,data:e};if(this.debug((()=>{console.log(s)}),`toSdk:event / ${s.event}`),this.emitter.emit("toSdk:event",s),this.options.postBack){const t=this.options.isPartnerVPAID&&Ti[s.event]?Ti[s.event]:s.event;window.parent.postMessage({...s,initiator:"ut-player",id:this.options.id,event:t},"*")}}get visibility(){return this.elementAd?this.elementAd.visibility:0}get nowActiveBlock(){return this.options.block[this.activeBlock]}initSoundLevel(t){const e="number"==typeof t&&t>=0&&t<=1?t:.8;0!==e?this.options.autoPlay?this.options.volume=Ds()?e:0:this.options.volume=e:this.options.volume=0}init(t){t.addErrorFromSdk&&Po(this,yo,t.addErrorFromSdk),t.urlSettingFromSDK&&Po(this,go,t.urlSettingFromSDK),this.options.autoPlay=t.autoPlay,this.initSoundLevel(t.volume),"string"==typeof t.poster&&(this.options.poster=t.poster),t.block2LVLDomains&&Array.isArray(t.block2LVLDomains)&&(this.options.block2LVLDomains=t.block2LVLDomains),this.options.mediaSendEvent=!!t.mediaSendEvent,this.options.debugMedia=!!t.debugMedia,this.options.debugMain=!!t.debugMain,this.options.adLoaded=!!t.adLoaded,this.options.parallel=!!t.parallel,this.options.blackScreen=!!t.blackScreen,t.origins&&Array.isArray(t.origins)&&(this.options.origins=t.origins),this.options.postBack=!!t.postBack,this.options.isPartnerVPAID=!!t.isPartnerVPAID,this.debugConsoleElement=this.options.debugMain;const e=Array.isArray(t.block)?t.block:[t.block];this.options.block=e.map((t=>({media:t.media,youtube:vo(t.media),...t.adSetting&&{adSetting:Array.isArray(t.adSetting)?t.adSetting:[t.adSetting]}}))),this.debug((()=>{console.log("options",this.options),console.log("this.#urlSettingFromSDK",To(this,go)),console.log(13)}),"Инициализация");JSON.parse(JSON.stringify(this.options)).block.forEach((t=>{var e;null==(e=t.adSetting)||e.forEach((t=>{t.vast&&(t.vast=t.vast.length.toString())}))})),this.options.autoPlay||this.requestUpdate()}play(){return new Promise((async t=>{this.options.autoPlay||await this.playClickPromise();for await(const t of this.generateBlockSequence())this.debug((()=>{console.log(t)}),"Блок завершен");this.emitToSdk("finish"),Promise.race([Promise.all(this.fullAdPromise),new Promise((t=>{setTimeout((()=>{t("timeout")}),2e3)}))]).then((()=>{this.debug(null,"Promise.all !!!"),this.emitToSdk("finish_promise"),t("finish")}))}))}playClickPromise(){return new Promise((t=>{this.showPlayClick=!0,this.requestUpdate(),this.showPlayClickResolve=t}))}playClickHandler(){this.showPlayClickResolve("click"),this.showPlayClick=!1,this.requestUpdate(),this.debug(null,"Ручной запуск")}skip(){this.debug(null,"skip()"),this.elementAd&&this.elementAd.skip()}normalizeVolumeValue(t){const e="number"!=typeof t?Number(t):t;return isNaN(e)||e<0?0:e>1?1:e}setVolume(t){if(this.debug((()=>{console.log("now",this.options.volume,"new",t)}),"setVolume()"),void 0===t)return;const e=this.normalizeVolumeValue(t);this.debug(null,`normalizeVolumeValue ${e}`),this.options.volume!==e&&(this.options.volume=e,this.elementAd&&this.elementAd.setVolume(!!e))}pauseAd(){this.debug(null,"pauseAd()"),this.elementAd&&this.elementAd.pause()}resumeAd(){this.debug(null,"resumeAd()"),this.elementAd&&this.elementAd.resume()}async*generateBlockSequence(){for(let t=0;t<this.options.block.length;t+=1)this.activeBlock=t,this.debug((()=>{console.log(this.nowActiveBlock)}),this.nowActiveBlock.media?"Запуск Media":"Запуск Ad"),this.nowActiveBlock.media?await this.playMedia():this.nowActiveBlock.adSetting&&await this.playAd(this.nowActiveBlock.adSetting[0]),yield!0}pauseMedia(){this.nowActiveBlock.media&&this.elementMedia&&this.elementMedia.pause()}resumeMedia(){this.nowActiveBlock.media&&this.elementMedia&&this.elementMedia.play()}playAd(t){return new Promise((async e=>{this.elementAd=document.createElement("ut-player-ad"),t.options.debugView&&this.elementAd.classList.add("debug-view"),this.requestUpdate();const i={...t,options:{...t.options,adLoaded:this.options.adLoaded,parallel:this.options.parallel,isPartnerVPAID:this.options.isPartnerVPAID,volume:!!this.options.volume,blackScreen:this.options.blackScreen,origins:this.options.origins,block2LVLDomains:this.options.block2LVLDomains}};t.options.vastInspectorMode&&this.elementAd.emitter.subscribe("toVastInspector:event",(t=>{this.emitter.emit("toVastInspector:event",t)})),this.options.blackScreen&&this.elementAd.classList.add("black-screen"),await this.elementAd.init(i,To(this,go),To(this,yo));const s=new Promise((t=>{this.elementAd&&this.elementAd.emitter.subscribe("toMainFromAd:event",(i=>{if(this.debug((()=>{console.log(i)}),"toMainFromAd:event"),"adLoaded"!==i.event||this.options.adLoaded)return["finish_promise","finish"].includes(i.event)?"finish"===i.event?e("finish"):"finish_promise"===i.event?t("finish"):void 0:this.emitToSdk(i.event,i.data)}))}));this.fullAdPromise.push(s),await this.elementAd.play(),this.elementAd=null,this.requestUpdate()}))}adStart(){this.elementAd&&this.options.isPartnerVPAID&&this.options.adLoaded&&this.elementAd.startAdAfterAdLoaded()}playMedia(){return new Promise((async t=>{this.nowActiveBlock.media&&(this.nowActiveBlock.youtube?(this.elementMedia=document.createElement("ut-player-media-youtube"),this.elementMedia.setAttribute("youtube-key",this.nowActiveBlock.youtube)):(this.elementMedia=document.createElement("ut-player-media-file"),this.elementMedia.setAttribute("url",this.nowActiveBlock.media)),this.options.debugMedia&&this.elementMedia.toggleAttribute("debug"),this.options.volume&&this.elementMedia.setAttribute("volume",this.options.volume.toString()),this.requestUpdate(),this.elementMedia.emitter.subscribe("toMainFromMedia:event",this.playMediaEmitterHandler),await this.elementMedia.start(),this.elementMedia=null,this.requestUpdate(),t("finish"))}))}get posterUrl(){return this.options.block[0].youtube?`https://i.ytimg.com/vi/${this.options.block[0].youtube}/maxresdefault.jpg`:!!this.options.poster&&this.options.poster}get poster(){return this.posterUrl?G`<img src="${this.posterUrl}" class="play-click__poster" alt="${this.aria.posterLabel}">`:G``}render(){if(this.showPlayClick)return G`
			${this.poster}
			<button
				class="play-click__button"
				aria-label="${this.aria.play}"
				@click=${this.playClickHandler}
			>${xt}</button>`;const t=this.elementMedia?G`${this.elementMedia}`:G``,e=this.elementAd?G`${this.elementAd}`:G``;return G`${t}${e}`}};go=new WeakMap,yo=new WeakMap,So.styles=[It],ko([wt()],So.prototype,"options",2),So=ko([vt("ut-player")],So)}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};!function(){const t=i(94706),e=i(7316);if(window.ICOptions){const e=window.ICOptions;new t.default(e)}else window.UTInventoryCore||(window.UTInventoryCore=t.default,window.UTInventoryCoreFixedContainerSize=t=>{const e=document.getElementById(t);if(!e)return void console.warn("Container not found",t);const i=e.clientWidth,s=e.clientHeight;return e.style.width=`${i}px`,e.style.height=`${s}px`,e.style.display="grid",e.style.placeContent="center",e},window.UTInventoryCoreAdd3PartyCode=t=>{const e=document.getElementById(t.container);if(e)return e.innerHTML=t.code,Array.from(e.querySelectorAll("script")).forEach((t=>{const e=document.createElement("script");Array.from(t.attributes).forEach((t=>e.setAttribute(t.name,t.value))),e.appendChild(document.createTextNode(t.innerHTML)),t.parentNode.replaceChild(e,t)})),e;console.warn("Container not found",t.container)},window.UTInventoryCoreDelay=t=>(0,e.default)(t))}()}();
